var t=Object.defineProperty,e=(e,n,r)=>((e,n,r)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r)(e,"symbol"!=typeof n?n+"":n,r);import{g as n,a as r,c as i,r as o,b as s,d as a}from"./ui-vendor-G60cYPVx.js";var c={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,r,o,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new i(r,o||t,s),c=n?n+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function s(t,e){0===--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},a.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},a.prototype.emit=function(t,e,r,i,o,s){var a=n?n+t:t;if(!this._events[a])return!1;var c,u,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,i),!0;case 5:return l.fn.call(l.context,e,r,i,o),!0;case 6:return l.fn.call(l.context,e,r,i,o,s),!0}for(u=1,c=new Array(h-1);u<h;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var f,d=l.length;for(u=0;u<d;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),h){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,r);break;case 4:l[u].fn.call(l[u].context,e,r,i);break;default:if(!c)for(f=1,c=new Array(h-1);f<h;f++)c[f-1]=arguments[f];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||i&&!a.once||r&&a.context!==r||s(this,o);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==e||i&&!a[c].once||r&&a[c].context!==r)&&u.push(a[c]);u.length?this._events[o]=1===u.length?u[0]:u:s(this,o)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&s(this,e)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}(c);const u=n(c.exports);class l extends Error{constructor(t,e){super(t),this.error=e}}class h extends l{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class f extends l{constructor(){super(...arguments),this.name="WalletLoadError"}}class d extends l{constructor(){super(...arguments),this.name="WalletConfigError"}}class p extends l{constructor(){super(...arguments),this.name="WalletConnectionError"}}class g extends l{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class m extends l{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class y extends l{constructor(){super(...arguments),this.name="WalletAccountError"}}class w extends l{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class b extends l{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class v extends l{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class E extends l{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class S extends l{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class A extends l{constructor(){super(...arguments),this.name="WalletSignInError"}}var x,_;(_=x||(x={})).Installed="Installed",_.NotDetected="NotDetected",_.Loadable="Loadable",_.Unsupported="Unsupported";class B extends u{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(t,e,n={}){const r=this.publicKey;if(!r)throw new b;return t.feePayer=t.feePayer||r,t.recentBlockhash=t.recentBlockhash||(await e.getLatestBlockhash({commitment:n.preflightCommitment,minContextSlot:n.minContextSlot})).blockhash,t}}function k(t){if("undefined"==typeof window||"undefined"==typeof document)return;const e=[];function n(){if(t())for(const t of e)t()}const r=setInterval(n,1e3);e.push(()=>clearInterval(r)),"loading"===document.readyState&&(document.addEventListener("DOMContentLoaded",n,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",n))),"complete"!==document.readyState&&(window.addEventListener("load",n,{once:!0}),e.push(()=>window.removeEventListener("load",n))),n()}function M(){if(!navigator)return!1;const t=navigator.userAgent.toLowerCase(),e=t.includes("iphone")||t.includes("ipad"),n=t.includes("safari");return e&&n}function I(t){return"version"in t}class C extends B{async sendTransaction(t,e,n={}){let r=!0;try{if(I(t)){if(!this.supportedTransactionVersions)throw new v("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(t.version))throw new v(`Sending transaction version ${t.version} isn't supported by this wallet`);try{const r=(t=await this.signTransaction(t)).serialize();return await e.sendRawTransaction(r,n)}catch(i){if(i instanceof E)throw r=!1,i;throw new v(i?.message,i)}}else try{const{signers:r,...i}=n;t=await this.prepareTransaction(t,e,i),r?.length&&t.partialSign(...r);const o=(t=await this.signTransaction(t)).serialize();return await e.sendRawTransaction(o,i)}catch(i){if(i instanceof E)throw r=!1,i;throw new v(i?.message,i)}}catch(i){throw r&&this.emit("error",i),i}}async signAllTransactions(t){for(const n of t)if(I(n)){if(!this.supportedTransactionVersions)throw new E("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(n.version))throw new E(`Signing transaction version ${n.version} isn't supported by this wallet`)}const e=[];for(const n of t)e.push(await this.signTransaction(n));return e}}class T extends C{}class R extends T{}const L="solana:signAndSendTransaction",O="solana:signIn",U="solana:signMessage",N="solana:signTransaction",P="standard:connect",z="standard:disconnect",j="standard:events";var D,F;(F=D||(D={})).Mainnet="mainnet-beta",F.Testnet="testnet",F.Devnet="devnet";for(var q={},K={byteLength:function(t){var e=G(t),n=e[0],r=e[1];return 3*(n+r)/4-r},toByteArray:function(t){var e,n,r=G(t),i=r[0],o=r[1],s=new $(function(t,e,n){return 3*(e+n)/4-n}(0,i,o)),a=0,c=o>0?i-4:i;for(n=0;n<c;n+=4)e=H[t.charCodeAt(n)]<<18|H[t.charCodeAt(n+1)]<<12|H[t.charCodeAt(n+2)]<<6|H[t.charCodeAt(n+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=255&e;2===o&&(e=H[t.charCodeAt(n)]<<2|H[t.charCodeAt(n+1)]>>4,s[a++]=255&e);1===o&&(e=H[t.charCodeAt(n)]<<10|H[t.charCodeAt(n+1)]<<4|H[t.charCodeAt(n+2)]>>2,s[a++]=e>>8&255,s[a++]=255&e);return s},fromByteArray:function(t){for(var e,n=t.length,r=n%3,i=[],o=16383,s=0,a=n-r;s<a;s+=o)i.push(J(t,s,s+o>a?a:s+o));1===r?(e=t[n-1],i.push(W[e>>2]+W[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],i.push(W[e>>10]+W[e>>4&63]+W[e<<2&63]+"="));return i.join("")}},W=[],H=[],$="undefined"!=typeof Uint8Array?Uint8Array:Array,V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Z=0;Z<64;++Z)W[Z]=V[Z],H[V.charCodeAt(Z)]=Z;function G(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function Y(t){return W[t>>18&63]+W[t>>12&63]+W[t>>6&63]+W[63&t]}function J(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(Y(r));return i.join("")}H["-".charCodeAt(0)]=62,H["_".charCodeAt(0)]=63;var X={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(t,e,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,u=c>>1,l=-7,h=n?i-1:0,f=n?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+t[e+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+h],h+=f,l-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=u}return(d?-1:1)*s*Math.pow(2,o-r)},write:function(t,e,n,r,i,o){var s,a,c,u=8*o-i-1,l=(1<<u)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+h>=1?f/c:f*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=l?(a=0,s=l):s+h>=1?(a=(e*c-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;t[n+d]=255&s,d+=p,s/=256,u-=8);t[n+d-p]|=128*g}};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
!function(t){const e=K,n=X,r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=s,t.SlowBuffer=function(t){+t!=t&&(t=0);return s.alloc(+t)},t.INSPECT_MAX_BYTES=50;const i=2147483647;function o(t){if(t>i)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,s.prototype),e}function s(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return u(t)}return a(t,e,n)}function a(t,e,n){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|d(t,e);let r=o(n);const i=r.write(t,e);i!==n&&(r=r.slice(0,i));return r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(Z(t,Uint8Array)){const e=new Uint8Array(t);return h(e.buffer,e.byteOffset,e.byteLength)}return l(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(Z(t,ArrayBuffer)||t&&Z(t.buffer,ArrayBuffer))return h(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(Z(t,SharedArrayBuffer)||t&&Z(t.buffer,SharedArrayBuffer)))return h(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return s.from(r,e,n);const i=function(t){if(s.isBuffer(t)){const e=0|f(t.length),n=o(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!=typeof t.length||G(t.length)?o(0):l(t);if("Buffer"===t.type&&Array.isArray(t.data))return l(t.data)}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return s.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t){return c(t),o(t<0?0:0|f(t))}function l(t){const e=t.length<0?0:0|f(t.length),n=o(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function h(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,s.prototype),r}function f(t){if(t>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|t}function d(t,e){if(s.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Z(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(t).length;default:if(i)return r?-1:H(t).length;e=(""+e).toLowerCase(),i=!0}}function p(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,n);case"utf8":case"utf-8":return x(this,e,n);case"ascii":return B(this,e,n);case"latin1":case"binary":return k(this,e,n);case"base64":return A(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function g(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),G(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=s.from(e,r)),s.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){let o,s=1,a=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,n/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let r=-1;for(o=n;o<a;o++)if(u(t,o)===u(e,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===c)return r*s}else-1!==r&&(o-=o-r),r=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){let n=!0;for(let r=0;r<c;r++)if(u(t,o+r)!==u(e,r)){n=!1;break}if(n)return o}return-1}function w(t,e,n,r){n=Number(n)||0;const i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=e.length;let s;for(r>o/2&&(r=o/2),s=0;s<r;++s){const r=parseInt(e.substr(2*s,2),16);if(G(r))return s;t[n+s]=r}return s}function b(t,e,n,r){return V(H(e,t.length-n),t,n,r)}function v(t,e,n,r){return V(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function E(t,e,n,r){return V($(e),t,n,r)}function S(t,e,n,r){return V(function(t,e){let n,r,i;const o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function A(t,n,r){return 0===n&&r===t.length?e.fromByteArray(t):e.fromByteArray(t.slice(n,r))}function x(t,e,n){n=Math.min(t.length,n);const r=[];let i=e;for(;i<n;){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=n){let n,r,a,c;switch(s){case 1:e<128&&(o=e);break;case 2:n=t[i+1],128==(192&n)&&(c=(31&e)<<6|63&n,c>127&&(o=c));break;case 3:n=t[i+1],r=t[i+2],128==(192&n)&&128==(192&r)&&(c=(15&e)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:n=t[i+1],r=t[i+2],a=t[i+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(c=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return function(t){const e=t.length;if(e<=_)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=_));return n}(r)}t.kMaxLength=i,s.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),!s.TYPED_ARRAY_SUPPORT&&"undefined"!=typeof console&&console.error,Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(t,e,n){return a(t,e,n)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(t,e,n){return function(t,e,n){return c(t),t<=0?o(t):void 0!==e?"string"==typeof n?o(t).fill(e,n):o(t).fill(e):o(t)}(t,e,n)},s.allocUnsafe=function(t){return u(t)},s.allocUnsafeSlow=function(t){return u(t)},s.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==s.prototype},s.compare=function(t,e){if(Z(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),Z(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=s.allocUnsafe(e);let i=0;for(n=0;n<t.length;++n){let e=t[n];if(Z(e,Uint8Array))i+e.length>r.length?(s.isBuffer(e)||(e=s.from(e)),e.copy(r,i)):Uint8Array.prototype.set.call(r,e,i);else{if(!s.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,i)}i+=e.length}return r},s.byteLength=d,s.prototype._isBuffer=!0,s.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)g(this,e,e+1);return this},s.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},s.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},s.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?x(this,0,t):p.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(t,e,n,r,i){if(Z(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;let o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0);const c=Math.min(o,a),u=this.slice(r,i),l=t.slice(e,n);for(let s=0;s<c;++s)if(u[s]!==l[s]){o=u[s],a=l[s];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},s.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},s.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},s.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":case"latin1":case"binary":return v(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const _=4096;function B(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function k(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function M(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let i="";for(let o=e;o<n;++o)i+=Y[t[o]];return i}function I(t,e,n){const r=t.slice(e,n);let i="";for(let o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function C(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function T(t,e,n,r,i,o){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function R(t,e,n,r,i){D(e,r,i,t,n,7);let o=Number(e&BigInt(4294967295));t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,n}function L(t,e,n,r,i){D(e,r,i,t,n,7);let o=Number(e&BigInt(4294967295));t[n+7]=o,o>>=8,t[n+6]=o,o>>=8,t[n+5]=o,o>>=8,t[n+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=s,s>>=8,t[n+2]=s,s>>=8,t[n+1]=s,s>>=8,t[n]=s,n+8}function O(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(t,e,r,i,o){return e=+e,r>>>=0,o||O(t,0,r,4),n.write(t,e,r,i,23,4),r+4}function N(t,e,r,i,o){return e=+e,r>>>=0,o||O(t,0,r,8),n.write(t,e,r,i,52,8),r+8}s.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,s.prototype),r},s.prototype.readUintLE=s.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let r=this[t],i=1,o=0;for(;++o<e&&(i*=256);)r+=this[t+o]*i;return r},s.prototype.readUintBE=s.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let r=this[t+--e],i=1;for(;e>0&&(i*=256);)r+=this[t+--e]*i;return r},s.prototype.readUint8=s.prototype.readUInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),this[t]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readBigUInt64LE=J(function(t){F(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||q(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))}),s.prototype.readBigUInt64BE=J(function(t){F(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||q(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)}),s.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let r=this[t],i=1,o=0;for(;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},s.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);let r=e,i=1,o=this[t+--r];for(;r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},s.prototype.readInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){t>>>=0,e||C(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(t,e){t>>>=0,e||C(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readBigInt64LE=J(function(t){F(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||q(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)}),s.prototype.readBigInt64BE=J(function(t){F(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||q(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)}),s.prototype.readFloatLE=function(t,e){return t>>>=0,e||C(t,4,this.length),n.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return t>>>=0,e||C(t,4,this.length),n.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return t>>>=0,e||C(t,8,this.length),n.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return t>>>=0,e||C(t,8,this.length),n.read(this,t,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){T(this,t,e,n,Math.pow(2,8*n)-1,0)}let i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){T(this,t,e,n,Math.pow(2,8*n)-1,0)}let i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},s.prototype.writeUint8=s.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,1,255,0),this[e]=255&t,e+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeBigUInt64LE=J(function(t,e=0){return R(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=J(function(t,e=0){return L(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);T(this,t,e,n,r-1,-r)}let i=0,o=1,s=0;for(this[e]=255&t;++i<n&&(o*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o|0)-s&255;return e+n},s.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);T(this,t,e,n,r-1,-r)}let i=n-1,o=1,s=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o|0)-s&255;return e+n},s.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},s.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},s.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},s.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||T(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},s.prototype.writeBigInt64LE=J(function(t,e=0){return R(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=J(function(t,e=0){return L(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},s.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},s.prototype.writeDoubleLE=function(t,e,n){return N(this,t,e,!0,n)},s.prototype.writeDoubleBE=function(t,e,n){return N(this,t,e,!1,n)},s.prototype.copy=function(t,e,n,r){if(!s.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},s.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{const o=s.isBuffer(t)?t:s.from(t,r),a=o.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=o[i%a]}return this};const P={};function z(t,e,n){P[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function j(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function D(t,e,n,r,i,o){if(t>n||t<e){const n="bigint"==typeof e?"n":"";let r;throw r=0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`,new P.ERR_OUT_OF_RANGE("value",r,t)}!function(t,e,n){F(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||q(e,t.length-(n+1))}(r,i,o)}function F(t,e){if("number"!=typeof t)throw new P.ERR_INVALID_ARG_TYPE(e,"number",t)}function q(t,e,n){if(Math.floor(t)!==t)throw F(t,n),new P.ERR_OUT_OF_RANGE("offset","an integer",t);if(e<0)throw new P.ERR_BUFFER_OUT_OF_BOUNDS;throw new P.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${e}`,t)}z("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),z("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),z("ERR_OUT_OF_RANGE",function(t,e,n){let r=`The value of "${t}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=j(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=j(i)),i+="n"),r+=` It must be ${e}. Received ${i}`,r},RangeError);const W=/[^+/0-9A-Za-z-_]/g;function H(t,e){let n;e=e||1/0;const r=t.length;let i=null;const o=[];for(let s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function $(t){return e.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,n,r){let i;for(i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function Z(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function G(t){return t!=t}const Y=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)e[r+i]=t[n]+t[i]}return e}();function J(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}}(q);const Q="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function tt(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name}function et(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function nt(t,...e){if(!tt(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function rt(t){if("function"!=typeof t||"function"!=typeof t.create)throw new Error("Hash should be wrapped by utils.createHasher");et(t.outputLen),et(t.blockLen)}function it(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ot(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function st(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function at(t,e){return t<<32-e|t>>>e}const ct=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),ut=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function lt(t){if(nt(t),ct)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=ut[t[n]];return e}const ht=48,ft=57,dt=65,pt=70,gt=97,mt=102;function yt(t){return t>=ht&&t<=ft?t-ht:t>=dt&&t<=pt?t-(dt-10):t>=gt&&t<=mt?t-(gt-10):void 0}function wt(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);if(ct)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){const e=yt(t.charCodeAt(o)),n=yt(t.charCodeAt(o+1));if(void 0===e||void 0===n){const e=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+e+'" at index '+o)}r[i]=16*e+n}return r}function bt(t){return"string"==typeof t&&(t=function(t){if("string"!=typeof t)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(t))}(t)),nt(t),t}function vt(...t){let e=0;for(let r=0;r<t.length;r++){const n=t[r];nt(n),e+=n.length}const n=new Uint8Array(e);for(let r=0,i=0;r<t.length;r++){const e=t[r];n.set(e,i),i+=e.length}return n}class Et{}function St(t){const e=e=>t().update(bt(e)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function At(t=32){if(Q&&"function"==typeof Q.getRandomValues)return Q.getRandomValues(new Uint8Array(t));if(Q&&"function"==typeof Q.randomBytes)return Uint8Array.from(Q.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function xt(t,e,n){return t&e^~t&n}function _t(t,e,n){return t&e^t&n^e&n}class Bt extends Et{constructor(t,e,n,r){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.buffer=new Uint8Array(t),this.view=st(this.buffer)}update(t){it(this),nt(t=bt(t));const{view:e,buffer:n,blockLen:r}=this,i=t.length;for(let o=0;o<i;){const s=Math.min(r-this.pos,i-o);if(s===r){const e=st(t);for(;r<=i-o;o+=r)this.process(e,o);continue}n.set(t.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===r&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){it(this),function(t,e){nt(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:o}=this;e[o++]=128,ot(this.buffer.subarray(o)),this.padOffset>r-o&&(this.process(n,0),o=0);for(let l=o;l<r;l++)e[l]=0;!function(t,e,n,r){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,n,r);const i=BigInt(32),o=BigInt(4294967295),s=Number(n>>i&o),a=Number(n&o),c=r?4:0,u=r?0:4;t.setUint32(e+c,s,r),t.setUint32(e+u,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const s=st(t),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<c;l++)s.setUint32(4*l,u[l],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:o,pos:s}=this;return t.destroyed=o,t.finished=i,t.length=r,t.pos=s,r%e&&t.buffer.set(n),t}clone(){return this._cloneInto()}}const kt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Mt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),It=BigInt(2**32-1),Ct=BigInt(32);function Tt(t,e=!1){return e?{h:Number(t&It),l:Number(t>>Ct&It)}:{h:0|Number(t>>Ct&It),l:0|Number(t&It)}}const Rt=(t,e,n)=>t>>>n,Lt=(t,e,n)=>t<<32-n|e>>>n,Ot=(t,e,n)=>t>>>n|e<<32-n,Ut=(t,e,n)=>t<<32-n|e>>>n,Nt=(t,e,n)=>t<<64-n|e>>>n-32,Pt=(t,e,n)=>t>>>n-32|e<<64-n;function zt(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:0|i}}const jt=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Dt=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Ft=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),qt=(t,e,n,r,i)=>e+n+r+i+(t/2**32|0)|0,Kt=(t,e,n,r,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(i>>>0),Wt=(t,e,n,r,i,o)=>e+n+r+i+o+(t/2**32|0)|0,Ht=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),$t=new Uint32Array(64);class Vt extends Bt{constructor(t=32){super(64,t,8,!1),this.A=0|kt[0],this.B=0|kt[1],this.C=0|kt[2],this.D=0|kt[3],this.E=0|kt[4],this.F=0|kt[5],this.G=0|kt[6],this.H=0|kt[7]}get(){const{A:t,B:e,C:n,D:r,E:i,F:o,G:s,H:a}=this;return[t,e,n,r,i,o,s,a]}set(t,e,n,r,i,o,s,a){this.A=0|t,this.B=0|e,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(t,e){for(let l=0;l<16;l++,e+=4)$t[l]=t.getUint32(e,!1);for(let l=16;l<64;l++){const t=$t[l-15],e=$t[l-2],n=at(t,7)^at(t,18)^t>>>3,r=at(e,17)^at(e,19)^e>>>10;$t[l]=r+$t[l-7]+n+$t[l-16]|0}let{A:n,B:r,C:i,D:o,E:s,F:a,G:c,H:u}=this;for(let l=0;l<64;l++){const t=u+(at(s,6)^at(s,11)^at(s,25))+xt(s,a,c)+Ht[l]+$t[l]|0,e=(at(n,2)^at(n,13)^at(n,22))+_t(n,r,i)|0;u=c,c=a,a=s,s=o+t|0,o=i,i=r,r=n,n=t+e|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,i,o,s,a,c,u)}roundClean(){ot($t)}destroy(){this.set(0,0,0,0,0,0,0,0),ot(this.buffer)}}const Zt=(()=>function(t,e=!1){const n=t.length;let r=new Uint32Array(n),i=new Uint32Array(n);for(let o=0;o<n;o++){const{h:n,l:s}=Tt(t[o],e);[r[o],i[o]]=[n,s]}return[r,i]}(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))))(),Gt=(()=>Zt[0])(),Yt=(()=>Zt[1])(),Jt=new Uint32Array(80),Xt=new Uint32Array(80);class Qt extends Bt{constructor(t=64){super(128,t,16,!1),this.Ah=0|Mt[0],this.Al=0|Mt[1],this.Bh=0|Mt[2],this.Bl=0|Mt[3],this.Ch=0|Mt[4],this.Cl=0|Mt[5],this.Dh=0|Mt[6],this.Dl=0|Mt[7],this.Eh=0|Mt[8],this.El=0|Mt[9],this.Fh=0|Mt[10],this.Fl=0|Mt[11],this.Gh=0|Mt[12],this.Gl=0|Mt[13],this.Hh=0|Mt[14],this.Hl=0|Mt[15]}get(){const{Ah:t,Al:e,Bh:n,Bl:r,Ch:i,Cl:o,Dh:s,Dl:a,Eh:c,El:u,Fh:l,Fl:h,Gh:f,Gl:d,Hh:p,Hl:g}=this;return[t,e,n,r,i,o,s,a,c,u,l,h,f,d,p,g]}set(t,e,n,r,i,o,s,a,c,u,l,h,f,d,p,g){this.Ah=0|t,this.Al=0|e,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|o,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|h,this.Gh=0|f,this.Gl=0|d,this.Hh=0|p,this.Hl=0|g}process(t,e){for(let w=0;w<16;w++,e+=4)Jt[w]=t.getUint32(e),Xt[w]=t.getUint32(e+=4);for(let w=16;w<80;w++){const t=0|Jt[w-15],e=0|Xt[w-15],n=Ot(t,e,1)^Ot(t,e,8)^Rt(t,0,7),r=Ut(t,e,1)^Ut(t,e,8)^Lt(t,e,7),i=0|Jt[w-2],o=0|Xt[w-2],s=Ot(i,o,19)^Nt(i,o,61)^Rt(i,0,6),a=Ut(i,o,19)^Pt(i,o,61)^Lt(i,o,6),c=Ft(r,a,Xt[w-7],Xt[w-16]),u=qt(c,n,s,Jt[w-7],Jt[w-16]);Jt[w]=0|u,Xt[w]=0|c}let{Ah:n,Al:r,Bh:i,Bl:o,Ch:s,Cl:a,Dh:c,Dl:u,Eh:l,El:h,Fh:f,Fl:d,Gh:p,Gl:g,Hh:m,Hl:y}=this;for(let w=0;w<80;w++){const t=Ot(l,h,14)^Ot(l,h,18)^Nt(l,h,41),e=Ut(l,h,14)^Ut(l,h,18)^Pt(l,h,41),b=l&f^~l&p,v=Kt(y,e,h&d^~h&g,Yt[w],Xt[w]),E=Wt(v,m,t,b,Gt[w],Jt[w]),S=0|v,A=Ot(n,r,28)^Nt(n,r,34)^Nt(n,r,39),x=Ut(n,r,28)^Pt(n,r,34)^Pt(n,r,39),_=n&i^n&s^i&s,B=r&o^r&a^o&a;m=0|p,y=0|g,p=0|f,g=0|d,f=0|l,d=0|h,({h:l,l:h}=zt(0|c,0|u,0|E,0|S)),c=0|s,u=0|a,s=0|i,a=0|o,i=0|n,o=0|r;const k=jt(S,x,B);n=Dt(k,E,A,_),r=0|k}({h:n,l:r}=zt(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:o}=zt(0|this.Bh,0|this.Bl,0|i,0|o)),({h:s,l:a}=zt(0|this.Ch,0|this.Cl,0|s,0|a)),({h:c,l:u}=zt(0|this.Dh,0|this.Dl,0|c,0|u)),({h:l,l:h}=zt(0|this.Eh,0|this.El,0|l,0|h)),({h:f,l:d}=zt(0|this.Fh,0|this.Fl,0|f,0|d)),({h:p,l:g}=zt(0|this.Gh,0|this.Gl,0|p,0|g)),({h:m,l:y}=zt(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(n,r,i,o,s,a,c,u,l,h,f,d,p,g,m,y)}roundClean(){ot(Jt,Xt)}destroy(){ot(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const te=St(()=>new Vt),ee=St(()=>new Qt),ne=BigInt(0),re=BigInt(1);function ie(t,e=""){if("boolean"!=typeof t){throw new Error((e&&`"${e}"`)+"expected boolean, got type="+typeof t)}return t}function oe(t,e,n=""){const r=tt(t),i=t?.length,o=void 0!==e;if(!r||o&&i!==e){throw new Error((n&&`"${n}" `)+"expected Uint8Array"+(o?` of length ${e}`:"")+", got "+(r?`length=${i}`:"type="+typeof t))}return t}function se(t){const e=t.toString(16);return 1&e.length?"0"+e:e}function ae(t){if("string"!=typeof t)throw new Error("hex string expected, got "+typeof t);return""===t?ne:BigInt("0x"+t)}function ce(t){return ae(lt(t))}function ue(t){return nt(t),ae(lt(Uint8Array.from(t).reverse()))}function le(t,e){return wt(t.toString(16).padStart(2*e,"0"))}function he(t,e){return le(t,e).reverse()}function fe(t,e,n){let r;if("string"==typeof e)try{r=wt(e)}catch(o){throw new Error(t+" must be hex string or Uint8Array, cause: "+o)}else{if(!tt(e))throw new Error(t+" must be hex string or Uint8Array");r=Uint8Array.from(e)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(t+" of length "+n+" expected, got "+i);return r}function de(t){return Uint8Array.from(t)}const pe=t=>"bigint"==typeof t&&ne<=t;function ge(t,e,n,r){if(!function(t,e,n){return pe(t)&&pe(e)&&pe(n)&&e<=t&&t<n}(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function me(t){let e;for(e=0;t>ne;t>>=re,e+=1);return e}const ye=t=>(re<<BigInt(t))-re;function we(t,e,n={}){if(!t||"object"!=typeof t)throw new Error("expected valid options object");function r(e,n,r){const i=t[e];if(r&&void 0===i)return;const o=typeof i;if(o!==n||null===i)throw new Error(`param "${e}" is invalid: expected ${n}, got ${o}`)}Object.entries(e).forEach(([t,e])=>r(t,e,!1)),Object.entries(n).forEach(([t,e])=>r(t,e,!0))}function be(t){const e=new WeakMap;return(n,...r)=>{const i=e.get(n);if(void 0!==i)return i;const o=t(n,...r);return e.set(n,o),o}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ve=BigInt(0),Ee=BigInt(1),Se=BigInt(2),Ae=BigInt(3),xe=BigInt(4),_e=BigInt(5),Be=BigInt(7),ke=BigInt(8),Me=BigInt(9),Ie=BigInt(16);function Ce(t,e){const n=t%e;return n>=ve?n:e+n}function Te(t,e,n){let r=t;for(;e-- >ve;)r*=r,r%=n;return r}function Re(t,e){if(t===ve)throw new Error("invert: expected non-zero number");if(e<=ve)throw new Error("invert: expected positive modulus, got "+e);let n=Ce(t,e),r=e,i=ve,o=Ee;for(;n!==ve;){const t=r%n,e=i-o*(r/n);r=n,n=t,i=o,o=e}if(r!==Ee)throw new Error("invert: does not exist");return Ce(i,e)}function Le(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function Oe(t,e){const n=(t.ORDER+Ee)/xe,r=t.pow(e,n);return Le(t,r,e),r}function Ue(t,e){const n=(t.ORDER-_e)/ke,r=t.mul(e,Se),i=t.pow(r,n),o=t.mul(e,i),s=t.mul(t.mul(o,Se),i),a=t.mul(o,t.sub(s,t.ONE));return Le(t,a,e),a}function Ne(t){if(t<Ae)throw new Error("sqrt is not defined for small field");let e=t-Ee,n=0;for(;e%Se===ve;)e/=Se,n++;let r=Se;const i=qe(t);for(;1===De(i,r);)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===n)return Oe;let o=i.pow(r,e);const s=(e+Ee)/Se;return function(t,r){if(t.is0(r))return r;if(1!==De(t,r))throw new Error("Cannot find square root");let i=n,a=t.mul(t.ONE,o),c=t.pow(r,e),u=t.pow(r,s);for(;!t.eql(c,t.ONE);){if(t.is0(c))return t.ZERO;let e=1,n=t.sqr(c);for(;!t.eql(n,t.ONE);)if(e++,n=t.sqr(n),e===i)throw new Error("Cannot find square root");const r=Ee<<BigInt(i-e-1),o=t.pow(a,r);i=e,a=t.sqr(o),c=t.mul(c,a),u=t.mul(u,o)}return u}}function Pe(t){return t%xe===Ae?Oe:t%ke===_e?Ue:t%Ie===Me?function(t){const e=qe(t),n=Ne(t),r=n(e,e.neg(e.ONE)),i=n(e,r),o=n(e,e.neg(r)),s=(t+Be)/Ie;return(t,e)=>{let n=t.pow(e,s),a=t.mul(n,r);const c=t.mul(n,i),u=t.mul(n,o),l=t.eql(t.sqr(a),e),h=t.eql(t.sqr(c),e);n=t.cmov(n,a,l),a=t.cmov(u,c,h);const f=t.eql(t.sqr(a),e),d=t.cmov(n,a,f);return Le(t,d,e),d}}(t):Ne(t)}const ze=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function je(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),i=e.reduce((e,n,i)=>t.is0(n)?e:(r[i]=e,t.mul(e,n)),t.ONE),o=t.inv(i);return e.reduceRight((e,n,i)=>t.is0(n)?e:(r[i]=t.mul(e,r[i]),t.mul(e,n)),o),r}function De(t,e){const n=(t.ORDER-Ee)/Se,r=t.pow(e,n),i=t.eql(r,t.ONE),o=t.eql(r,t.ZERO),s=t.eql(r,t.neg(t.ONE));if(!i&&!o&&!s)throw new Error("invalid Legendre symbol result");return i?1:o?0:-1}function Fe(t,e){void 0!==e&&et(e);const n=void 0!==e?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function qe(t,e,n=!1,r={}){if(t<=ve)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,o,s,a=!1;if("object"==typeof e&&null!=e){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const t=e;t.BITS&&(i=t.BITS),t.sqrt&&(o=t.sqrt),"boolean"==typeof t.isLE&&(n=t.isLE),"boolean"==typeof t.modFromBytes&&(a=t.modFromBytes),s=t.allowedLengths}else"number"==typeof e&&(i=e),r.sqrt&&(o=r.sqrt);const{nBitLength:c,nByteLength:u}=Fe(t,i);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let l;const h=Object.freeze({ORDER:t,isLE:n,BITS:c,BYTES:u,MASK:ye(c),ZERO:ve,ONE:Ee,allowedLengths:s,create:e=>Ce(e,t),isValid:e=>{if("bigint"!=typeof e)throw new Error("invalid field element: expected bigint, got "+typeof e);return ve<=e&&e<t},is0:t=>t===ve,isValidNot0:t=>!h.is0(t)&&h.isValid(t),isOdd:t=>(t&Ee)===Ee,neg:e=>Ce(-e,t),eql:(t,e)=>t===e,sqr:e=>Ce(e*e,t),add:(e,n)=>Ce(e+n,t),sub:(e,n)=>Ce(e-n,t),mul:(e,n)=>Ce(e*n,t),pow:(t,e)=>function(t,e,n){if(n<ve)throw new Error("invalid exponent, negatives unsupported");if(n===ve)return t.ONE;if(n===Ee)return e;let r=t.ONE,i=e;for(;n>ve;)n&Ee&&(r=t.mul(r,i)),i=t.sqr(i),n>>=Ee;return r}(h,t,e),div:(e,n)=>Ce(e*Re(n,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>Re(e,t),sqrt:o||(e=>(l||(l=Pe(t)),l(h,e))),toBytes:t=>n?he(t,u):le(t,u),fromBytes:(e,r=!0)=>{if(s){if(!s.includes(e.length)||e.length>u)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);const t=new Uint8Array(u);t.set(e,n?0:t.length-e.length),e=t}if(e.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+e.length);let i=n?ue(e):ce(e);if(a&&(i=Ce(i,t)),!r&&!h.isValid(i))throw new Error("invalid field element: outside of range 0..ORDER");return i},invertBatch:t=>je(h,t),cmov:(t,e,n)=>n?e:t});return Object.freeze(h)}function Ke(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function We(t){const e=Ke(t);return e+Math.ceil(e/2)}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const He=BigInt(0),$e=BigInt(1);function Ve(t,e){const n=e.negate();return t?n:e}function Ze(t,e){const n=je(t.Fp,e.map(t=>t.Z));return e.map((e,r)=>t.fromAffine(e.toAffine(n[r])))}function Ge(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Ye(t,e){Ge(t,e);const n=2**t;return{windows:Math.ceil(e/t)+1,windowSize:2**(t-1),mask:ye(t),maxNumber:n,shiftBy:BigInt(t)}}function Je(t,e,n){const{windowSize:r,mask:i,maxNumber:o,shiftBy:s}=n;let a=Number(t&i),c=t>>s;a>r&&(a-=o,c+=$e);const u=e*r;return{nextN:c,offset:u+Math.abs(a)-1,isZero:0===a,isNeg:a<0,isNegF:e%2!=0,offsetF:u}}const Xe=new WeakMap,Qe=new WeakMap;function tn(t){return Qe.get(t)||1}function en(t){if(t!==He)throw new Error("invalid wNAF")}class nn{constructor(t,e){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=e}_unsafeLadder(t,e,n=this.ZERO){let r=t;for(;e>He;)e&$e&&(n=n.add(r)),r=r.double(),e>>=$e;return n}precomputeWindow(t,e){const{windows:n,windowSize:r}=Ye(e,this.bits),i=[];let o=t,s=o;for(let a=0;a<n;a++){s=o,i.push(s);for(let t=1;t<r;t++)s=s.add(o),i.push(s);o=s.double()}return i}wNAF(t,e,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let r=this.ZERO,i=this.BASE;const o=Ye(t,this.bits);for(let s=0;s<o.windows;s++){const{nextN:t,offset:a,isZero:c,isNeg:u,isNegF:l,offsetF:h}=Je(n,s,o);n=t,c?i=i.add(Ve(l,e[h])):r=r.add(Ve(u,e[a]))}return en(n),{p:r,f:i}}wNAFUnsafe(t,e,n,r=this.ZERO){const i=Ye(t,this.bits);for(let o=0;o<i.windows&&n!==He;o++){const{nextN:t,offset:s,isZero:a,isNeg:c}=Je(n,o,i);if(n=t,!a){const t=e[s];r=r.add(c?t.negate():t)}}return en(n),r}getPrecomputes(t,e,n){let r=Xe.get(e);return r||(r=this.precomputeWindow(e,t),1!==t&&("function"==typeof n&&(r=n(r)),Xe.set(e,r))),r}cached(t,e,n){const r=tn(t);return this.wNAF(r,this.getPrecomputes(r,t,n),e)}unsafe(t,e,n,r){const i=tn(t);return 1===i?this._unsafeLadder(t,e,r):this.wNAFUnsafe(i,this.getPrecomputes(i,t,n),e,r)}createCache(t,e){Ge(e,this.bits),Qe.set(t,e),Xe.delete(t)}hasCache(t){return 1!==tn(t)}}function rn(t,e,n,r){!function(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}(n,t),function(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}(r,e);const i=n.length,o=r.length;if(i!==o)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,a=me(BigInt(i));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=ye(c),l=new Array(Number(u)+1).fill(s);let h=s;for(let f=Math.floor((e.BITS-1)/c)*c;f>=0;f-=c){l.fill(s);for(let e=0;e<o;e++){const t=r[e],i=Number(t>>BigInt(f)&u);l[i]=l[i].add(n[e])}let t=s;for(let e=l.length-1,n=s;e>0;e--)n=n.add(l[e]),t=t.add(n);if(h=h.add(t),0!==f)for(let e=0;e<c;e++)h=h.double()}return h}function on(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return function(t){we(t,ze.reduce((t,e)=>(t[e]="function",t),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"}))}(e),e}return qe(t,{isLE:n})}function sn(t,e,n={},r){if(void 0===r&&(r="edwards"===t),!e||"object"!=typeof e)throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const t=e[a];if(!("bigint"==typeof t&&t>He))throw new Error(`CURVE.${a} must be positive bigint`)}const i=on(e.p,n.Fp,r),o=on(e.n,n.Fn,r),s=["Gx","Gy","a","weierstrass"===t?"b":"d"];for(const a of s)if(!i.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{CURVE:e=Object.freeze(Object.assign({},e)),Fp:i,Fn:o}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const an=BigInt(0),cn=BigInt(1),un=BigInt(2),ln=BigInt(8);function hn(t,e,n={}){if("function"!=typeof e)throw new Error('"hash" function param is required');we(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=n,{BASE:i,Fp:o,Fn:s}=t,a=n.randomBytes||At,c=n.adjustScalarBytes||(t=>t),u=n.domain||((t,e,n)=>{if(ie(n,"phflag"),e.length||n)throw new Error("Contexts/pre-hash are not supported");return t});function l(t){return s.create(ue(t))}function h(t){const{head:n,prefix:r,scalar:o}=function(t){const n=m.secretKey;t=fe("private key",t,n);const r=fe("hashed private key",e(t),2*n),i=c(r.slice(0,n));return{head:i,prefix:r.slice(n,2*n),scalar:l(i)}}(t),s=i.multiply(o),a=s.toBytes();return{head:n,prefix:r,scalar:o,point:s,pointBytes:a}}function f(t){return h(t).pointBytes}function d(t=Uint8Array.of(),...n){const i=vt(...n);return l(e(u(i,fe("context",t),!!r)))}const p={zip215:!0};const g=o.BYTES,m={secretKey:g,publicKey:g,signature:2*g,seed:g};function y(t=a(m.seed)){return oe(t,m.seed,"seed")}const w={getExtendedPublicKey:h,randomSecretKey:y,isValidSecretKey:function(t){return tt(t)&&t.length===s.BYTES},isValidPublicKey:function(e,n){try{return!!t.fromBytes(e,n)}catch(r){return!1}},toMontgomery(e){const{y:n}=t.fromBytes(e),r=m.publicKey,i=32===r;if(!i&&57!==r)throw new Error("only defined for 25519 and 448");const s=i?o.div(cn+n,cn-n):o.div(n-cn,n+cn);return o.toBytes(s)},toMontgomerySecret(t){const n=m.secretKey;oe(t,n);const r=e(t.subarray(0,n));return c(r).subarray(0,n)},randomPrivateKey:y,precompute:(e=8,n=t.BASE)=>n.precompute(e,!1)};return Object.freeze({keygen:function(t){const e=w.randomSecretKey(t);return{secretKey:e,publicKey:f(e)}},getPublicKey:f,sign:function(t,e,n={}){t=fe("message",t),r&&(t=r(t));const{prefix:o,scalar:a,pointBytes:c}=h(e),u=d(n.context,o,t),l=i.multiply(u).toBytes(),f=d(n.context,l,c,t),p=s.create(u+f*a);if(!s.isValid(p))throw new Error("sign failed: invalid s");return oe(vt(l,s.toBytes(p)),m.signature,"result")},verify:function(e,n,o,s=p){const{context:a,zip215:c}=s,u=m.signature;e=fe("signature",e,u),n=fe("message",n),o=fe("publicKey",o,m.publicKey),void 0!==c&&ie(c,"zip215"),r&&(n=r(n));const l=u/2,h=e.subarray(0,l),f=ue(e.subarray(l,u));let g,y,w;try{g=t.fromBytes(o,c),y=t.fromBytes(h,c),w=i.multiplyUnsafe(f)}catch(v){return!1}if(!c&&g.isSmallOrder())return!1;const b=d(a,y.toBytes(),g.toBytes(),n);return y.add(g.multiplyUnsafe(b)).subtract(w).clearCofactor().is0()},utils:w,Point:t,lengths:m})}function fn(t){const{CURVE:e,curveOpts:n,hash:r,eddsaOpts:i}=function(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n={Fp:t.Fp,Fn:qe(e.n,t.nBitLength,!0),uvRatio:t.uvRatio},r={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:n,hash:t.hash,eddsaOpts:r}}(t),o=function(t,e={}){const n=sn("edwards",t,e,e.FpFnLE),{Fp:r,Fn:i}=n;let o=n.CURVE;const{h:s}=o;we(e,{},{uvRatio:"function"});const a=un<<BigInt(8*i.BYTES)-cn,c=t=>r.create(t),u=e.uvRatio||((t,e)=>{try{return{isValid:!0,value:r.sqrt(r.div(t,e))}}catch(n){return{isValid:!1,value:an}}});if(!function(t,e,n,r){const i=t.sqr(n),o=t.sqr(r),s=t.add(t.mul(e.a,i),o),a=t.add(t.ONE,t.mul(e.d,t.mul(i,o)));return t.eql(s,a)}(r,o,o.Gx,o.Gy))throw new Error("bad curve params: generator point");function l(t,e,n=!1){return ge("coordinate "+t,e,n?cn:an,a),e}function h(t){if(!(t instanceof p))throw new Error("ExtendedPoint expected")}const f=be((t,e)=>{const{X:n,Y:i,Z:o}=t,s=t.is0();null==e&&(e=s?ln:r.inv(o));const a=c(n*e),u=c(i*e),l=r.mul(o,e);if(s)return{x:an,y:cn};if(l!==cn)throw new Error("invZ was invalid");return{x:a,y:u}}),d=be(t=>{const{a:e,d:n}=o;if(t.is0())throw new Error("bad point: ZERO");const{X:r,Y:i,Z:s,T:a}=t,u=c(r*r),l=c(i*i),h=c(s*s),f=c(h*h),d=c(u*e);if(c(h*c(d+l))!==c(f+c(n*c(u*l))))throw new Error("bad point: equation left != right (1)");if(c(r*i)!==c(s*a))throw new Error("bad point: equation left != right (2)");return!0});class p{constructor(t,e,n,r){this.X=l("x",t),this.Y=l("y",e),this.Z=l("z",n,!0),this.T=l("t",r),Object.freeze(this)}static CURVE(){return o}static fromAffine(t){if(t instanceof p)throw new Error("extended point not allowed");const{x:e,y:n}=t||{};return l("x",e),l("y",n),new p(e,n,cn,c(e*n))}static fromBytes(t,e=!1){const n=r.BYTES,{a:i,d:s}=o;t=de(oe(t,n,"point")),ie(e,"zip215");const l=de(t),h=t[n-1];l[n-1]=-129&h;const f=ue(l),d=e?a:r.ORDER;ge("point.y",f,an,d);const g=c(f*f),m=c(g-cn),y=c(s*g-i);let{isValid:w,value:b}=u(m,y);if(!w)throw new Error("bad point: invalid y coordinate");const v=(b&cn)===cn,E=!!(128&h);if(!e&&b===an&&E)throw new Error("bad point: x=0 and x_0=1");return E!==v&&(b=c(-b)),p.fromAffine({x:b,y:f})}static fromHex(t,e=!1){return p.fromBytes(fe("point",t),e)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(t=8,e=!0){return g.createCache(this,t),e||this.multiply(un),this}assertValidity(){d(this)}equals(t){h(t);const{X:e,Y:n,Z:r}=this,{X:i,Y:o,Z:s}=t,a=c(e*s),u=c(i*r),l=c(n*s),f=c(o*r);return a===u&&l===f}is0(){return this.equals(p.ZERO)}negate(){return new p(c(-this.X),this.Y,this.Z,c(-this.T))}double(){const{a:t}=o,{X:e,Y:n,Z:r}=this,i=c(e*e),s=c(n*n),a=c(un*c(r*r)),u=c(t*i),l=e+n,h=c(c(l*l)-i-s),f=u+s,d=f-a,g=u-s,m=c(h*d),y=c(f*g),w=c(h*g),b=c(d*f);return new p(m,y,b,w)}add(t){h(t);const{a:e,d:n}=o,{X:r,Y:i,Z:s,T:a}=this,{X:u,Y:l,Z:f,T:d}=t,g=c(r*u),m=c(i*l),y=c(a*n*d),w=c(s*f),b=c((r+i)*(u+l)-g-m),v=w-y,E=w+y,S=c(m-e*g),A=c(b*v),x=c(E*S),_=c(b*S),B=c(v*E);return new p(A,x,B,_)}subtract(t){return this.add(t.negate())}multiply(t){if(!i.isValidNot0(t))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:e,f:n}=g.cached(this,t,t=>Ze(p,t));return Ze(p,[e,n])[0]}multiplyUnsafe(t,e=p.ZERO){if(!i.isValid(t))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return t===an?p.ZERO:this.is0()||t===cn?this:g.unsafe(this,t,t=>Ze(p,t),e)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return g.unsafe(this,o.n).is0()}toAffine(t){return f(this,t)}clearCofactor(){return s===cn?this:this.multiplyUnsafe(s)}toBytes(){const{x:t,y:e}=this.toAffine(),n=r.toBytes(e);return n[n.length-1]|=t&cn?128:0,n}toHex(){return lt(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(t){return Ze(p,t)}static msm(t,e){return rn(p,i,t,e)}_setWindowSize(t){this.precompute(t)}toRawBytes(){return this.toBytes()}}p.BASE=new p(o.Gx,o.Gy,cn,c(o.Gx*o.Gy)),p.ZERO=new p(an,cn,cn,an),p.Fp=r,p.Fn=i;const g=new nn(p,i.BITS);return p.BASE.precompute(8),p}(e,n);return function(t,e){const n=e.Point;return Object.assign({},e,{ExtendedPoint:n,CURVE:t,nBitLength:n.Fn.BITS,nByteLength:n.Fn.BYTES})}(t,hn(o,r,i))}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dn=BigInt(1),pn=BigInt(2);BigInt(3);const gn=BigInt(5),mn=BigInt(8),yn=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),wn=(()=>({p:yn,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:mn,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")}))();function bn(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const vn=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function En(t,e){const n=yn,r=Ce(e*e*e,n),i=function(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),o=yn,s=t*t%o*t%o,a=Te(s,pn,o)*s%o,c=Te(a,dn,o)*t%o,u=Te(c,gn,o)*c%o,l=Te(u,e,o)*u%o,h=Te(l,n,o)*l%o,f=Te(h,r,o)*h%o,d=Te(f,i,o)*f%o,p=Te(d,i,o)*f%o,g=Te(p,e,o)*u%o;return{pow_p_5_8:Te(g,pn,o)*t%o,b2:s}}(t*Ce(r*r*e,n)).pow_p_5_8;let o=Ce(t*r*i,n);const s=Ce(e*o*o,n),a=o,c=Ce(o*vn,n),u=s===t,l=s===Ce(-t,n),h=s===Ce(-t*vn,n);return u&&(o=a),(l||h)&&(o=c),(Ce(o,n)&Ee)===Ee&&(o=Ce(-o,n)),{isValid:u||l,value:o}}const Sn=(()=>qe(wn.p,{isLE:!0}))(),An=(()=>({...wn,Fp:Sn,hash:ee,adjustScalarBytes:bn,uvRatio:En}))(),xn=(()=>fn(An))();var _n={exports:{}};const Bn=r(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));!function(t,e){function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function r(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function i(t,e,n){if(i.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var o;"object"==typeof t?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:Bn.Buffer}catch(B){}function s(t,e){var r=t.charCodeAt(e);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+t)}function a(t,e,n){var r=s(t,n);return n-1>=e&&(r|=s(t,n-1)<<4),r}function c(t,e,r,i){for(var o=0,s=0,a=Math.min(t.length,r),c=e;c<a;c++){var u=t.charCodeAt(c)-48;o*=i,s=u>=49?u-49+10:u>=17?u-17+10:u,n(u>=0&&s<i,"Invalid character"),o+=s}return o}function u(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(i.isBN=function(t){return t instanceof i||null!==t&&"object"==typeof t&&t.constructor.wordSize===i.wordSize&&Array.isArray(t.words)},i.max=function(t,e){return t.cmp(e)>0?t:e},i.min=function(t,e){return t.cmp(e)<0?t:e},i.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},i.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},i.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this._strip()},i.prototype._parseHex=function(t,e,n){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,s=0;if("be"===n)for(r=t.length-1;r>=e;r-=2)i=a(t,e,r)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)i=a(t,e,r)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this._strip()},i.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var o=t.length-n,s=o%r,a=Math.min(o,o-s)+n,u=0,l=n;l<a;l+=r)u=c(t,l,l+r,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var h=1;for(u=c(t,l,t.length,e),l=0;l<s;l++)h*=e;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},i.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},i.prototype._move=function(t){u(t,this)},i.prototype.clone=function(){var t=new i(null);return this.copy(t),t},i.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(B){i.prototype.inspect=l}else i.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,c=s/67108864|0;n.words[0]=a;for(var u=1;u<r;u++){for(var l=c>>>26,h=67108863&c,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;l+=(s=(i=0|t.words[p])*(o=0|e.words[d])+h)/67108864|0,h=67108863&s}n.words[u]=0|h,c=0|l}return 0!==c?n.words[u]=0|c:n.length--,n._strip()}i.prototype.toString=function(t,e){var r;if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<i|o)).toString(16);o=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,s--),r=0!==o||s!==this.length-1?h[6-c.length]+c+r:c+r}for(0!==o&&(r=o.toString(16)+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var u=f[t],l=d[t];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modrn(l).toString(t);r=(p=p.idivn(l)).isZero()?g+r:h[u-g.length]+g+r}for(this.isZero()&&(r="0"+r);r.length%e!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(t,e){return this.toArrayLike(o,t,e)}),i.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},i.prototype.toArrayLike=function(t,e,r){this._strip();var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0");var s=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,o);return this["_toArrayLike"+("le"===e?"LE":"BE")](s,i),s},i.prototype._toArrayLikeLE=function(t,e){for(var n=0,r=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|r;t[n++]=255&s,n<t.length&&(t[n++]=s>>8&255),n<t.length&&(t[n++]=s>>16&255),6===o?(n<t.length&&(t[n++]=s>>24&255),r=0,o=0):(r=s>>>24,o+=2)}if(n<t.length)for(t[n++]=r;n<t.length;)t[n++]=0},i.prototype._toArrayLikeBE=function(t,e){for(var n=t.length-1,r=0,i=0,o=0;i<this.length;i++){var s=this.words[i]<<o|r;t[n--]=255&s,n>=0&&(t[n--]=s>>8&255),n>=0&&(t[n--]=s>>16&255),6===o?(n>=0&&(t[n--]=s>>24&255),r=0,o=0):(r=s>>>24,o+=2)}if(n>=0)for(t[n--]=r;n>=0;)t[n--]=0},Math.clz32?i.prototype._countBits=function(t){return 32-Math.clz32(t)}:i.prototype._countBits=function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},i.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 8191&e||(n+=13,e>>>=13),127&e||(n+=7,e>>>=7),15&e||(n+=4,e>>>=4),3&e||(n+=2,e>>>=2),1&e||n++,n},i.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},i.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},i.prototype.ior=function(t){return n(0===(this.negative|t.negative)),this.iuor(t)},i.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},i.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},i.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this._strip()},i.prototype.iand=function(t){return n(0===(this.negative|t.negative)),this.iuand(t)},i.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},i.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},i.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this._strip()},i.prototype.ixor=function(t){return n(0===(this.negative|t.negative)),this.iuxor(t)},i.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},i.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},i.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},i.prototype.notn=function(t){return this.clone().inotn(t)},i.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},i.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,o=0;o<r.length;o++)e=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<n.length;o++)e=(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},i.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},i.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=t):(n=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(e=(0|n.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<n.length;s++)o=(e=(0|n.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,e,n){var r,i,o,s=t.words,a=e.words,c=n.words,u=0,l=0|s[0],h=8191&l,f=l>>>13,d=0|s[1],p=8191&d,g=d>>>13,m=0|s[2],y=8191&m,w=m>>>13,b=0|s[3],v=8191&b,E=b>>>13,S=0|s[4],A=8191&S,x=S>>>13,_=0|s[5],B=8191&_,k=_>>>13,M=0|s[6],I=8191&M,C=M>>>13,T=0|s[7],R=8191&T,L=T>>>13,O=0|s[8],U=8191&O,N=O>>>13,P=0|s[9],z=8191&P,j=P>>>13,D=0|a[0],F=8191&D,q=D>>>13,K=0|a[1],W=8191&K,H=K>>>13,$=0|a[2],V=8191&$,Z=$>>>13,G=0|a[3],Y=8191&G,J=G>>>13,X=0|a[4],Q=8191&X,tt=X>>>13,et=0|a[5],nt=8191&et,rt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ct=8191&at,ut=at>>>13,lt=0|a[8],ht=8191&lt,ft=lt>>>13,dt=0|a[9],pt=8191&dt,gt=dt>>>13;n.negative=t.negative^e.negative,n.length=19;var mt=(u+(r=Math.imul(h,F))|0)+((8191&(i=(i=Math.imul(h,q))+Math.imul(f,F)|0))<<13)|0;u=((o=Math.imul(f,q))+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(p,F),i=(i=Math.imul(p,q))+Math.imul(g,F)|0,o=Math.imul(g,q);var yt=(u+(r=r+Math.imul(h,W)|0)|0)+((8191&(i=(i=i+Math.imul(h,H)|0)+Math.imul(f,W)|0))<<13)|0;u=((o=o+Math.imul(f,H)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(y,F),i=(i=Math.imul(y,q))+Math.imul(w,F)|0,o=Math.imul(w,q),r=r+Math.imul(p,W)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(g,W)|0,o=o+Math.imul(g,H)|0;var wt=(u+(r=r+Math.imul(h,V)|0)|0)+((8191&(i=(i=i+Math.imul(h,Z)|0)+Math.imul(f,V)|0))<<13)|0;u=((o=o+Math.imul(f,Z)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(v,F),i=(i=Math.imul(v,q))+Math.imul(E,F)|0,o=Math.imul(E,q),r=r+Math.imul(y,W)|0,i=(i=i+Math.imul(y,H)|0)+Math.imul(w,W)|0,o=o+Math.imul(w,H)|0,r=r+Math.imul(p,V)|0,i=(i=i+Math.imul(p,Z)|0)+Math.imul(g,V)|0,o=o+Math.imul(g,Z)|0;var bt=(u+(r=r+Math.imul(h,Y)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(f,Y)|0))<<13)|0;u=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(A,F),i=(i=Math.imul(A,q))+Math.imul(x,F)|0,o=Math.imul(x,q),r=r+Math.imul(v,W)|0,i=(i=i+Math.imul(v,H)|0)+Math.imul(E,W)|0,o=o+Math.imul(E,H)|0,r=r+Math.imul(y,V)|0,i=(i=i+Math.imul(y,Z)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,Z)|0,r=r+Math.imul(p,Y)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(g,Y)|0,o=o+Math.imul(g,J)|0;var vt=(u+(r=r+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,tt)|0)+Math.imul(f,Q)|0))<<13)|0;u=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(B,F),i=(i=Math.imul(B,q))+Math.imul(k,F)|0,o=Math.imul(k,q),r=r+Math.imul(A,W)|0,i=(i=i+Math.imul(A,H)|0)+Math.imul(x,W)|0,o=o+Math.imul(x,H)|0,r=r+Math.imul(v,V)|0,i=(i=i+Math.imul(v,Z)|0)+Math.imul(E,V)|0,o=o+Math.imul(E,Z)|0,r=r+Math.imul(y,Y)|0,i=(i=i+Math.imul(y,J)|0)+Math.imul(w,Y)|0,o=o+Math.imul(w,J)|0,r=r+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,tt)|0;var Et=(u+(r=r+Math.imul(h,nt)|0)|0)+((8191&(i=(i=i+Math.imul(h,rt)|0)+Math.imul(f,nt)|0))<<13)|0;u=((o=o+Math.imul(f,rt)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(I,F),i=(i=Math.imul(I,q))+Math.imul(C,F)|0,o=Math.imul(C,q),r=r+Math.imul(B,W)|0,i=(i=i+Math.imul(B,H)|0)+Math.imul(k,W)|0,o=o+Math.imul(k,H)|0,r=r+Math.imul(A,V)|0,i=(i=i+Math.imul(A,Z)|0)+Math.imul(x,V)|0,o=o+Math.imul(x,Z)|0,r=r+Math.imul(v,Y)|0,i=(i=i+Math.imul(v,J)|0)+Math.imul(E,Y)|0,o=o+Math.imul(E,J)|0,r=r+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,tt)|0)+Math.imul(w,Q)|0,o=o+Math.imul(w,tt)|0,r=r+Math.imul(p,nt)|0,i=(i=i+Math.imul(p,rt)|0)+Math.imul(g,nt)|0,o=o+Math.imul(g,rt)|0;var St=(u+(r=r+Math.imul(h,ot)|0)|0)+((8191&(i=(i=i+Math.imul(h,st)|0)+Math.imul(f,ot)|0))<<13)|0;u=((o=o+Math.imul(f,st)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(R,F),i=(i=Math.imul(R,q))+Math.imul(L,F)|0,o=Math.imul(L,q),r=r+Math.imul(I,W)|0,i=(i=i+Math.imul(I,H)|0)+Math.imul(C,W)|0,o=o+Math.imul(C,H)|0,r=r+Math.imul(B,V)|0,i=(i=i+Math.imul(B,Z)|0)+Math.imul(k,V)|0,o=o+Math.imul(k,Z)|0,r=r+Math.imul(A,Y)|0,i=(i=i+Math.imul(A,J)|0)+Math.imul(x,Y)|0,o=o+Math.imul(x,J)|0,r=r+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,tt)|0)+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,r=r+Math.imul(y,nt)|0,i=(i=i+Math.imul(y,rt)|0)+Math.imul(w,nt)|0,o=o+Math.imul(w,rt)|0,r=r+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(g,ot)|0,o=o+Math.imul(g,st)|0;var At=(u+(r=r+Math.imul(h,ct)|0)|0)+((8191&(i=(i=i+Math.imul(h,ut)|0)+Math.imul(f,ct)|0))<<13)|0;u=((o=o+Math.imul(f,ut)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(U,F),i=(i=Math.imul(U,q))+Math.imul(N,F)|0,o=Math.imul(N,q),r=r+Math.imul(R,W)|0,i=(i=i+Math.imul(R,H)|0)+Math.imul(L,W)|0,o=o+Math.imul(L,H)|0,r=r+Math.imul(I,V)|0,i=(i=i+Math.imul(I,Z)|0)+Math.imul(C,V)|0,o=o+Math.imul(C,Z)|0,r=r+Math.imul(B,Y)|0,i=(i=i+Math.imul(B,J)|0)+Math.imul(k,Y)|0,o=o+Math.imul(k,J)|0,r=r+Math.imul(A,Q)|0,i=(i=i+Math.imul(A,tt)|0)+Math.imul(x,Q)|0,o=o+Math.imul(x,tt)|0,r=r+Math.imul(v,nt)|0,i=(i=i+Math.imul(v,rt)|0)+Math.imul(E,nt)|0,o=o+Math.imul(E,rt)|0,r=r+Math.imul(y,ot)|0,i=(i=i+Math.imul(y,st)|0)+Math.imul(w,ot)|0,o=o+Math.imul(w,st)|0,r=r+Math.imul(p,ct)|0,i=(i=i+Math.imul(p,ut)|0)+Math.imul(g,ct)|0,o=o+Math.imul(g,ut)|0;var xt=(u+(r=r+Math.imul(h,ht)|0)|0)+((8191&(i=(i=i+Math.imul(h,ft)|0)+Math.imul(f,ht)|0))<<13)|0;u=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(z,F),i=(i=Math.imul(z,q))+Math.imul(j,F)|0,o=Math.imul(j,q),r=r+Math.imul(U,W)|0,i=(i=i+Math.imul(U,H)|0)+Math.imul(N,W)|0,o=o+Math.imul(N,H)|0,r=r+Math.imul(R,V)|0,i=(i=i+Math.imul(R,Z)|0)+Math.imul(L,V)|0,o=o+Math.imul(L,Z)|0,r=r+Math.imul(I,Y)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(C,Y)|0,o=o+Math.imul(C,J)|0,r=r+Math.imul(B,Q)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(k,Q)|0,o=o+Math.imul(k,tt)|0,r=r+Math.imul(A,nt)|0,i=(i=i+Math.imul(A,rt)|0)+Math.imul(x,nt)|0,o=o+Math.imul(x,rt)|0,r=r+Math.imul(v,ot)|0,i=(i=i+Math.imul(v,st)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,st)|0,r=r+Math.imul(y,ct)|0,i=(i=i+Math.imul(y,ut)|0)+Math.imul(w,ct)|0,o=o+Math.imul(w,ut)|0,r=r+Math.imul(p,ht)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(g,ht)|0,o=o+Math.imul(g,ft)|0;var _t=(u+(r=r+Math.imul(h,pt)|0)|0)+((8191&(i=(i=i+Math.imul(h,gt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((o=o+Math.imul(f,gt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(z,W),i=(i=Math.imul(z,H))+Math.imul(j,W)|0,o=Math.imul(j,H),r=r+Math.imul(U,V)|0,i=(i=i+Math.imul(U,Z)|0)+Math.imul(N,V)|0,o=o+Math.imul(N,Z)|0,r=r+Math.imul(R,Y)|0,i=(i=i+Math.imul(R,J)|0)+Math.imul(L,Y)|0,o=o+Math.imul(L,J)|0,r=r+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,tt)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,tt)|0,r=r+Math.imul(B,nt)|0,i=(i=i+Math.imul(B,rt)|0)+Math.imul(k,nt)|0,o=o+Math.imul(k,rt)|0,r=r+Math.imul(A,ot)|0,i=(i=i+Math.imul(A,st)|0)+Math.imul(x,ot)|0,o=o+Math.imul(x,st)|0,r=r+Math.imul(v,ct)|0,i=(i=i+Math.imul(v,ut)|0)+Math.imul(E,ct)|0,o=o+Math.imul(E,ut)|0,r=r+Math.imul(y,ht)|0,i=(i=i+Math.imul(y,ft)|0)+Math.imul(w,ht)|0,o=o+Math.imul(w,ft)|0;var Bt=(u+(r=r+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,gt)|0)+Math.imul(g,pt)|0))<<13)|0;u=((o=o+Math.imul(g,gt)|0)+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(z,V),i=(i=Math.imul(z,Z))+Math.imul(j,V)|0,o=Math.imul(j,Z),r=r+Math.imul(U,Y)|0,i=(i=i+Math.imul(U,J)|0)+Math.imul(N,Y)|0,o=o+Math.imul(N,J)|0,r=r+Math.imul(R,Q)|0,i=(i=i+Math.imul(R,tt)|0)+Math.imul(L,Q)|0,o=o+Math.imul(L,tt)|0,r=r+Math.imul(I,nt)|0,i=(i=i+Math.imul(I,rt)|0)+Math.imul(C,nt)|0,o=o+Math.imul(C,rt)|0,r=r+Math.imul(B,ot)|0,i=(i=i+Math.imul(B,st)|0)+Math.imul(k,ot)|0,o=o+Math.imul(k,st)|0,r=r+Math.imul(A,ct)|0,i=(i=i+Math.imul(A,ut)|0)+Math.imul(x,ct)|0,o=o+Math.imul(x,ut)|0,r=r+Math.imul(v,ht)|0,i=(i=i+Math.imul(v,ft)|0)+Math.imul(E,ht)|0,o=o+Math.imul(E,ft)|0;var kt=(u+(r=r+Math.imul(y,pt)|0)|0)+((8191&(i=(i=i+Math.imul(y,gt)|0)+Math.imul(w,pt)|0))<<13)|0;u=((o=o+Math.imul(w,gt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(z,Y),i=(i=Math.imul(z,J))+Math.imul(j,Y)|0,o=Math.imul(j,J),r=r+Math.imul(U,Q)|0,i=(i=i+Math.imul(U,tt)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,tt)|0,r=r+Math.imul(R,nt)|0,i=(i=i+Math.imul(R,rt)|0)+Math.imul(L,nt)|0,o=o+Math.imul(L,rt)|0,r=r+Math.imul(I,ot)|0,i=(i=i+Math.imul(I,st)|0)+Math.imul(C,ot)|0,o=o+Math.imul(C,st)|0,r=r+Math.imul(B,ct)|0,i=(i=i+Math.imul(B,ut)|0)+Math.imul(k,ct)|0,o=o+Math.imul(k,ut)|0,r=r+Math.imul(A,ht)|0,i=(i=i+Math.imul(A,ft)|0)+Math.imul(x,ht)|0,o=o+Math.imul(x,ft)|0;var Mt=(u+(r=r+Math.imul(v,pt)|0)|0)+((8191&(i=(i=i+Math.imul(v,gt)|0)+Math.imul(E,pt)|0))<<13)|0;u=((o=o+Math.imul(E,gt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(z,Q),i=(i=Math.imul(z,tt))+Math.imul(j,Q)|0,o=Math.imul(j,tt),r=r+Math.imul(U,nt)|0,i=(i=i+Math.imul(U,rt)|0)+Math.imul(N,nt)|0,o=o+Math.imul(N,rt)|0,r=r+Math.imul(R,ot)|0,i=(i=i+Math.imul(R,st)|0)+Math.imul(L,ot)|0,o=o+Math.imul(L,st)|0,r=r+Math.imul(I,ct)|0,i=(i=i+Math.imul(I,ut)|0)+Math.imul(C,ct)|0,o=o+Math.imul(C,ut)|0,r=r+Math.imul(B,ht)|0,i=(i=i+Math.imul(B,ft)|0)+Math.imul(k,ht)|0,o=o+Math.imul(k,ft)|0;var It=(u+(r=r+Math.imul(A,pt)|0)|0)+((8191&(i=(i=i+Math.imul(A,gt)|0)+Math.imul(x,pt)|0))<<13)|0;u=((o=o+Math.imul(x,gt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(z,nt),i=(i=Math.imul(z,rt))+Math.imul(j,nt)|0,o=Math.imul(j,rt),r=r+Math.imul(U,ot)|0,i=(i=i+Math.imul(U,st)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,st)|0,r=r+Math.imul(R,ct)|0,i=(i=i+Math.imul(R,ut)|0)+Math.imul(L,ct)|0,o=o+Math.imul(L,ut)|0,r=r+Math.imul(I,ht)|0,i=(i=i+Math.imul(I,ft)|0)+Math.imul(C,ht)|0,o=o+Math.imul(C,ft)|0;var Ct=(u+(r=r+Math.imul(B,pt)|0)|0)+((8191&(i=(i=i+Math.imul(B,gt)|0)+Math.imul(k,pt)|0))<<13)|0;u=((o=o+Math.imul(k,gt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(z,ot),i=(i=Math.imul(z,st))+Math.imul(j,ot)|0,o=Math.imul(j,st),r=r+Math.imul(U,ct)|0,i=(i=i+Math.imul(U,ut)|0)+Math.imul(N,ct)|0,o=o+Math.imul(N,ut)|0,r=r+Math.imul(R,ht)|0,i=(i=i+Math.imul(R,ft)|0)+Math.imul(L,ht)|0,o=o+Math.imul(L,ft)|0;var Tt=(u+(r=r+Math.imul(I,pt)|0)|0)+((8191&(i=(i=i+Math.imul(I,gt)|0)+Math.imul(C,pt)|0))<<13)|0;u=((o=o+Math.imul(C,gt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(z,ct),i=(i=Math.imul(z,ut))+Math.imul(j,ct)|0,o=Math.imul(j,ut),r=r+Math.imul(U,ht)|0,i=(i=i+Math.imul(U,ft)|0)+Math.imul(N,ht)|0,o=o+Math.imul(N,ft)|0;var Rt=(u+(r=r+Math.imul(R,pt)|0)|0)+((8191&(i=(i=i+Math.imul(R,gt)|0)+Math.imul(L,pt)|0))<<13)|0;u=((o=o+Math.imul(L,gt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(z,ht),i=(i=Math.imul(z,ft))+Math.imul(j,ht)|0,o=Math.imul(j,ft);var Lt=(u+(r=r+Math.imul(U,pt)|0)|0)+((8191&(i=(i=i+Math.imul(U,gt)|0)+Math.imul(N,pt)|0))<<13)|0;u=((o=o+Math.imul(N,gt)|0)+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863;var Ot=(u+(r=Math.imul(z,pt))|0)+((8191&(i=(i=Math.imul(z,gt))+Math.imul(j,pt)|0))<<13)|0;return u=((o=Math.imul(j,gt))+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,c[0]=mt,c[1]=yt,c[2]=wt,c[3]=bt,c[4]=vt,c[5]=Et,c[6]=St,c[7]=At,c[8]=xt,c[9]=_t,c[10]=Bt,c[11]=kt,c[12]=Mt,c[13]=It,c[14]=Ct,c[15]=Tt,c[16]=Rt,c[17]=Lt,c[18]=Ot,0!==u&&(c[19]=u,n.length++),n};function m(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var s=i;i=0;for(var a=67108863&r,c=Math.min(o,e.length-1),u=Math.max(0,o-t.length+1);u<=c;u++){var l=o-u,h=(0|t.words[l])*(0|e.words[u]),f=67108863&h;a=67108863&(f=f+a|0),i+=(s=(s=s+(h/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}n.words[o]=a,r=s,s=i}return 0!==r?n.words[o]=r:n.length--,n._strip()}function y(t,e,n){return m(t,e,n)}Math.imul||(g=p),i.prototype.mulTo=function(t,e){var n=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,e):n<63?p(this,t,e):n<1024?m(this,t,e):y(this,t,e)},i.prototype.mul=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},i.prototype.mulf=function(t){var e=new i(null);return e.words=new Array(this.length+t.length),y(this,t,e)},i.prototype.imul=function(t){return this.clone().mulTo(t,this)},i.prototype.imuln=function(t){var e=t<0;e&&(t=-t),n("number"==typeof t),n(t<67108864);for(var r=0,i=0;i<this.length;i++){var o=(0|this.words[i])*t,s=(67108863&o)+(67108863&r);r>>=26,r+=o/67108864|0,r+=s>>>26,this.words[i]=67108863&s}return 0!==r&&(this.words[i]=r,this.length++),this.length=0===t?1:this.length,e?this.ineg():this},i.prototype.muln=function(t){return this.clone().imuln(t)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,i=n%26;e[n]=t.words[r]>>>i&1}return e}(t);if(0===e.length)return new i(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var o=n.sqr();r<e.length;r++,o=o.sqr())0!==e[r]&&(n=n.mul(o));return n},i.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,c=(0|this.words[e])-a<<r;this.words[e]=c|s,s=a>>>26-r}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this._strip()},i.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},i.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,c=r;if(i-=s,i=Math.max(0,i),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=i);u--){var h=0|this.words[u];this.words[u]=l<<26-o|h>>>o,l=h&a}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},i.prototype.shln=function(t){return this.clone().ishln(t)},i.prototype.ushln=function(t){return this.clone().iushln(t)},i.prototype.shrn=function(t){return this.clone().ishrn(t)},i.prototype.ushrn=function(t){return this.clone().iushrn(t)},i.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r||!(this.words[r]&i))},i.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this._strip()},i.prototype.maskn=function(t){return this.clone().imaskn(t)},i.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},i.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},i.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},i.prototype.addn=function(t){return this.clone().iaddn(t)},i.prototype.subn=function(t){return this.clone().isubn(t)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(t,e,r){var i,o,s=t.length+r;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+a;var c=(0|t.words[i])*e;a=((o-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)a=(o=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&o;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},i.prototype._wordDiv=function(t,e){var n=(this.length,t.length),r=this.clone(),o=t,s=0|o.words[o.length-1];0!=(n=26-this._countBits(s))&&(o=o.ushln(n),r.iushln(n),s=0|o.words[o.length-1]);var a,c=r.length-o.length;if("mod"!==e){(a=new i(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var l=r.clone()._ishlnsubmul(o,1,c);0===l.negative&&(r=l,a&&(a.words[c]=1));for(var h=c-1;h>=0;h--){var f=67108864*(0|r.words[o.length+h])+(0|r.words[o.length+h-1]);for(f=Math.min(f/s|0,67108863),r._ishlnsubmul(o,f,h);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(o,1,h),r.isZero()||(r.negative^=1);a&&(a.words[h]=f)}return a&&a._strip(),r._strip(),"div"!==e&&0!==n&&r.iushrn(n),{div:a||null,mod:r}},i.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(o=a.div.neg()),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(t)),{div:o,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(o=a.div.neg()),{div:o,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new i(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new i(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new i(this.modrn(t.words[0]))}:this._wordDiv(t,e);var o,s,a},i.prototype.div=function(t){return this.divmod(t,"div",!1).div},i.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},i.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},i.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},i.prototype.modrn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=(1<<26)%t,i=0,o=this.length-1;o>=0;o--)i=(r*i+(0|this.words[o]))%t;return e?-i:i},i.prototype.modn=function(t){return this.modrn(t)},i.prototype.idivn=function(t){var e=t<0;e&&(t=-t),n(t<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*r;this.words[i]=o/t|0,r=o%t}return this._strip(),e?this.ineg():this},i.prototype.divn=function(t){return this.clone().idivn(t)},i.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o=new i(1),s=new i(0),a=new i(0),c=new i(1),u=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++u;for(var l=r.clone(),h=e.clone();!e.isZero();){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(o.isOdd()||s.isOdd())&&(o.iadd(l),s.isub(h)),o.iushrn(1),s.iushrn(1);for(var p=0,g=1;0===(r.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(l),c.isub(h)),a.iushrn(1),c.iushrn(1);e.cmp(r)>=0?(e.isub(r),o.isub(a),s.isub(c)):(r.isub(e),a.isub(o),c.isub(s))}return{a:a,b:c,gcd:r.iushln(u)}},i.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var o,s=new i(1),a=new i(0),c=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,l=1;0===(e.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(e.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var h=0,f=1;0===(r.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);e.cmp(r)>=0?(e.isub(r),s.isub(a)):(r.isub(e),a.isub(s))}return(o=0===e.cmpn(1)?s:a).cmpn(0)<0&&o.iadd(t),o},i.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var r=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var o=e;e=n,n=o}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},i.prototype.invm=function(t){return this.egcd(t).a.umod(t)},i.prototype.isEven=function(){return!(1&this.words[0])},i.prototype.isOdd=function(){return!(1&~this.words[0])},i.prototype.andln=function(t){return this.words[0]&t},i.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},i.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},i.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},i.prototype.gtn=function(t){return 1===this.cmpn(t)},i.prototype.gt=function(t){return 1===this.cmp(t)},i.prototype.gten=function(t){return this.cmpn(t)>=0},i.prototype.gte=function(t){return this.cmp(t)>=0},i.prototype.ltn=function(t){return-1===this.cmpn(t)},i.prototype.lt=function(t){return-1===this.cmp(t)},i.prototype.lten=function(t){return this.cmpn(t)<=0},i.prototype.lte=function(t){return this.cmp(t)<=0},i.prototype.eqn=function(t){return 0===this.cmpn(t)},i.prototype.eq=function(t){return 0===this.cmp(t)},i.red=function(t){return new x(t)},i.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(t){return this.red=t,this},i.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},i.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},i.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},i.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},i.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},i.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},i.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},i.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var w={k256:null,p224:null,p192:null,p25519:null};function b(t,e){this.name=t,this.p=new i(e,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(t){if("string"==typeof t){var e=i._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function _(t){x.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var t=new i(null);return t.words=new Array(Math.ceil(this.n/13)),t},b.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},b.prototype.split=function(t,e){t.iushrn(this.n,0,e)},b.prototype.imulK=function(t){return t.imul(this.k)},r(v,b),v.prototype.split=function(t,e){for(var n=4194303,r=Math.min(t.length,9),i=0;i<r;i++)e.words[i]=t.words[i];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&n,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&n)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},v.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(E,b),r(S,b),r(A,b),A.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},i._prime=function(t){if(w[t])return w[t];var e;if("k256"===t)e=new v;else if("p224"===t)e=new E;else if("p192"===t)e=new S;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new A}return w[t]=e,e},x.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},x.prototype._verify2=function(t,e){n(0===(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},x.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(u(t,t.umod(this.m)._forceRed(this)),t)},x.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},x.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},x.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},x.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},x.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},x.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},x.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},x.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},x.prototype.isqr=function(t){return this.imul(t,t.clone())},x.prototype.sqr=function(t){return this.mul(t,t)},x.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new i(1)).iushrn(2);return this.pow(t,r)}for(var o=this.m.subn(1),s=0;!o.isZero()&&0===o.andln(1);)s++,o.iushrn(1);n(!o.isZero());var a=new i(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new i(2*l*l).toRed(this);0!==this.pow(l,u).cmp(c);)l.redIAdd(c);for(var h=this.pow(l,o),f=this.pow(t,o.addn(1).iushrn(1)),d=this.pow(t,o),p=s;0!==d.cmp(a);){for(var g=d,m=0;0!==g.cmp(a);m++)g=g.redSqr();n(m<p);var y=this.pow(h,new i(1).iushln(p-m-1));f=f.redMul(y),h=y.redSqr(),d=d.redMul(h),p=m}return f},x.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},x.prototype.pow=function(t,e){if(e.isZero())return new i(1).toRed(this);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new i(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var o=n[0],s=0,a=0,c=e.bitLength()%26;for(0===c&&(c=26),r=e.length-1;r>=0;r--){for(var u=e.words[r],l=c-1;l>=0;l--){var h=u>>l&1;o!==n[0]&&(o=this.sqr(o)),0!==h||0!==s?(s<<=1,s|=h,(4===++a||0===r&&0===l)&&(o=this.mul(o,n[s]),a=0,s=0)):a=0}c=26}return o},x.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},x.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},i.mont=function(t){return new _(t)},r(_,x),_.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},_.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},_.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},_.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new i(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=n.isub(r).iushrn(this.shift),s=o;return o.cmp(this.m)>=0?s=o.isub(this.m):o.cmpn(0)<0&&(s=o.iadd(this.m)),s._forceRed(this)},_.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(_n,i);var kn=_n.exports;const Mn=n(kn);var In={exports:{}};
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */!function(t,e){var n=q,r=n.Buffer;function i(t,e){for(var n in t)e[n]=t[n]}function o(t,e,n){return r(t,e,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?t.exports=n:(i(n,e),e.Buffer=o),o.prototype=Object.create(r.prototype),i(r,o),o.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return r(t,e,n)},o.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=r(t);return void 0!==e?"string"==typeof n?i.fill(e,n):i.fill(e):i.fill(0),i},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}}(In,In.exports);var Cn=In.exports.Buffer;var Tn=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var i=t.charAt(r),o=i.charCodeAt(0);if(255!==e[o])throw new TypeError(i+" is ambiguous");e[o]=r}var s=t.length,a=t.charAt(0),c=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function l(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return Cn.alloc(0);for(var n=0,r=0,i=0;t[n]===a;)r++,n++;for(var o=(t.length-n)*c+1>>>0,u=new Uint8Array(o);n<t.length;){var l=t.charCodeAt(n);if(l>255)return;var h=e[l];if(255===h)return;for(var f=0,d=o-1;(0!==h||f<i)&&-1!==d;d--,f++)h+=s*u[d]>>>0,u[d]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=f,n++}for(var p=o-i;p!==o&&0===u[p];)p++;var g=Cn.allocUnsafe(r+(o-p));g.fill(0,0,r);for(var m=r;p!==o;)g[m++]=u[p++];return g}return{encode:function(e){if((Array.isArray(e)||e instanceof Uint8Array)&&(e=Cn.from(e)),!Cn.isBuffer(e))throw new TypeError("Expected Buffer");if(0===e.length)return"";for(var n=0,r=0,i=0,o=e.length;i!==o&&0===e[i];)i++,n++;for(var c=(o-i)*u+1>>>0,l=new Uint8Array(c);i!==o;){for(var h=e[i],f=0,d=c-1;(0!==h||f<r)&&-1!==d;d--,f++)h+=256*l[d]>>>0,l[d]=h%s>>>0,h=h/s>>>0;if(0!==h)throw new Error("Non-zero carry");r=f,i++}for(var p=c-r;p!==c&&0===l[p];)p++;for(var g=a.repeat(n);p<c;++p)g+=t.charAt(l[p]);return g},decodeUnsafe:l,decode:function(t){var e=l(t);if(e)return e;throw new Error("Non-base"+s+" character")}}},Rn=Tn("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");const Ln=n(Rn),On=te;var Un={};function Nn(t,e,n){return e<=t&&t<=n}function Pn(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function zn(t){this.tokens=[].slice.call(t)}zn.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var jn=-1;function Dn(t,e){if(t)throw TypeError("Decoder error");return e||65533}var Fn="utf-8";function qn(t,e){if(!(this instanceof qn))return new qn(t,e);if((t=void 0!==t?String(t).toLowerCase():Fn)!==Fn)throw new Error("Encoding not supported. Only utf-8 is supported");e=Pn(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e.fatal),this._ignoreBOM=Boolean(e.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function Kn(t,e){if(!(this instanceof Kn))return new Kn(t,e);if((t=void 0!==t?String(t).toLowerCase():Fn)!==Fn)throw new Error("Encoding not supported. Only utf-8 is supported");e=Pn(e),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function Wn(t){var e=t.fatal,n=0,r=0,i=0,o=128,s=191;this.handler=function(t,a){if(-1===a&&0!==i)return i=0,Dn(e);if(-1===a)return jn;if(0===i){if(Nn(a,0,127))return a;if(Nn(a,194,223))i=1,n=a-192;else if(Nn(a,224,239))224===a&&(o=160),237===a&&(s=159),i=2,n=a-224;else{if(!Nn(a,240,244))return Dn(e);240===a&&(o=144),244===a&&(s=143),i=3,n=a-240}return n<<=6*i,null}if(!Nn(a,o,s))return n=i=r=0,o=128,s=191,t.prepend(a),Dn(e);if(o=128,s=191,n+=a-128<<6*(i-(r+=1)),r!==i)return null;var c=n;return n=i=r=0,c}}function Hn(t){t.fatal,this.handler=function(t,e){if(-1===e)return jn;if(Nn(e,0,127))return e;var n,r;Nn(e,128,2047)?(n=1,r=192):Nn(e,2048,65535)?(n=2,r=224):Nn(e,65536,1114111)&&(n=3,r=240);for(var i=[(e>>6*n)+r];n>0;){var o=e>>6*(n-1);i.push(128|63&o),n-=1}return i}}qn.prototype={decode:function(t,e){var n;n="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=Pn(e),this._streaming||(this._decoder=new Wn({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var r,i=new zn(n),o=[];!i.endOfStream()&&(r=this._decoder.handler(i,i.read()))!==jn;)null!==r&&(Array.isArray(r)?o.push.apply(o,r):o.push(r));if(!this._streaming){do{if((r=this._decoder.handler(i,i.read()))===jn)break;null!==r&&(Array.isArray(r)?o.push.apply(o,r):o.push(r))}while(!i.endOfStream());this._decoder=null}return o.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===o[0]?(this._BOMseen=!0,o.shift()):this._BOMseen=!0)),function(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode(55296+(r>>10),56320+(1023&r)))}return e}(o)}},Kn.prototype={encode:function(t,e){t=t?String(t):"",e=Pn(e),this._streaming||(this._encoder=new Hn(this._options)),this._streaming=Boolean(e.stream);for(var n,r=[],i=new zn(function(t){for(var e=String(t),n=e.length,r=0,i=[];r<n;){var o=e.charCodeAt(r);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(r===n-1)i.push(65533);else{var s=t.charCodeAt(r+1);if(56320<=s&&s<=57343){var a=1023&o,c=1023&s;i.push(65536+(a<<10)+c),r+=1}else i.push(65533)}r+=1}return i}(t));!i.endOfStream()&&(n=this._encoder.handler(i,i.read()))!==jn;)Array.isArray(n)?r.push.apply(r,n):r.push(n);if(!this._streaming){for(;(n=this._encoder.handler(i,i.read()))!==jn;)Array.isArray(n)?r.push.apply(r,n):r.push(n);this._encoder=null}return new Uint8Array(r)}};const $n=r(Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:qn,TextEncoder:Kn},Symbol.toStringTag,{value:"Module"})));var Vn=i&&i.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),Zn=i&&i.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Gn=i&&i.__decorate||function(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s},Yn=i&&i.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&Vn(e,t,n);return Zn(e,t),e},Jn=i&&i.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Un,"__esModule",{value:!0});var Xn=Un.deserializeUnchecked=pr=Un.deserialize=hr=Un.serialize=Un.BinaryReader=Un.BinaryWriter=Un.BorshError=Un.baseDecode=Un.baseEncode=void 0;const Qn=Jn(kn),tr=Jn(Rn),er=Yn($n),nr=new("function"!=typeof TextDecoder?er.TextDecoder:TextDecoder)("utf-8",{fatal:!0});Un.baseEncode=function(t){return"string"==typeof t&&(t=Buffer.from(t,"utf8")),tr.default.encode(Buffer.from(t))},Un.baseDecode=function(t){return Buffer.from(tr.default.decode(t))};const rr=1024;class ir extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Un.BorshError=ir;class or{constructor(){this.buf=Buffer.alloc(rr),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(rr)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Qn.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Qn.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Qn.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Qn.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(rr)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const n of t)this.maybeResize(),e(n)}toArray(){return this.buf.subarray(0,this.length)}}function sr(t,e,n){const r=n.value;n.value=function(...t){try{return r.apply(this,t)}catch(e){if(e instanceof RangeError){const t=e.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(t)>=0)throw new ir("Reached the end of buffer when deserializing")}throw e}}}Un.BinaryWriter=or;class ar{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new Qn.default(t,"le")}readU128(){const t=this.readBuffer(16);return new Qn.default(t,"le")}readU256(){const t=this.readBuffer(32);return new Qn.default(t,"le")}readU512(){const t=this.readBuffer(64);return new Qn.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new ir(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return nr.decode(e)}catch(n){throw new ir(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),n=Array();for(let r=0;r<e;++r)n.push(t());return n}}function cr(t){return t.charAt(0).toUpperCase()+t.slice(1)}function ur(t,e,n,r,i){try{if("string"==typeof r)i[`write${cr(r)}`](n);else if(r instanceof Array)if("number"==typeof r[0]){if(n.length!==r[0])throw new ir(`Expecting byte array of length ${r[0]}, but got ${n.length} bytes`);i.writeFixedArray(n)}else if(2===r.length&&"number"==typeof r[1]){if(n.length!==r[1])throw new ir(`Expecting byte array of length ${r[1]}, but got ${n.length} bytes`);for(let e=0;e<r[1];e++)ur(t,null,n[e],r[0],i)}else i.writeArray(n,n=>{ur(t,e,n,r[0],i)});else if(void 0!==r.kind)switch(r.kind){case"option":null==n?i.writeU8(0):(i.writeU8(1),ur(t,e,n,r.type,i));break;case"map":i.writeU32(n.size),n.forEach((n,o)=>{ur(t,e,o,r.key,i),ur(t,e,n,r.value,i)});break;default:throw new ir(`FieldType ${r} unrecognized`)}else lr(t,n,i)}catch(o){throw o instanceof ir&&o.addToFieldPath(e),o}}function lr(t,e,n){if("function"==typeof e.borshSerialize)return void e.borshSerialize(n);const r=t.get(e.constructor);if(!r)throw new ir(`Class ${e.constructor.name} is missing in schema`);if("struct"===r.kind)r.fields.map(([r,i])=>{ur(t,r,e[r],i,n)});else{if("enum"!==r.kind)throw new ir(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`);{const i=e[r.field];for(let o=0;o<r.values.length;++o){const[s,a]=r.values[o];if(s===i){n.writeU8(o),ur(t,s,e[s],a,n);break}}}}}Gn([sr],ar.prototype,"readU8",null),Gn([sr],ar.prototype,"readU16",null),Gn([sr],ar.prototype,"readU32",null),Gn([sr],ar.prototype,"readU64",null),Gn([sr],ar.prototype,"readU128",null),Gn([sr],ar.prototype,"readU256",null),Gn([sr],ar.prototype,"readU512",null),Gn([sr],ar.prototype,"readString",null),Gn([sr],ar.prototype,"readFixedArray",null),Gn([sr],ar.prototype,"readArray",null),Un.BinaryReader=ar;var hr=Un.serialize=function(t,e,n=or){const r=new n;return lr(t,e,r),r.toArray()};function fr(t,e,n,r){try{if("string"==typeof n)return r[`read${cr(n)}`]();if(n instanceof Array){if("number"==typeof n[0])return r.readFixedArray(n[0]);if("number"==typeof n[1]){const e=[];for(let i=0;i<n[1];i++)e.push(fr(t,null,n[0],r));return e}return r.readArray(()=>fr(t,e,n[0],r))}if("option"===n.kind){return r.readU8()?fr(t,e,n.type,r):void 0}if("map"===n.kind){let i=new Map;const o=r.readU32();for(let s=0;s<o;s++){const o=fr(t,e,n.key,r),s=fr(t,e,n.value,r);i.set(o,s)}return i}return dr(t,n,r)}catch(i){throw i instanceof ir&&i.addToFieldPath(e),i}}function dr(t,e,n){if("function"==typeof e.borshDeserialize)return e.borshDeserialize(n);const r=t.get(e);if(!r)throw new ir(`Class ${e.name} is missing in schema`);if("struct"===r.kind){const r={};for(const[i,o]of t.get(e).fields)r[i]=fr(t,i,o,n);return new e(r)}if("enum"===r.kind){const i=n.readU8();if(i>=r.values.length)throw new ir(`Enum index: ${i} is out of range`);const[o,s]=r.values[i],a=fr(t,o,s,n);return new e({[o]:a})}throw new ir(`Unexpected schema kind: ${r.kind} for ${e.constructor.name}`)}var pr=Un.deserialize=function(t,e,n,r=ar){const i=new r(n),o=dr(t,e,i);if(i.offset<n.length)throw new ir(`Unexpected ${n.length-i.offset} bytes after deserialized data`);return o};Xn=Un.deserializeUnchecked=function(t,e,n,r=ar){return dr(t,e,new r(n))};var gr={};Object.defineProperty(gr,"__esModule",{value:!0}),gr.s16=gr.s8=gr.nu64be=gr.u48be=gr.u40be=gr.u32be=gr.u24be=gr.u16be=ri=gr.nu64=gr.u48=gr.u40=ni=gr.u32=gr.u24=ei=gr.u16=ti=gr.u8=Qr=gr.offset=gr.greedy=gr.Constant=gr.UTF8=gr.CString=gr.Blob=gr.Boolean=gr.BitField=gr.BitStructure=gr.VariantLayout=gr.Union=gr.UnionLayoutDiscriminator=gr.UnionDiscriminator=gr.Structure=gr.Sequence=gr.DoubleBE=gr.Double=gr.FloatBE=gr.Float=gr.NearInt64BE=gr.NearInt64=gr.NearUInt64BE=gr.NearUInt64=gr.IntBE=gr.Int=gr.UIntBE=gr.UInt=gr.OffsetLayout=gr.GreedyCount=gr.ExternalLayout=gr.bindConstructorLayout=gr.nameWithProperty=gr.Layout=gr.uint8ArrayToBuffer=gr.checkUint8Array=void 0,gr.constant=gr.utf8=gr.cstr=ai=gr.blob=gr.unionLayoutDiscriminator=gr.union=si=gr.seq=gr.bits=oi=gr.struct=gr.f64be=gr.f64=gr.f32be=gr.f32=gr.ns64be=gr.s48be=gr.s40be=gr.s32be=gr.s24be=gr.s16be=ii=gr.ns64=gr.s48=gr.s40=gr.s32=gr.s24=void 0;const mr=q;function yr(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function wr(t){return yr(t),mr.Buffer.from(t.buffer,t.byteOffset,t.length)}gr.checkUint8Array=yr,gr.uint8ArrayToBuffer=wr;class br{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}function vr(t,e){return e.property?t+"["+e.property+"]":t}gr.Layout=br,gr.nameWithProperty=vr,gr.bindConstructorLayout=function(t,e){if("function"!=typeof t)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof br))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(t,n){return e.encode(this,t,n)},writable:!0}),Object.defineProperty(t,"decode",{value:(t,n)=>e.decode(t,n),writable:!0})};class Er extends br{isCount(){throw new Error("ExternalLayout is abstract")}}gr.ExternalLayout=Er;class Sr extends Er{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){yr(t);const n=t.length-e;return Math.floor(n/this.elementSpan)}encode(t,e,n){return 0}}gr.GreedyCount=Sr;class Ar extends Er{constructor(t,e=0,n){if(!(t instanceof br))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof xr||this.layout instanceof _r}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,n=0){return this.layout.encode(t,e,n+this.offset)}}gr.OffsetLayout=Ar;class xr extends br{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return wr(t).readUIntLE(e,this.span)}encode(t,e,n=0){return wr(e).writeUIntLE(t,n,this.span),this.span}}gr.UInt=xr;class _r extends br{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return wr(t).readUIntBE(e,this.span)}encode(t,e,n=0){return wr(e).writeUIntBE(t,n,this.span),this.span}}gr.UIntBE=_r;class Br extends br{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return wr(t).readIntLE(e,this.span)}encode(t,e,n=0){return wr(e).writeIntLE(t,n,this.span),this.span}}gr.Int=Br;class kr extends br{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return wr(t).readIntBE(e,this.span)}encode(t,e,n=0){return wr(e).writeIntBE(t,n,this.span),this.span}}gr.IntBE=kr;const Mr=Math.pow(2,32);function Ir(t){const e=Math.floor(t/Mr);return{hi32:e,lo32:t-e*Mr}}function Cr(t,e){return t*Mr+e}class Tr extends br{constructor(t){super(8,t)}decode(t,e=0){const n=wr(t),r=n.readUInt32LE(e);return Cr(n.readUInt32LE(e+4),r)}encode(t,e,n=0){const r=Ir(t),i=wr(e);return i.writeUInt32LE(r.lo32,n),i.writeUInt32LE(r.hi32,n+4),8}}gr.NearUInt64=Tr;class Rr extends br{constructor(t){super(8,t)}decode(t,e=0){const n=wr(t);return Cr(n.readUInt32BE(e),n.readUInt32BE(e+4))}encode(t,e,n=0){const r=Ir(t),i=wr(e);return i.writeUInt32BE(r.hi32,n),i.writeUInt32BE(r.lo32,n+4),8}}gr.NearUInt64BE=Rr;class Lr extends br{constructor(t){super(8,t)}decode(t,e=0){const n=wr(t),r=n.readUInt32LE(e);return Cr(n.readInt32LE(e+4),r)}encode(t,e,n=0){const r=Ir(t),i=wr(e);return i.writeUInt32LE(r.lo32,n),i.writeInt32LE(r.hi32,n+4),8}}gr.NearInt64=Lr;class Or extends br{constructor(t){super(8,t)}decode(t,e=0){const n=wr(t);return Cr(n.readInt32BE(e),n.readUInt32BE(e+4))}encode(t,e,n=0){const r=Ir(t),i=wr(e);return i.writeInt32BE(r.hi32,n),i.writeUInt32BE(r.lo32,n+4),8}}gr.NearInt64BE=Or;class Ur extends br{constructor(t){super(4,t)}decode(t,e=0){return wr(t).readFloatLE(e)}encode(t,e,n=0){return wr(e).writeFloatLE(t,n),4}}gr.Float=Ur;class Nr extends br{constructor(t){super(4,t)}decode(t,e=0){return wr(t).readFloatBE(e)}encode(t,e,n=0){return wr(e).writeFloatBE(t,n),4}}gr.FloatBE=Nr;class Pr extends br{constructor(t){super(8,t)}decode(t,e=0){return wr(t).readDoubleLE(e)}encode(t,e,n=0){return wr(e).writeDoubleLE(t,n),8}}gr.Double=Pr;class zr extends br{constructor(t){super(8,t)}decode(t,e=0){return wr(t).readDoubleBE(e)}encode(t,e,n=0){return wr(e).writeDoubleBE(t,n),8}}gr.DoubleBE=zr;class jr extends br{constructor(t,e,n){if(!(t instanceof br))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof Er&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let r=-1;!(e instanceof Er)&&0<t.span&&(r=e*t.span),super(r,n),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0,r=this.count;if(r instanceof Er&&(r=r.decode(t,e)),0<this.elementLayout.span)n=r*this.elementLayout.span;else{let i=0;for(;i<r;)n+=this.elementLayout.getSpan(t,e+n),++i}return n}decode(t,e=0){const n=[];let r=0,i=this.count;for(i instanceof Er&&(i=i.decode(t,e));r<i;)n.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),r+=1;return n}encode(t,e,n=0){const r=this.elementLayout,i=t.reduce((t,i)=>t+r.encode(i,e,n+t),0);return this.count instanceof Er&&this.count.encode(t.length,e,n),i}}gr.Sequence=jr;class Dr extends br{constructor(t,e,n){if(!Array.isArray(t)||!t.reduce((t,e)=>t&&e instanceof br,!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof e&&void 0===n&&(n=e,e=void 0);for(const o of t)if(0>o.span&&void 0===o.property)throw new Error("fields cannot contain unnamed variable-length layout");let r=-1;try{r=t.reduce((t,e)=>t+e.getSpan(),0)}catch(i){}super(r,e),this.fields=t,this.decodePrefixes=!!n}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((n,r)=>{const i=r.getSpan(t,e);return e+=i,n+i},0)}catch(r){throw new RangeError("indeterminate span")}return n}decode(t,e=0){yr(t);const n=this.makeDestinationObject();for(const r of this.fields)if(void 0!==r.property&&(n[r.property]=r.decode(t,e)),e+=r.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return n}encode(t,e,n=0){const r=n;let i=0,o=0;for(const s of this.fields){let r=s.span;if(o=0<r?r:0,void 0!==s.property){const i=t[s.property];void 0!==i&&(o=s.encode(i,e,n),0>r&&(r=s.getSpan(e,n)))}i=n,n+=r}return i+o-r}fromArray(t){const e=this.makeDestinationObject();for(const n of this.fields)void 0!==n.property&&0<t.length&&(e[n.property]=t.shift());return e}layoutFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if("string"!=typeof t)throw new TypeError("property must be string");let e=0;for(const n of this.fields){if(n.property===t)return e;0>n.span?e=-1:0<=e&&(e+=n.span)}}}gr.Structure=Dr;class Fr{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,n){throw new Error("UnionDiscriminator is abstract")}}gr.UnionDiscriminator=Fr;class qr extends Fr{constructor(t,e){if(!(t instanceof Er&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,n){return this.layout.encode(t,e,n)}}gr.UnionLayoutDiscriminator=qr;class Kr extends br{constructor(t,e,n){let r;if(t instanceof xr||t instanceof _r)r=new qr(new Ar(t));else if(t instanceof Er&&t.isCount())r=new qr(t);else{if(!(t instanceof Fr))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");r=t}if(void 0===e&&(e=null),!(null===e||e instanceof br))throw new TypeError("defaultLayout must be null or a Layout");if(null!==e){if(0>e.span)throw new Error("defaultLayout must have constant span");void 0===e.property&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof xr||t instanceof _r)&&(i+=r.layout.span)),super(i,n),this.discriminator=r,this.usesPrefixDiscriminator=t instanceof xr||t instanceof _r,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(t){return o(t)},this.configGetSourceVariant=function(t){o=t.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const n=this.getVariant(t,e);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const n=this.registry[e];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,e=0){let n;const r=this.discriminator,i=r.decode(t,e),o=this.registry[i];if(void 0===o){const o=this.defaultLayout;let s=0;this.usesPrefixDiscriminator&&(s=r.layout.span),n=this.makeDestinationObject(),n[r.property]=i,n[o.property]=o.decode(t,e+s)}else n=o.decode(t,e);return n}encode(t,e,n=0){const r=this.getSourceVariant(t);if(void 0===r){const r=this.discriminator,i=this.defaultLayout;let o=0;return this.usesPrefixDiscriminator&&(o=r.layout.span),r.encode(t[r.property],e,n),o+i.encode(t[i.property],e,n+o)}return r.encode(t,e,n)}addVariant(t,e,n){const r=new Wr(this,t,e,n);return this.registry[t]=r,r}getVariant(t,e=0){let n;return n=t instanceof Uint8Array?this.discriminator.decode(t,e):t,this.registry[n]}}gr.Union=Kr;class Wr extends br{constructor(t,e,n,r){if(!(t instanceof Kr))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof n&&void 0===r&&(r=n,n=null),n){if(!(n instanceof br))throw new TypeError("layout must be a Layout");if(null!==t.defaultLayout&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof r)throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=n?n.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,r),this.union=t,this.variant=e,this.layout=n||null}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let r=0;return this.layout&&(r=this.layout.getSpan(t,e+n)),n+r}decode(t,e=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,e+r):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,e,n=0){let r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,n);let i=r;if(this.layout&&(this.layout.encode(t[this.property],e,n+r),i+=this.layout.getSpan(e,n+r),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}function Hr(t){return 0>t&&(t+=4294967296),t}gr.VariantLayout=Wr;class $r extends br{constructor(t,e,n){if(!(t instanceof xr||t instanceof _r))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof e&&void 0===n&&(n=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!e,this.fields=[];let r=0;this._packedSetValue=function(t){return r=Hr(t),this},this._packedGetValue=function(){return r}}decode(t,e=0){const n=this.makeDestinationObject(),r=this.word.decode(t,e);this._packedSetValue(r);for(const i of this.fields)void 0!==i.property&&(n[i.property]=i.decode(t));return n}encode(t,e,n=0){const r=this.word.decode(e,n);this._packedSetValue(r);for(const i of this.fields)if(void 0!==i.property){const e=t[i.property];void 0!==e&&i.encode(e)}return this.word.encode(this._packedGetValue(),e,n)}addField(t,e){const n=new Vr(this,t,e);return this.fields.push(n),n}addBoolean(t){const e=new Zr(this,t);return this.fields.push(e),e}fieldFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}gr.BitStructure=$r;class Vr{constructor(t,e,n){if(!(t instanceof $r))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const r=8*t.span,i=t.fields.reduce((t,e)=>t+e.bits,0);if(e+i>r)throw new Error("bits too long for span remainder ("+(r-i)+" of "+r+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,32===e&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=r-i-e),this.wordMask=Hr(this.valueMask<<this.start),this.property=n}decode(t,e){return Hr(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(t){if("number"!=typeof t||!Number.isInteger(t)||t!==Hr(t&this.valueMask))throw new TypeError(vr("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),n=Hr(t<<this.start);this.container._packedSetValue(Hr(e&~this.wordMask)|n)}}gr.BitField=Vr;let Zr=class extends Vr{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){"boolean"==typeof t&&(t=+t),super.encode(t)}};gr.Boolean=Zr;class Gr extends br{constructor(t,e){if(!(t instanceof Er&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof Er||(n=t),super(n,e),this.length=t}getSpan(t,e){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),n}decode(t,e=0){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),wr(t).slice(e,e+n)}encode(t,e,n){let r=this.length;if(this.length instanceof Er&&(r=t.length),!(t instanceof Uint8Array&&r===t.length))throw new TypeError(vr("Blob.encode",this)+" requires (length "+r+") Uint8Array as src");if(n+r>e.length)throw new RangeError("encoding overruns Uint8Array");const i=wr(t);return wr(e).write(i.toString("hex"),n,r,"hex"),this.length instanceof Er&&this.length.encode(r,e,n),r}}gr.Blob=Gr;class Yr extends br{constructor(t){super(-1,t)}getSpan(t,e=0){yr(t);let n=e;for(;n<t.length&&0!==t[n];)n+=1;return 1+n-e}decode(t,e=0){const n=this.getSpan(t,e);return wr(t).slice(e,e+n-1).toString("utf-8")}encode(t,e,n=0){"string"!=typeof t&&(t=String(t));const r=mr.Buffer.from(t,"utf8"),i=r.length;if(n+i>e.length)throw new RangeError("encoding overruns Buffer");const o=wr(e);return r.copy(o,n),o[n+i]=0,i+1}}gr.CString=Yr;class Jr extends br{constructor(t,e){if("string"==typeof t&&void 0===e&&(e=t,t=void 0),void 0===t)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return yr(t),t.length-e}decode(t,e=0){const n=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return wr(t).slice(e,e+n).toString("utf-8")}encode(t,e,n=0){"string"!=typeof t&&(t=String(t));const r=mr.Buffer.from(t,"utf8"),i=r.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>e.length)throw new RangeError("encoding overruns Buffer");return r.copy(wr(e),n),i}}gr.UTF8=Jr;class Xr extends br{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,n){return 0}}gr.Constant=Xr,gr.greedy=(t,e)=>new Sr(t,e);var Qr=gr.offset=(t,e,n)=>new Ar(t,e,n),ti=gr.u8=t=>new xr(1,t),ei=gr.u16=t=>new xr(2,t);gr.u24=t=>new xr(3,t);var ni=gr.u32=t=>new xr(4,t);gr.u40=t=>new xr(5,t),gr.u48=t=>new xr(6,t);var ri=gr.nu64=t=>new Tr(t);gr.u16be=t=>new _r(2,t),gr.u24be=t=>new _r(3,t),gr.u32be=t=>new _r(4,t),gr.u40be=t=>new _r(5,t),gr.u48be=t=>new _r(6,t),gr.nu64be=t=>new Rr(t),gr.s8=t=>new Br(1,t),gr.s16=t=>new Br(2,t),gr.s24=t=>new Br(3,t),gr.s32=t=>new Br(4,t),gr.s40=t=>new Br(5,t),gr.s48=t=>new Br(6,t);var ii=gr.ns64=t=>new Lr(t);gr.s16be=t=>new kr(2,t),gr.s24be=t=>new kr(3,t),gr.s32be=t=>new kr(4,t),gr.s40be=t=>new kr(5,t),gr.s48be=t=>new kr(6,t),gr.ns64be=t=>new Or(t),gr.f32=t=>new Ur(t),gr.f32be=t=>new Nr(t),gr.f64=t=>new Pr(t),gr.f64be=t=>new zr(t);var oi=gr.struct=(t,e,n)=>new Dr(t,e,n);gr.bits=(t,e,n)=>new $r(t,e,n);var si=gr.seq=(t,e,n)=>new jr(t,e,n);gr.union=(t,e,n)=>new Kr(t,e,n),gr.unionLayoutDiscriminator=(t,e)=>new qr(t,e);var ai=gr.blob=(t,e)=>new Gr(t,e);gr.cstr=t=>new Yr(t),gr.utf8=(t,e)=>new Jr(t,e),gr.constant=(t,e)=>new Xr(t,e);function ci(t){if(Array.isArray(t)){return"%5B"+t.map(ci).join("%2C%20")+"%5D"}return"bigint"==typeof t?`${t}n`:encodeURIComponent(String(null!=t&&null===Object.getPrototypeOf(t)?{...t}:t))}function ui([t,e]){return`${t}=${ci(e)}`}function li(t,e={}){{let n=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(n+=` '${function(t){const e=Object.entries(t).map(ui).join("&");return btoa(e)}(e)}'`),`${n}\``}}var hi=class extends Error{constructor(...[t,n]){let r,i;if(n){const{cause:t,...e}=n;t&&(i={cause:t}),Object.keys(e).length>0&&(r=e)}super(li(t,r),i),e(this,"cause",this.cause),e(this,"context"),this.context={__code:t,...r},this.name="SolanaError"}};function fi(t){return"fixedSize"in t&&"number"==typeof t.fixedSize}function di(t){return 1!==t?.endian}function pi(t){return e={fixedSize:t.size,write(e,n,r){t.range&&function(t,e,n,r){if(r<e||r>n)throw new hi(8078011,{codecDescription:t,max:n,min:e,value:r})}(t.name,t.range[0],t.range[1],e);const i=new ArrayBuffer(t.size);return t.set(new DataView(i),e,di(t.config)),n.set(new Uint8Array(i),r),r+t.size}},Object.freeze({...e,encode:t=>{const n=new Uint8Array(function(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}(t,e));return e.write(t,n,0),n}});var e}function gi(t){return e={fixedSize:t.size,read(e,n=0){!function(t,e,n=0){if(e.length-n<=0)throw new hi(8078e3,{codecDescription:t})}(t.name,e,n),function(t,e,n,r=0){const i=n.length-r;if(i<e)throw new hi(8078001,{bytesLength:i,codecDescription:t,expected:e})}(t.name,t.size,e,n);const r=new DataView(function(t,e,n){const r=t.byteOffset+(e??0),i=n??t.byteLength;return t.buffer.slice(r,r+i)}(e,n,t.size));return[t.get(r,di(t.config)),n+t.size]}},Object.freeze({...e,decode:(t,n=0)=>e.read(t,n)[0]});var e}var mi=(t={})=>function(t,e){if(fi(t)!==fi(e))throw new hi(8078004);if(fi(t)&&fi(e)&&t.fixedSize!==e.fixedSize)throw new hi(8078005,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!fi(t)&&!fi(e)&&t.maxSize!==e.maxSize)throw new hi(8078006,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}(((t={})=>pi({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,n)=>t.setBigUint64(0,BigInt(e),n),size:8}))(t),((t={})=>gi({config:t,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}))(t));class yi extends TypeError{constructor(t,e){let n;const{message:r,explanation:i,...o}=t,{path:s}=t,a=0===s.length?r:`At path: ${s.join(".")} -- ${r}`;super(i??a),null!=i&&(this.cause=a),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...e()])}}function wi(t){return"object"==typeof t&&null!=t}function bi(t){return wi(t)&&!Array.isArray(t)}function vi(t){return"symbol"==typeof t?t.toString():"string"==typeof t?JSON.stringify(t):`${t}`}function Ei(t,e,n,r){if(!0===t)return;!1===t?t={}:"string"==typeof t&&(t={message:t});const{path:i,branch:o}=e,{type:s}=n,{refinement:a,message:c=`Expected a value of type \`${s}\`${a?` with refinement \`${a}\``:""}, but received: \`${vi(r)}\``}=t;return{value:r,type:s,refinement:a,key:i[i.length-1],path:i,branch:o,...t,message:c}}function*Si(t,e,n,r){var i;wi(i=t)&&"function"==typeof i[Symbol.iterator]||(t=[t]);for(const o of t){const t=Ei(o,e,n,r);t&&(yield t)}}function*Ai(t,e,n={}){const{path:r=[],branch:i=[t],coerce:o=!1,mask:s=!1}=n,a={path:r,branch:i,mask:s};o&&(t=e.coercer(t,a));let c="valid";for(const u of e.validator(t,a))u.explanation=n.message,c="not_valid",yield[u,void 0];for(let[u,l,h]of e.entries(t,a)){const e=Ai(l,h,{path:void 0===u?r:[...r,u],branch:void 0===u?i:[...i,l],coerce:o,mask:s,message:n.message});for(const n of e)n[0]?(c=null!=n[0].refinement?"not_refined":"not_valid",yield[n[0],void 0]):o&&(l=n[1],void 0===u?t=l:t instanceof Map?t.set(u,l):t instanceof Set?t.add(l):wi(t)&&(void 0!==l||u in t)&&(t[u]=l))}if("not_valid"!==c)for(const u of e.refiner(t,a))u.explanation=n.message,c="not_refined",yield[u,void 0];"valid"===c&&(yield[void 0,t])}let xi=class{constructor(t){const{type:e,schema:n,validator:r,refiner:i,coercer:o=t=>t,entries:s=function*(){}}=t;this.type=e,this.schema=n,this.entries=s,this.coercer=o,this.validator=r?(t,e)=>Si(r(t,e),e,this,t):()=>[],this.refiner=i?(t,e)=>Si(i(t,e),e,this,t):()=>[]}assert(t,e){return function(t,e,n){const r=ki(t,e,{message:n});if(r[0])throw r[0]}(t,this,e)}create(t,e){return _i(t,this,e)}is(t){return Bi(t,this)}mask(t,e){return function(t,e,n){const r=ki(t,e,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}(t,this,e)}validate(t,e={}){return ki(t,this,e)}};function _i(t,e,n){const r=ki(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function Bi(t,e){return!ki(t,e)[0]}function ki(t,e,n={}){const r=Ai(t,e,n),i=function(t){const{done:e,value:n}=t.next();return e?void 0:n}(r);if(i[0]){return[new yi(i[0],function*(){for(const t of r)t[0]&&(yield t[0])}),void 0]}return[void 0,i[1]]}function Mi(t,e){return new xi({type:t,schema:null,validator:e})}function Ii(t){return new xi({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer:t=>Array.isArray(t)?t.slice():t,validator:t=>Array.isArray(t)||`Expected an array value, but received: ${vi(t)}`})}function Ci(){return Mi("boolean",t=>"boolean"==typeof t)}function Ti(t){return Mi("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${vi(e)}`)}function Ri(t){const e=vi(t),n=typeof t;return new xi({type:"literal",schema:"string"===n||"number"===n||"boolean"===n?t:null,validator:n=>n===t||`Expected the literal \`${e}\`, but received: ${vi(n)}`})}function Li(t){return new xi({...t,validator:(e,n)=>null===e||t.validator(e,n),refiner:(e,n)=>null===e||t.refiner(e,n)})}function Oi(){return Mi("number",t=>"number"==typeof t&&!isNaN(t)||`Expected a number, but received: ${vi(t)}`)}function Ui(t){return new xi({...t,validator:(e,n)=>void 0===e||t.validator(e,n),refiner:(e,n)=>void 0===e||t.refiner(e,n)})}function Ni(t,e){return new xi({type:"record",schema:null,*entries(n){if(wi(n))for(const r in n){const i=n[r];yield[r,r,t],yield[r,i,e]}},validator:t=>bi(t)||`Expected an object, but received: ${vi(t)}`,coercer:t=>bi(t)?{...t}:t})}function Pi(){return Mi("string",t=>"string"==typeof t||`Expected a string, but received: ${vi(t)}`)}function zi(t){const e=Mi("never",()=>!1);return new xi({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(t.length,n.length);for(let i=0;i<r;i++)yield[i,n[i],t[i]||e]}},validator:t=>Array.isArray(t)||`Expected an array, but received: ${vi(t)}`,coercer:t=>Array.isArray(t)?t.slice():t})}function ji(t){const e=Object.keys(t);return new xi({type:"type",schema:t,*entries(n){if(wi(n))for(const r of e)yield[r,n[r],t[r]]},validator:t=>bi(t)||`Expected an object, but received: ${vi(t)}`,coercer:t=>bi(t)?{...t}:t})}function Di(t){const e=t.map(t=>t.type).join(" | ");return new xi({type:"union",schema:null,coercer(e,n){for(const r of t){const[t,i]=r.validate(e,{coerce:!0,mask:n.mask});if(!t)return i}return e},validator(n,r){const i=[];for(const e of t){const[...t]=Ai(n,e,r),[o]=t;if(!o[0])return[];for(const[e]of t)e&&i.push(e)}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${vi(n)}`,...i]}})}function Fi(){return Mi("unknown",()=>!0)}function qi(t,e,n){return new xi({...t,coercer:(r,i)=>Bi(r,e)?t.coercer(n(r,i),i):t.coercer(r,i)})}var Ki,Wi=new Uint8Array(16);function Hi(){if(!Ki&&!(Ki="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ki(Wi)}const $i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Vi(t){return"string"==typeof t&&$i.test(t)}for(var Zi,Gi,Yi=[],Ji=0;Ji<256;++Ji)Yi.push((Ji+256).toString(16).substr(1));function Xi(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Yi[t[e+0]]+Yi[t[e+1]]+Yi[t[e+2]]+Yi[t[e+3]]+"-"+Yi[t[e+4]]+Yi[t[e+5]]+"-"+Yi[t[e+6]]+Yi[t[e+7]]+"-"+Yi[t[e+8]]+Yi[t[e+9]]+"-"+Yi[t[e+10]]+Yi[t[e+11]]+Yi[t[e+12]]+Yi[t[e+13]]+Yi[t[e+14]]+Yi[t[e+15]]).toLowerCase();if(!Vi(n))throw TypeError("Stringified UUID is invalid");return n}var Qi=0,to=0;function eo(t){if(!Vi(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=255&e,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=255&e,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=255&e,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=255&e,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=255&e,n}function no(t,e,n){function r(t,r,i,o){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}(t)),"string"==typeof r&&(r=eo(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+t.length);if(s.set(r),s.set(t,r.length),(s=n(s))[6]=15&s[6]|e,s[8]=63&s[8]|128,i){o=o||0;for(var a=0;a<16;++a)i[o+a]=s[a];return i}return Xi(s)}try{r.name=t}catch(i){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function ro(t){return 14+(t+64>>>9<<4)+1}function io(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function oo(t,e,n,r,i,o){return io((s=io(io(e,t),io(r,o)))<<(a=i)|s>>>32-a,n);var s,a}function so(t,e,n,r,i,o,s){return oo(e&n|~e&r,t,e,i,o,s)}function ao(t,e,n,r,i,o,s){return oo(e&r|n&~r,t,e,i,o,s)}function co(t,e,n,r,i,o,s){return oo(e^n^r,t,e,i,o,s)}function uo(t,e,n,r,i,o,s){return oo(n^(e|~r),t,e,i,o,s)}var lo=no("v3",48,function(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return function(t){for(var e=[],n=32*t.length,r="0123456789abcdef",i=0;i<n;i+=8){var o=t[i>>5]>>>i%32&255,s=parseInt(r.charAt(o>>>4&15)+r.charAt(15&o),16);e.push(s)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[ro(e)-1]=e;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,s=0;s<t.length;s+=16){var a=n,c=r,u=i,l=o;n=so(n,r,i,o,t[s],7,-680876936),o=so(o,n,r,i,t[s+1],12,-389564586),i=so(i,o,n,r,t[s+2],17,606105819),r=so(r,i,o,n,t[s+3],22,-1044525330),n=so(n,r,i,o,t[s+4],7,-176418897),o=so(o,n,r,i,t[s+5],12,1200080426),i=so(i,o,n,r,t[s+6],17,-1473231341),r=so(r,i,o,n,t[s+7],22,-45705983),n=so(n,r,i,o,t[s+8],7,1770035416),o=so(o,n,r,i,t[s+9],12,-1958414417),i=so(i,o,n,r,t[s+10],17,-42063),r=so(r,i,o,n,t[s+11],22,-1990404162),n=so(n,r,i,o,t[s+12],7,1804603682),o=so(o,n,r,i,t[s+13],12,-40341101),i=so(i,o,n,r,t[s+14],17,-1502002290),n=ao(n,r=so(r,i,o,n,t[s+15],22,1236535329),i,o,t[s+1],5,-165796510),o=ao(o,n,r,i,t[s+6],9,-1069501632),i=ao(i,o,n,r,t[s+11],14,643717713),r=ao(r,i,o,n,t[s],20,-373897302),n=ao(n,r,i,o,t[s+5],5,-701558691),o=ao(o,n,r,i,t[s+10],9,38016083),i=ao(i,o,n,r,t[s+15],14,-660478335),r=ao(r,i,o,n,t[s+4],20,-405537848),n=ao(n,r,i,o,t[s+9],5,568446438),o=ao(o,n,r,i,t[s+14],9,-1019803690),i=ao(i,o,n,r,t[s+3],14,-187363961),r=ao(r,i,o,n,t[s+8],20,1163531501),n=ao(n,r,i,o,t[s+13],5,-1444681467),o=ao(o,n,r,i,t[s+2],9,-51403784),i=ao(i,o,n,r,t[s+7],14,1735328473),n=co(n,r=ao(r,i,o,n,t[s+12],20,-1926607734),i,o,t[s+5],4,-378558),o=co(o,n,r,i,t[s+8],11,-2022574463),i=co(i,o,n,r,t[s+11],16,1839030562),r=co(r,i,o,n,t[s+14],23,-35309556),n=co(n,r,i,o,t[s+1],4,-1530992060),o=co(o,n,r,i,t[s+4],11,1272893353),i=co(i,o,n,r,t[s+7],16,-155497632),r=co(r,i,o,n,t[s+10],23,-1094730640),n=co(n,r,i,o,t[s+13],4,681279174),o=co(o,n,r,i,t[s],11,-358537222),i=co(i,o,n,r,t[s+3],16,-722521979),r=co(r,i,o,n,t[s+6],23,76029189),n=co(n,r,i,o,t[s+9],4,-640364487),o=co(o,n,r,i,t[s+12],11,-421815835),i=co(i,o,n,r,t[s+15],16,530742520),n=uo(n,r=co(r,i,o,n,t[s+2],23,-995338651),i,o,t[s],6,-198630844),o=uo(o,n,r,i,t[s+7],10,1126891415),i=uo(i,o,n,r,t[s+14],15,-1416354905),r=uo(r,i,o,n,t[s+5],21,-57434055),n=uo(n,r,i,o,t[s+12],6,1700485571),o=uo(o,n,r,i,t[s+3],10,-1894986606),i=uo(i,o,n,r,t[s+10],15,-1051523),r=uo(r,i,o,n,t[s+1],21,-2054922799),n=uo(n,r,i,o,t[s+8],6,1873313359),o=uo(o,n,r,i,t[s+15],10,-30611744),i=uo(i,o,n,r,t[s+6],15,-1560198380),r=uo(r,i,o,n,t[s+13],21,1309151649),n=uo(n,r,i,o,t[s+4],6,-145523070),o=uo(o,n,r,i,t[s+11],10,-1120210379),i=uo(i,o,n,r,t[s+2],15,718787259),r=uo(r,i,o,n,t[s+9],21,-343485551),n=io(n,a),r=io(r,c),i=io(i,u),o=io(o,l)}return[n,r,i,o]}(function(t){if(0===t.length)return[];for(var e=8*t.length,n=new Uint32Array(ro(e)),r=0;r<e;r+=8)n[r>>5]|=(255&t[r/8])<<r%32;return n}(t),8*t.length))});function ho(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:case 3:return e^n^r;case 2:return e&n^e&r^n&r}}function fo(t,e){return t<<e|t>>>32-e}var po=no("v5",80,function(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var r=unescape(encodeURIComponent(t));t=[];for(var i=0;i<r.length;++i)t.push(r.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var o=t.length/4+2,s=Math.ceil(o/16),a=new Array(s),c=0;c<s;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=t[64*c+4*l]<<24|t[64*c+4*l+1]<<16|t[64*c+4*l+2]<<8|t[64*c+4*l+3];a[c]=u}a[s-1][14]=8*(t.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(t.length-1)&4294967295;for(var h=0;h<s;++h){for(var f=new Uint32Array(80),d=0;d<16;++d)f[d]=a[h][d];for(var p=16;p<80;++p)f[p]=fo(f[p-3]^f[p-8]^f[p-14]^f[p-16],1);for(var g=n[0],m=n[1],y=n[2],w=n[3],b=n[4],v=0;v<80;++v){var E=Math.floor(v/20),S=fo(g,5)+ho(E,m,y,w)+b+e[E]+f[v]>>>0;b=w,w=y,y=fo(m,30)>>>0,m=g,g=S}n[0]=n[0]+g>>>0,n[1]=n[1]+m>>>0,n[2]=n[2]+y>>>0,n[3]=n[3]+w>>>0,n[4]=n[4]+b>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]});const go=Object.freeze(Object.defineProperty({__proto__:null,NIL:"00000000-0000-0000-0000-000000000000",parse:eo,stringify:Xi,v1:function(t,e,n){var r=e&&n||0,i=e||new Array(16),o=(t=t||{}).node||Zi,s=void 0!==t.clockseq?t.clockseq:Gi;if(null==o||null==s){var a=t.random||(t.rng||Hi)();null==o&&(o=Zi=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==s&&(s=Gi=16383&(a[6]<<8|a[7]))}var c=void 0!==t.msecs?t.msecs:Date.now(),u=void 0!==t.nsecs?t.nsecs:to+1,l=c-Qi+(u-to)/1e4;if(l<0&&void 0===t.clockseq&&(s=s+1&16383),(l<0||c>Qi)&&void 0===t.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Qi=c,to=u,Gi=s;var h=(1e4*(268435455&(c+=122192928e5))+u)%4294967296;i[r++]=h>>>24&255,i[r++]=h>>>16&255,i[r++]=h>>>8&255,i[r++]=255&h;var f=c/4294967296*1e4&268435455;i[r++]=f>>>8&255,i[r++]=255&f,i[r++]=f>>>24&15|16,i[r++]=f>>>16&255,i[r++]=s>>>8|128,i[r++]=255&s;for(var d=0;d<6;++d)i[r+d]=o[d];return e||Xi(i)},v3:lo,v4:function(t,e,n){var r=(t=t||{}).random||(t.rng||Hi)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return Xi(r)},v5:po,validate:Vi,version:function(t){if(!Vi(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}},Symbol.toStringTag,{value:"Module"})),mo=r(go),yo=mo.v4;var wo=function(t,e,n,r){if("string"!=typeof t)throw new TypeError(t+" must be a string");const i="number"==typeof(r=r||{}).version?r.version:2;if(1!==i&&2!==i)throw new TypeError(i+" must be 1 or 2");const o={method:t};if(2===i&&(o.jsonrpc="2.0"),e){if("object"!=typeof e&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");o.params=e}if(void 0===n){const t="function"==typeof r.generator?r.generator:function(){return yo()};o.id=t(o,r)}else 2===i&&null===n?r.notificationIdNull&&(o.id=null):o.id=n;return o};const bo=mo.v4,vo=wo,Eo=function(t,e){if(!(this instanceof Eo))return new Eo(t,e);e||(e={}),this.options={reviver:void 0!==e.reviver?e.reviver:null,replacer:void 0!==e.replacer?e.replacer:null,generator:void 0!==e.generator?e.generator:function(){return bo()},version:void 0!==e.version?e.version:2,notificationIdNull:"boolean"==typeof e.notificationIdNull&&e.notificationIdNull},this.callServer=t};var So=Eo;Eo.prototype.request=function(t,e,n,r){const i=this;let o=null;const s=Array.isArray(t)&&"function"==typeof e;if(1===this.options.version&&s)throw new TypeError("JSON-RPC 1.0 does not support batching");if(s||!s&&t&&"object"==typeof t&&"function"==typeof e)r=e,o=t;else{"function"==typeof n&&(r=n,n=void 0);const i="function"==typeof r;try{o=vo(t,e,n,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(c){if(i)return void r(c);throw c}if(!i)return o}let a;try{a=JSON.stringify(o,this.options.replacer)}catch(c){return void r(c)}return this.callServer(a,function(t,e){i._parseResponse(t,e,r)}),o},Eo.prototype._parseResponse=function(t,e,n){if(t)return void n(t);if(!e)return void n();let r;try{r=JSON.parse(e,this.options.reviver)}catch(i){return void n(i)}if(3!==n.length)n(null,r);else{if(Array.isArray(r)){const t=function(t){return void 0!==t.error},e=function(e){return!t(e)};return void n(null,r.filter(t),r.filter(e))}n(null,r.error,r.result)}};const Ao=n(So);var xo={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,r,o,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new i(r,o||t,s),c=n?n+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function s(t,e){0===--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},a.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},a.prototype.emit=function(t,e,r,i,o,s){var a=n?n+t:t;if(!this._events[a])return!1;var c,u,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,i),!0;case 5:return l.fn.call(l.context,e,r,i,o),!0;case 6:return l.fn.call(l.context,e,r,i,o,s),!0}for(u=1,c=new Array(h-1);u<h;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var f,d=l.length;for(u=0;u<d;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),h){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,r);break;case 4:l[u].fn.call(l[u].context,e,r,i);break;default:if(!c)for(f=1,c=new Array(h-1);f<h;f++)c[f-1]=arguments[f];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||i&&!a.once||r&&a.context!==r||s(this,o);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==e||i&&!a[c].once||r&&a[c].context!==r)&&u.push(a[c]);u.length?this._events[o]=1===u.length?u[0]:u:s(this,o)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&s(this,e)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}(xo);const _o=n(xo.exports);var Bo=class extends _o{constructor(t,n){super(),e(this,"socket"),this.socket=new window.WebSocket(t,n.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=t=>this.emit("message",t.data),this.socket.onerror=t=>this.emit("error",t),this.socket.onclose=t=>{this.emit("close",t.code,t.reason)}}send(t,e,n){const r=n||e;try{this.socket.send(t),r()}catch(i){r(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,n){this.socket.addEventListener(t,e,n)}};var ko=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},Mo=class extends _o{constructor(t,n="ws://localhost:8080",{autoconnect:r=!0,reconnect:i=!0,reconnect_interval:o=1e3,max_reconnects:s=5,...a}={},c,u){super(),e(this,"address"),e(this,"rpc_id"),e(this,"queue"),e(this,"options"),e(this,"autoconnect"),e(this,"ready"),e(this,"reconnect"),e(this,"reconnect_timer_id"),e(this,"reconnect_interval"),e(this,"max_reconnects"),e(this,"rest_options"),e(this,"current_reconnects"),e(this,"generate_request_id"),e(this,"socket"),e(this,"webSocketFactory"),e(this,"dataPack"),this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=n,this.autoconnect=r,this.ready=!1,this.reconnect=i,this.reconnect_timer_id=void 0,this.reconnect_interval=o,this.max_reconnects=s,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=c||(()=>"number"==typeof this.rpc_id?++this.rpc_id:Number(this.rpc_id)+1),this.dataPack=u||new ko,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,n,r){return r||"object"!=typeof n||(r=n,n=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const s=this.generate_request_id(t,e),a={jsonrpc:"2.0",method:t,params:e||void 0,id:s};this.socket.send(this.dataPack.encode(a),r,t=>{if(t)return o(t);this.queue[s]={promise:[i,o]},n&&(this.queue[s].timeout=setTimeout(()=>{delete this.queue[s],o(new Error("reply timeout"))},n))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((n,r)=>{if(!this.ready)return r(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),t=>{if(t)return r(t);n()})})}async subscribe(t){"string"==typeof t&&(t=[t]);const e=await this.call("rpc.on",t);if("string"==typeof t&&"ok"!==e[t])throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){"string"==typeof t&&(t=[t]);const e=await this.call("rpc.off",t);if("string"==typeof t&&"ok"!==e[t])throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket&&this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return void 0!==this.reconnect_timer_id}willReconnect(){return this.reconnect&&(0===this.max_reconnects||this.current_reconnects<this.max_reconnects)}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:t})=>{t instanceof ArrayBuffer&&(t=q.Buffer.from(t).toString());try{t=this.dataPack.decode(t)}catch(e){return}if(t.notification&&this.listeners(t.notification).length){if(!Object.keys(t.params).length)return this.emit(t.notification);const e=[t.notification];if(t.params.constructor===Object)e.push(t.params);else for(let n=0;n<t.params.length;n++)e.push(t.params[n]);return Promise.resolve().then(()=>{this.emit.apply(this,e)})}if(!this.queue[t.id])return t.method?Promise.resolve().then(()=>{this.emit(t.method,t?.params)}):void 0;"error"in t=="result"in t&&this.queue[t.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[t.id].timeout&&clearTimeout(this.queue[t.id].timeout),t.error?this.queue[t.id].promise[1](t.error):this.queue[t.id].promise[0](t.result),delete this.queue[t.id]}),this.socket.addEventListener("error",t=>this.emit("error",t)),this.socket.addEventListener("close",({code:n,reason:r})=>{this.ready&&setTimeout(()=>this.emit("close",n,r),0),this.ready=!1,this.socket=void 0,1e3!==n&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)?this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",n,r),1))})}};class Io extends Et{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,rt(t);const n=bt(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?t.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),ot(i)}update(t){return it(this),this.iHash.update(t),this}digestInto(t){it(this),nt(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:i,blockLen:o,outputLen:s}=this;return t.finished=r,t.destroyed=i,t.blockLen=o,t.outputLen=s,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Co=(t,e,n)=>new Io(t,e).update(n).digest();Co.create=(t,e)=>new Io(t,e);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const To=(t,e)=>(t+(t>=0?e:-e)/zo)/e;function Ro(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function Lo(t,e){const n={};for(let r of Object.keys(e))n[r]=void 0===t[r]?e[r]:t[r];return ie(n.lowS,"lowS"),ie(n.prehash,"prehash"),void 0!==n.format&&Ro(n.format),n}class Oo extends Error{constructor(t=""){super(t)}}const Uo={Err:Oo,_tlv:{encode:(t,e)=>{const{Err:n}=Uo;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(1&e.length)throw new n("tlv.encode: unpadded data");const r=e.length/2,i=se(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const o=r>127?se(i.length/2|128):"";return se(t)+o+i+e},decode(t,e){const{Err:n}=Uo;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const i=e[r++];let o=0;if(!!(128&i)){const t=127&i;if(!t)throw new n("tlv.decode(long): indefinite length not supported");if(t>4)throw new n("tlv.decode(long): byte length is too big");const s=e.subarray(r,r+t);if(s.length!==t)throw new n("tlv.decode: length bytes not complete");if(0===s[0])throw new n("tlv.decode(long): zero leftmost byte");for(const e of s)o=o<<8|e;if(r+=t,o<128)throw new n("tlv.decode(long): not minimal encoding")}else o=i;const s=e.subarray(r,r+o);if(s.length!==o)throw new n("tlv.decode: wrong value length");return{v:s,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Uo;if(t<No)throw new e("integer: negative integers are not allowed");let n=se(t);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Uo;if(128&t[0])throw new e("invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new e("invalid signature integer: unnecessary leading zero");return ce(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Uo,i=fe("signature",t),{v:o,l:s}=r.decode(48,i);if(s.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,o),{v:u,l:l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(t){const{_tlv:e,_int:n}=Uo,r=e.encode(2,n.encode(t.r))+e.encode(2,n.encode(t.s));return e.encode(48,r)}},No=BigInt(0),Po=BigInt(1),zo=BigInt(2),jo=BigInt(3),Do=BigInt(4);function Fo(t,e){const{BYTES:n}=t;let r;if("bigint"==typeof e)r=e;else{let o=fe("private key",e);try{r=t.fromBytes(o)}catch(i){throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function qo(t,e={}){const n=sn("weierstrass",t,e),{Fp:r,Fn:i}=n;let o=n.CURVE;const{h:s,n:a}=o;we(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=e;if(c&&(!r.is0(o.a)||"bigint"!=typeof c.beta||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const u=Wo(r,i);function l(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}const h=e.toBytes||function(t,e,n){const{x:i,y:o}=e.toAffine(),s=r.toBytes(i);if(ie(n,"isCompressed"),n){l();return vt(Ko(!r.isOdd(o)),s)}return vt(Uint8Array.of(4),s,r.toBytes(o))},f=e.fromBytes||function(t){oe(t,void 0,"Point");const{publicKey:e,publicKeyUncompressed:n}=u,i=t.length,o=t[0],s=t.subarray(1);if(i!==e||2!==o&&3!==o){if(i===n&&4===o){const t=r.BYTES,e=r.fromBytes(s.subarray(0,t)),n=r.fromBytes(s.subarray(t,2*t));if(!p(e,n))throw new Error("bad point: is not on curve");return{x:e,y:n}}throw new Error(`bad point: got length ${i}, expected compressed=${e} or uncompressed=${n}`)}{const t=r.fromBytes(s);if(!r.isValid(t))throw new Error("bad point: is not on curve, wrong x");const e=d(t);let n;try{n=r.sqrt(e)}catch(a){const t=a instanceof Error?": "+a.message:"";throw new Error("bad point: is not on curve, sqrt error"+t)}l();return!(1&~o)!==r.isOdd(n)&&(n=r.neg(n)),{x:t,y:n}}};function d(t){const e=r.sqr(t),n=r.mul(e,t);return r.add(r.add(n,r.mul(t,o.a)),o.b)}function p(t,e){const n=r.sqr(e),i=d(t);return r.eql(n,i)}if(!p(o.Gx,o.Gy))throw new Error("bad curve params: generator point");const g=r.mul(r.pow(o.a,jo),Do),m=r.mul(r.sqr(o.b),BigInt(27));if(r.is0(r.add(g,m)))throw new Error("bad curve params: a or b");function y(t,e,n=!1){if(!r.isValid(e)||n&&r.is0(e))throw new Error(`bad point coordinate ${t}`);return e}function w(t){if(!(t instanceof A))throw new Error("ProjectivePoint expected")}function b(t){if(!c||!c.basises)throw new Error("no endo");return function(t,e,n){const[[r,i],[o,s]]=e,a=To(s*t,n),c=To(-i*t,n);let u=t-a*r-c*o,l=-a*i-c*s;const h=u<No,f=l<No;h&&(u=-u),f&&(l=-l);const d=ye(Math.ceil(me(n)/2))+Po;if(u<No||u>=d||l<No||l>=d)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:h,k1:u,k2neg:f,k2:l}}(t,c.basises,i.ORDER)}const v=be((t,e)=>{const{X:n,Y:i,Z:o}=t;if(r.eql(o,r.ONE))return{x:n,y:i};const s=t.is0();null==e&&(e=s?r.ONE:r.inv(o));const a=r.mul(n,e),c=r.mul(i,e),u=r.mul(o,e);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:a,y:c}}),E=be(t=>{if(t.is0()){if(e.allowInfinityPoint&&!r.is0(t.Y))return;throw new Error("bad point: ZERO")}const{x:n,y:i}=t.toAffine();if(!r.isValid(n)||!r.isValid(i))throw new Error("bad point: x or y not field elements");if(!p(n,i))throw new Error("bad point: equation left != right");if(!t.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function S(t,e,n,i,o){return n=new A(r.mul(n.X,t),n.Y,n.Z),e=Ve(i,e),n=Ve(o,n),e.add(n)}class A{constructor(t,e,n){this.X=y("x",t),this.Y=y("y",e,!0),this.Z=y("z",n),Object.freeze(this)}static CURVE(){return o}static fromAffine(t){const{x:e,y:n}=t||{};if(!t||!r.isValid(e)||!r.isValid(n))throw new Error("invalid affine point");if(t instanceof A)throw new Error("projective point not allowed");return r.is0(e)&&r.is0(n)?A.ZERO:new A(e,n,r.ONE)}static fromBytes(t){const e=A.fromAffine(f(oe(t,void 0,"point")));return e.assertValidity(),e}static fromHex(t){return A.fromBytes(fe("pointHex",t))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(t=8,e=!0){return _.createCache(this,t),e||this.multiply(jo),this}assertValidity(){E(this)}hasEvenY(){const{y:t}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(t)}equals(t){w(t);const{X:e,Y:n,Z:i}=this,{X:o,Y:s,Z:a}=t,c=r.eql(r.mul(e,a),r.mul(o,i)),u=r.eql(r.mul(n,a),r.mul(s,i));return c&&u}negate(){return new A(this.X,r.neg(this.Y),this.Z)}double(){const{a:t,b:e}=o,n=r.mul(e,jo),{X:i,Y:s,Z:a}=this;let c=r.ZERO,u=r.ZERO,l=r.ZERO,h=r.mul(i,i),f=r.mul(s,s),d=r.mul(a,a),p=r.mul(i,s);return p=r.add(p,p),l=r.mul(i,a),l=r.add(l,l),c=r.mul(t,l),u=r.mul(n,d),u=r.add(c,u),c=r.sub(f,u),u=r.add(f,u),u=r.mul(c,u),c=r.mul(p,c),l=r.mul(n,l),d=r.mul(t,d),p=r.sub(h,d),p=r.mul(t,p),p=r.add(p,l),l=r.add(h,h),h=r.add(l,h),h=r.add(h,d),h=r.mul(h,p),u=r.add(u,h),d=r.mul(s,a),d=r.add(d,d),h=r.mul(d,p),c=r.sub(c,h),l=r.mul(d,f),l=r.add(l,l),l=r.add(l,l),new A(c,u,l)}add(t){w(t);const{X:e,Y:n,Z:i}=this,{X:s,Y:a,Z:c}=t;let u=r.ZERO,l=r.ZERO,h=r.ZERO;const f=o.a,d=r.mul(o.b,jo);let p=r.mul(e,s),g=r.mul(n,a),m=r.mul(i,c),y=r.add(e,n),b=r.add(s,a);y=r.mul(y,b),b=r.add(p,g),y=r.sub(y,b),b=r.add(e,i);let v=r.add(s,c);return b=r.mul(b,v),v=r.add(p,m),b=r.sub(b,v),v=r.add(n,i),u=r.add(a,c),v=r.mul(v,u),u=r.add(g,m),v=r.sub(v,u),h=r.mul(f,b),u=r.mul(d,m),h=r.add(u,h),u=r.sub(g,h),h=r.add(g,h),l=r.mul(u,h),g=r.add(p,p),g=r.add(g,p),m=r.mul(f,m),b=r.mul(d,b),g=r.add(g,m),m=r.sub(p,m),m=r.mul(f,m),b=r.add(b,m),p=r.mul(g,b),l=r.add(l,p),p=r.mul(v,b),u=r.mul(y,u),u=r.sub(u,p),p=r.mul(y,g),h=r.mul(v,h),h=r.add(h,p),new A(u,l,h)}subtract(t){return this.add(t.negate())}is0(){return this.equals(A.ZERO)}multiply(t){const{endo:n}=e;if(!i.isValidNot0(t))throw new Error("invalid scalar: out of range");let r,o;const s=t=>_.cached(this,t,t=>Ze(A,t));if(n){const{k1neg:e,k1:i,k2neg:a,k2:c}=b(t),{p:u,f:l}=s(i),{p:h,f:f}=s(c);o=l.add(f),r=S(n.beta,u,h,e,a)}else{const{p:e,f:n}=s(t);r=e,o=n}return Ze(A,[r,o])[0]}multiplyUnsafe(t){const{endo:n}=e,r=this;if(!i.isValid(t))throw new Error("invalid scalar: out of range");if(t===No||r.is0())return A.ZERO;if(t===Po)return r;if(_.hasCache(this))return this.multiply(t);if(n){const{k1neg:e,k1:i,k2neg:o,k2:s}=b(t),{p1:a,p2:c}=function(t,e,n,r){let i=e,o=t.ZERO,s=t.ZERO;for(;n>He||r>He;)n&$e&&(o=o.add(i)),r&$e&&(s=s.add(i)),i=i.double(),n>>=$e,r>>=$e;return{p1:o,p2:s}}(A,r,i,s);return S(n.beta,a,c,e,o)}return _.unsafe(r,t)}multiplyAndAddUnsafe(t,e,n){const r=this.multiplyUnsafe(e).add(t.multiplyUnsafe(n));return r.is0()?void 0:r}toAffine(t){return v(this,t)}isTorsionFree(){const{isTorsionFree:t}=e;return s===Po||(t?t(A,this):_.unsafe(this,a).is0())}clearCofactor(){const{clearCofactor:t}=e;return s===Po?this:t?t(A,this):this.multiplyUnsafe(s)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}toBytes(t=!0){return ie(t,"isCompressed"),this.assertValidity(),h(A,this,t)}toHex(t=!0){return lt(this.toBytes(t))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(t=!0){return this.toBytes(t)}_setWindowSize(t){this.precompute(t)}static normalizeZ(t){return Ze(A,t)}static msm(t,e){return rn(A,i,t,e)}static fromPrivateKey(t){return A.BASE.multiply(Fo(i,t))}}A.BASE=new A(o.Gx,o.Gy,r.ONE),A.ZERO=new A(r.ZERO,r.ONE,r.ZERO),A.Fp=r,A.Fn=i;const x=i.BITS,_=new nn(A,e.endo?Math.ceil(x/2):x);return A.BASE.precompute(8),A}function Ko(t){return Uint8Array.of(t?2:3)}function Wo(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function Ho(t,e={}){const{Fn:n}=t,r=e.randomBytes||At,i=Object.assign(Wo(t.Fp,n),{seed:We(n.ORDER)});function o(t){try{return!!Fo(n,t)}catch(e){return!1}}function s(t=r(i.seed)){return function(t,e,n=!1){const r=t.length,i=Ke(e),o=We(e);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const s=Ce(n?ue(t):ce(t),e-Ee)+Ee;return n?he(s,i):le(s,i)}(oe(t,i.seed,"seed"),n.ORDER)}function a(e,r=!0){return t.BASE.multiply(Fo(n,e)).toBytes(r)}function c(e){if("bigint"==typeof e)return!1;if(e instanceof t)return!0;const{secretKey:r,publicKey:o,publicKeyUncompressed:s}=i;if(n.allowedLengths||r===o)return;const a=fe("key",e).length;return a===o||a===s}const u={isValidSecretKey:o,isValidPublicKey:function(e,n){const{publicKey:r,publicKeyUncompressed:o}=i;try{const i=e.length;return(!0!==n||i===r)&&((!1!==n||i===o)&&!!t.fromBytes(e))}catch(s){return!1}},randomSecretKey:s,isValidPrivateKey:o,randomPrivateKey:s,normPrivateKeyToScalar:t=>Fo(n,t),precompute:(e=8,n=t.BASE)=>n.precompute(e,!1)};return Object.freeze({getPublicKey:a,getSharedSecret:function(e,r,i=!0){if(!0===c(e))throw new Error("first arg must be private key");if(!1===c(r))throw new Error("second arg must be public key");const o=Fo(n,e);return t.fromHex(r).multiply(o).toBytes(i)},keygen:function(t){const e=s(t);return{secretKey:e,publicKey:a(e)}},Point:t,utils:u,lengths:i})}function $o(t,e,n={}){rt(e),we(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||At,i=n.hmac||((t,...n)=>Co(e,t,vt(...n))),{Fp:o,Fn:s}=t,{ORDER:a,BITS:c}=s,{keygen:u,getPublicKey:l,getSharedSecret:h,utils:f,lengths:d}=Ho(t,n),p={prehash:!1,lowS:"boolean"==typeof n.lowS&&n.lowS,format:void 0,extraEntropy:!1},g="compact";function m(t){return t>a>>Po}function y(t,e){if(!s.isValidNot0(e))throw new Error(`invalid signature ${t}: out of range 1..Point.Fn.ORDER`);return e}class w{constructor(t,e,n){this.r=y("r",t),this.s=y("s",e),null!=n&&(this.recovery=n),Object.freeze(this)}static fromBytes(t,e=g){let n;if(function(t,e){Ro(e);const n=d.signature;oe(t,"compact"===e?n:"recovered"===e?n+1:void 0,`${e} signature`)}(t,e),"der"===e){const{r:e,s:n}=Uo.toSig(oe(t));return new w(e,n)}"recovered"===e&&(n=t[0],e="compact",t=t.subarray(1));const r=s.BYTES,i=t.subarray(0,r),o=t.subarray(r,2*r);return new w(s.fromBytes(i),s.fromBytes(o),n)}static fromHex(t,e){return this.fromBytes(wt(t),e)}addRecoveryBit(t){return new w(this.r,this.s,t)}recoverPublicKey(e){const n=o.ORDER,{r:r,s:i,recovery:c}=this;if(null==c||![0,1,2,3].includes(c))throw new Error("recovery id invalid");if(a*zo<n&&c>1)throw new Error("recovery id is ambiguous for h>1 curve");const u=2===c||3===c?r+a:r;if(!o.isValid(u))throw new Error("recovery id 2 or 3 invalid");const l=o.toBytes(u),h=t.fromBytes(vt(Ko(!(1&c)),l)),f=s.inv(u),d=v(fe("msgHash",e)),p=s.create(-d*f),g=s.create(i*f),m=t.BASE.multiplyUnsafe(p).add(h.multiplyUnsafe(g));if(m.is0())throw new Error("point at infinify");return m.assertValidity(),m}hasHighS(){return m(this.s)}toBytes(t=g){if(Ro(t),"der"===t)return wt(Uo.hexFromSig(this));const e=s.toBytes(this.r),n=s.toBytes(this.s);if("recovered"===t){if(null==this.recovery)throw new Error("recovery bit must be present");return vt(Uint8Array.of(this.recovery),e,n)}return vt(e,n)}toHex(t){return lt(this.toBytes(t))}assertValidity(){}static fromCompact(t){return w.fromBytes(fe("sig",t),"compact")}static fromDER(t){return w.fromBytes(fe("sig",t),"der")}normalizeS(){return this.hasHighS()?new w(this.r,s.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return lt(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return lt(this.toBytes("compact"))}}const b=n.bits2int||function(t){if(t.length>8192)throw new Error("input is too large");const e=ce(t),n=8*t.length-c;return n>0?e>>BigInt(n):e},v=n.bits2int_modN||function(t){return s.create(b(t))},E=ye(c);function S(t){return ge("num < 2^"+c,t,No,E),s.toBytes(t)}function A(t,n){return oe(t,void 0,"message"),n?oe(e(t),void 0,"prehashed message"):t}return Object.freeze({keygen:u,getPublicKey:l,getSharedSecret:h,utils:f,lengths:d,Point:t,sign:function(n,o,a={}){n=fe("message",n);const{seed:c,k2sig:u}=function(e,n,i){if(["recovered","canonical"].some(t=>t in i))throw new Error("sign() legacy options not supported");const{lowS:o,prehash:a,extraEntropy:c}=Lo(i,p);e=A(e,a);const u=v(e),l=Fo(s,n),h=[S(l),S(u)];if(null!=c&&!1!==c){const t=!0===c?r(d.secretKey):c;h.push(fe("extraEntropy",t))}const f=vt(...h),g=u;return{seed:f,k2sig:function(e){const n=b(e);if(!s.isValidNot0(n))return;const r=s.inv(n),i=t.BASE.multiply(n).toAffine(),a=s.create(i.x);if(a===No)return;const c=s.create(r*s.create(g+a*l));if(c===No)return;let u=(i.x===a?0:2)|Number(i.y&Po),h=c;return o&&m(c)&&(h=s.neg(c),u^=1),new w(a,h,u)}}}(n,o,a),l=function(t,e,n){if("number"!=typeof t||t<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");const r=t=>new Uint8Array(t),i=t=>Uint8Array.of(t);let o=r(t),s=r(t),a=0;const c=()=>{o.fill(1),s.fill(0),a=0},u=(...t)=>n(s,o,...t),l=(t=r(0))=>{s=u(i(0),t),o=u(),0!==t.length&&(s=u(i(1),t),o=u())},h=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let t=0;const n=[];for(;t<e;){o=u();const e=o.slice();n.push(e),t+=o.length}return vt(...n)};return(t,e)=>{let n;for(c(),l(t);!(n=e(h()));)l();return c(),n}}(e.outputLen,s.BYTES,i);return l(c,u)},verify:function(e,n,r,i={}){const{lowS:o,prehash:a,format:c}=Lo(i,p);if(r=fe("publicKey",r),n=A(fe("message",n),a),"strict"in i)throw new Error("options.strict was renamed to lowS");const u=void 0===c?function(t){let e;const n="string"==typeof t||tt(t),r=!n&&null!==t&&"object"==typeof t&&"bigint"==typeof t.r&&"bigint"==typeof t.s;if(!n&&!r)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(r)e=new w(t.r,t.s);else if(n){try{e=w.fromBytes(fe("sig",t),"der")}catch(i){if(!(i instanceof Uo.Err))throw i}if(!e)try{e=w.fromBytes(fe("sig",t),"compact")}catch(o){return!1}}return e||!1}(e):w.fromBytes(fe("sig",e),c);if(!1===u)return!1;try{const e=t.fromBytes(r);if(o&&u.hasHighS())return!1;const{r:i,s:a}=u,c=v(n),l=s.inv(a),h=s.create(c*l),f=s.create(i*l),d=t.BASE.multiplyUnsafe(h).add(e.multiplyUnsafe(f));if(d.is0())return!1;return s.create(d.x)===i}catch(l){return!1}},recoverPublicKey:function(t,e,n={}){const{prehash:r}=Lo(n,p);return e=A(e,r),w.fromBytes(t,"recovered").recoverPublicKey(e).toBytes()},Signature:w,hash:e})}function Vo(t){const{CURVE:e,curveOpts:n}=function(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let r=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(t=>Math.ceil(t/2)))):void 0;return{CURVE:e,curveOpts:{Fp:n,Fn:qe(e.n,{BITS:t.nBitLength,allowedLengths:r,modFromBytes:t.wrapPrivateKey}),allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes}}}(t),r={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,hash:t.hash,ecdsaOpts:r}}function Zo(t){const{CURVE:e,curveOpts:n,hash:r,ecdsaOpts:i}=Vo(t);return function(t,e){const n=e.Point;return Object.assign({},e,{ProjectivePoint:n,CURVE:Object.assign({},t,Fe(n.Fn.ORDER,n.Fn.BITS))})}(t,$o(qo(e,n),r,i))}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const Go={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Yo={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Jo=BigInt(2);const Xo=qe(Go.p,{sqrt:function(t){const e=Go.p,n=BigInt(3),r=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=t*t*t%e,l=u*u*t%e,h=Te(l,n,e)*l%e,f=Te(h,n,e)*l%e,d=Te(f,Jo,e)*u%e,p=Te(d,i,e)*d%e,g=Te(p,o,e)*p%e,m=Te(g,a,e)*g%e,y=Te(m,c,e)*m%e,w=Te(y,a,e)*g%e,b=Te(w,n,e)*l%e,v=Te(b,s,e)*p%e,E=Te(v,r,e)*u%e,S=Te(E,Jo,e);if(!Xo.eql(Xo.sqr(S),t))throw new Error("Cannot find square root");return S}}),Qo=function(t,e){const n=e=>Zo({...t,hash:e});return{...n(e),create:n}}({...Go,Fp:Xo,lowS:!0,endo:Yo},te);function ts(t){try{return xn.ExtendedPoint.fromHex(t),!0}catch{return!1}}xn.utils.randomPrivateKey,xn.getPublicKey;const es=(t,e)=>xn.sign(t,e.slice(0,32)),ns=xn.verify,rs=t=>q.Buffer.isBuffer(t)?t:t instanceof Uint8Array?q.Buffer.from(t.buffer,t.byteOffset,t.byteLength):q.Buffer.from(t);class is{constructor(t){Object.assign(this,t)}encode(){return q.Buffer.from(hr(os,this))}static decode(t){return pr(os,this,t)}static decodeUnchecked(t){return Xn(os,this,t)}}const os=new Map;var ss;const as=32;let cs=1;class us extends is{constructor(t){if(super({}),this._bn=void 0,function(t){return void 0!==t._bn}(t))this._bn=t._bn;else{if("string"==typeof t){const e=Ln.decode(t);if(e.length!=as)throw new Error("Invalid public key input");this._bn=new Mn(e)}else this._bn=new Mn(t);if(this._bn.byteLength()>as)throw new Error("Invalid public key input")}}static unique(){const t=new us(cs);return cs+=1,new us(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return Ln.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(q.Buffer);if(t.length===as)return t;const e=q.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){const r=q.Buffer.concat([t.toBuffer(),q.Buffer.from(e),n.toBuffer()]),i=On(r);return new us(i)}static createProgramAddressSync(t,e){let n=q.Buffer.alloc(0);t.forEach(function(t){if(t.length>32)throw new TypeError("Max seed length exceeded");n=q.Buffer.concat([n,rs(t)])}),n=q.Buffer.concat([n,e.toBuffer(),q.Buffer.from("ProgramDerivedAddress")]);const r=On(n);if(ts(r))throw new Error("Invalid seeds, address must fall off the curve");return new us(r)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n,r=255;for(;0!=r;){try{const i=t.concat(q.Buffer.from([r]));n=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[n,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){return ts(new us(t).toBytes())}}ss=us,us.default=new ss("11111111111111111111111111111111"),os.set(us,{kind:"struct",fields:[["_bn","u256"]]}),new us("BPFLoader1111111111111111111111111111111111");const ls=1232;class hs extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(hs.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class fs extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(fs.prototype,"name",{value:"TransactionExpiredTimeoutError"});class ds extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(ds.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class ps{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const e=new Map;this.keySegments().flat().forEach((t,n)=>{e.set(t.toBase58(),n)});const n=t=>{const n=e.get(t.toBase58());if(void 0===n)throw new Error("Encountered an unknown instruction account key during compilation");return n};return t.map(t=>({programIdIndex:n(t.programId),accountKeyIndexes:t.keys.map(t=>n(t.pubkey)),data:t.data}))}}const gs=(t="publicKey")=>ai(32,t),ms=(t="signature")=>ai(64,t),ys=(t="string")=>{const e=oi([ni("length"),ni("lengthPadding"),ai(Qr(ni(),-8),"chars")],t),n=e.decode.bind(e),r=e.encode.bind(e),i=e;return i.decode=(t,e)=>n(t,e).chars.toString(),i.encode=(t,e,n)=>{const i={chars:q.Buffer.from(t,"utf8")};return r(i,e,n)},i.alloc=t=>ni().span+ni().span+q.Buffer.from(t,"utf8").length,i};function ws(t){let e=0,n=0;for(;;){let r=t.shift();if(e|=(127&r)<<7*n,n+=1,!(128&r))break}return e}function bs(t,e){let n=e;for(;;){let e=127&n;if(n>>=7,0==n){t.push(e);break}e|=128,t.push(e)}}function vs(t,e){if(!t)throw new Error(e||"Assertion failed")}class Es{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const n=new Map,r=t=>{const e=t.toBase58();let r=n.get(e);return void 0===r&&(r={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(e,r)),r},i=r(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){r(o.programId).isInvoked=!0;for(const t of o.keys){const e=r(t.pubkey);e.isSigner||(e.isSigner=t.isSigner),e.isWritable||(e.isWritable=t.isWritable)}}return new Es(e,n)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];vs(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,t])=>t.isSigner&&t.isWritable),n=t.filter(([,t])=>t.isSigner&&!t.isWritable),r=t.filter(([,t])=>!t.isSigner&&t.isWritable),i=t.filter(([,t])=>!t.isSigner&&!t.isWritable),o={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{vs(e.length>0,"Expected at least one writable signer key");const[t]=e[0];vs(t===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[o,[...e.map(([t])=>new us(t)),...n.map(([t])=>new us(t)),...r.map(([t])=>new us(t)),...i.map(([t])=>new us(t))]]}extractTableLookup(t){const[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,t=>!t.isSigner&&!t.isInvoked&&t.isWritable),[r,i]=this.drainKeysFoundInLookupTable(t.state.addresses,t=>!t.isSigner&&!t.isInvoked&&!t.isWritable);if(0!==e.length||0!==r.length)return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:r},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(t,e){const n=new Array,r=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const e=new us(i),o=t.findIndex(t=>t.equals(e));o>=0&&(vs(o<256,"Max lookup table index exceeded"),n.push(o),r.push(e),this.keyMetaMap.delete(i))}return[n,r]}}const Ss="Reached end of buffer unexpectedly";function As(t){if(0===t.length)throw new Error(Ss);return t.shift()}function xs(t,...e){const[n]=e;if(2===e.length?n+(e[1]??0)>t.length:n>=t.length)throw new Error(Ss);return t.splice(...e)}class _s{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(t=>new us(t)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Ln.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new ps(this.staticAccountKeys)}static compile(t){const e=Es.compile(t.instructions,t.payerKey),[n,r]=e.getMessageComponents(),i=new ps(r).compileInstructions(t.instructions).map(t=>({programIdIndex:t.programIdIndex,accounts:t.accountKeyIndexes,data:Ln.encode(t.data)}));return new _s({header:n,accountKeys:r,recentBlockhash:t.recentBlockhash,instructions:i})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){return t-e<this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts}return t<e-this.header.numReadonlySignedAccounts}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];bs(e,t);const n=this.instructions.map(t=>{const{accounts:e,programIdIndex:n}=t,r=Array.from(Ln.decode(t.data));let i=[];bs(i,e.length);let o=[];return bs(o,r.length),{programIdIndex:n,keyIndicesCount:q.Buffer.from(i),keyIndices:e,dataLength:q.Buffer.from(o),data:r}});let r=[];bs(r,n.length);let i=q.Buffer.alloc(ls);q.Buffer.from(r).copy(i);let o=r.length;n.forEach(t=>{const e=oi([ti("programIdIndex"),ai(t.keyIndicesCount.length,"keyIndicesCount"),si(ti("keyIndex"),t.keyIndices.length,"keyIndices"),ai(t.dataLength.length,"dataLength"),si(ti("userdatum"),t.data.length,"data")]).encode(t,i,o);o+=e}),i=i.slice(0,o);const s=oi([ai(1,"numRequiredSignatures"),ai(1,"numReadonlySignedAccounts"),ai(1,"numReadonlyUnsignedAccounts"),ai(e.length,"keyCount"),si(gs("key"),t,"keys"),gs("recentBlockhash")]),a={numRequiredSignatures:q.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:q.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:q.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:q.Buffer.from(e),keys:this.accountKeys.map(t=>rs(t.toBytes())),recentBlockhash:Ln.decode(this.recentBlockhash)};let c=q.Buffer.alloc(2048);const u=s.encode(a,c);return i.copy(c,u),c.slice(0,u+i.length)}static from(t){let e=[...t];const n=As(e);if(n!==(127&n))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const r=As(e),i=As(e),o=ws(e);let s=[];for(let h=0;h<o;h++){const t=xs(e,0,as);s.push(new us(q.Buffer.from(t)))}const a=xs(e,0,as),c=ws(e);let u=[];for(let h=0;h<c;h++){const t=As(e),n=xs(e,0,ws(e)),r=xs(e,0,ws(e)),i=Ln.encode(q.Buffer.from(r));u.push({programIdIndex:t,accounts:n,data:i})}const l={header:{numRequiredSignatures:n,numReadonlySignedAccounts:r,numReadonlyUnsignedAccounts:i},recentBlockhash:Ln.encode(q.Buffer.from(a)),accountKeys:s,instructions:u};return new _s(l)}}class Bs{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new ps(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){return t-n<this.addressTableLookups.reduce((t,e)=>t+e.writableIndexes.length,0)}if(t>=this.header.numRequiredSignatures){return t-e<n-e-this.header.numReadonlyUnsignedAccounts}return t<e-this.header.numReadonlySignedAccounts}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const n of this.addressTableLookups){const r=t.find(t=>t.key.equals(n.accountKey));if(!r)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const t of n.writableIndexes){if(!(t<r.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${n.accountKey.toBase58()}`);e.writable.push(r.state.addresses[t])}for(const t of n.readonlyIndexes){if(!(t<r.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${n.accountKey.toBase58()}`);e.readonly.push(r.state.addresses[t])}}return e}static compile(t){const e=Es.compile(t.instructions,t.payerKey),n=new Array,r={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const c of i){const t=e.extractTableLookup(c);if(void 0!==t){const[e,{writable:i,readonly:o}]=t;n.push(e),r.writable.push(...i),r.readonly.push(...o)}}const[o,s]=e.getMessageComponents(),a=new ps(s,r).compileInstructions(t.instructions);return new Bs({header:o,staticAccountKeys:s,recentBlockhash:t.recentBlockhash,compiledInstructions:a,addressTableLookups:n})}serialize(){const t=Array();bs(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),n=Array();bs(n,this.compiledInstructions.length);const r=this.serializeAddressTableLookups(),i=Array();bs(i,this.addressTableLookups.length);const o=oi([ti("prefix"),oi([ti("numRequiredSignatures"),ti("numReadonlySignedAccounts"),ti("numReadonlyUnsignedAccounts")],"header"),ai(t.length,"staticAccountKeysLength"),si(gs(),this.staticAccountKeys.length,"staticAccountKeys"),gs("recentBlockhash"),ai(n.length,"instructionsLength"),ai(e.length,"serializedInstructions"),ai(i.length,"addressTableLookupsLength"),ai(r.length,"serializedAddressTableLookups")]),s=new Uint8Array(ls),a=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(t=>t.toBytes()),recentBlockhash:Ln.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:r},s);return s.slice(0,a)}serializeInstructions(){let t=0;const e=new Uint8Array(ls);for(const n of this.compiledInstructions){const r=Array();bs(r,n.accountKeyIndexes.length);const i=Array();bs(i,n.data.length);t+=oi([ti("programIdIndex"),ai(r.length,"encodedAccountKeyIndexesLength"),si(ti(),n.accountKeyIndexes.length,"accountKeyIndexes"),ai(i.length,"encodedDataLength"),ai(n.data.length,"data")]).encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(r),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(ls);for(const n of this.addressTableLookups){const r=Array();bs(r,n.writableIndexes.length);const i=Array();bs(i,n.readonlyIndexes.length);t+=oi([gs("accountKey"),ai(r.length,"encodedWritableIndexesLength"),si(ti(),n.writableIndexes.length,"writableIndexes"),ai(i.length,"encodedReadonlyIndexesLength"),si(ti(),n.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(r),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const n=As(e),r=127&n;vs(n!==r,"Expected versioned message but received legacy message");vs(0===r,`Expected versioned message with version 0 but found version ${r}`);const i={numRequiredSignatures:As(e),numReadonlySignedAccounts:As(e),numReadonlyUnsignedAccounts:As(e)},o=[],s=ws(e);for(let f=0;f<s;f++)o.push(new us(xs(e,0,as)));const a=Ln.encode(xs(e,0,as)),c=ws(e),u=[];for(let f=0;f<c;f++){const t=As(e),n=xs(e,0,ws(e)),r=ws(e),i=new Uint8Array(xs(e,0,r));u.push({programIdIndex:t,accountKeyIndexes:n,data:i})}const l=ws(e),h=[];for(let f=0;f<l;f++){const t=new us(xs(e,0,as)),n=xs(e,0,ws(e)),r=xs(e,0,ws(e));h.push({accountKey:t,writableIndexes:n,readonlyIndexes:r})}return new Bs({header:i,staticAccountKeys:o,recentBlockhash:a,compiledInstructions:u,addressTableLookups:h})}}const ks={deserializeMessageVersion(t){const e=t[0],n=127&e;return n===e?"legacy":n},deserialize:t=>{const e=ks.deserializeMessageVersion(t);if("legacy"===e)return _s.from(t);if(0===e)return Bs.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Ms=function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t}({});const Is=q.Buffer.alloc(64).fill(0);class Cs{constructor(t){this.keys=void 0,this.programId=void 0,this.data=q.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Ts{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{const{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(0===t.length)throw new Error("No instructions");return t.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new Cs(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e,n;if(this.nonceInfo?(t=this.nonceInfo.nonce,e=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");if(e.length,this.feePayer)n=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");n=this.signatures[0].publicKey}for(let p=0;p<e.length;p++)if(void 0===e[p].programId)throw new Error(`Transaction instruction index ${p} has undefined program id`);const r=[],i=[];e.forEach(t=>{t.keys.forEach(t=>{i.push({...t})});const e=t.programId.toString();r.includes(e)||r.push(e)}),r.forEach(t=>{i.push({pubkey:new us(t),isSigner:!1,isWritable:!1})});const o=[];i.forEach(t=>{const e=t.pubkey.toString(),n=o.findIndex(t=>t.pubkey.toString()===e);n>-1?(o[n].isWritable=o[n].isWritable||t.isWritable,o[n].isSigner=o[n].isSigner||t.isSigner):o.push(t)}),o.sort(function(t,e){if(t.isSigner!==e.isSigner)return t.isSigner?-1:1;if(t.isWritable!==e.isWritable)return t.isWritable?-1:1;return t.pubkey.toBase58().localeCompare(e.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})});const s=o.findIndex(t=>t.pubkey.equals(n));if(s>-1){const[t]=o.splice(s,1);t.isSigner=!0,t.isWritable=!0,o.unshift(t)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const p of this.signatures){const t=o.findIndex(t=>t.pubkey.equals(p.publicKey));if(!(t>-1))throw new Error(`unknown signer: ${p.publicKey.toString()}`);o[t].isSigner||(o[t].isSigner=!0)}let a=0,c=0,u=0;const l=[],h=[];o.forEach(({pubkey:t,isSigner:e,isWritable:n})=>{e?(l.push(t.toString()),a+=1,n||(c+=1)):(h.push(t.toString()),n||(u+=1))});const f=l.concat(h),d=e.map(t=>{const{data:e,programId:n}=t;return{programIdIndex:f.indexOf(n.toString()),accounts:t.keys.map(t=>f.indexOf(t.pubkey.toString())),data:Ln.encode(e)}});return d.forEach(t=>{vs(t.programIdIndex>=0),t.accounts.forEach(t=>vs(t>=0))}),new _s({header:{numRequiredSignatures:a,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:u},accountKeys:f,recentBlockhash:t,instructions:d})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);if(this.signatures.length===e.length){if(this.signatures.every((t,n)=>e[n].equals(t.publicKey)))return t}return this.signatures=e.map(t=>({signature:null,publicKey:t})),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(0===t.length)throw new Error("No signers");const e=new Set;this.signatures=t.filter(t=>{const n=t.toString();return!e.has(n)&&(e.add(n),!0)}).map(t=>({signature:null,publicKey:t}))}sign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const t=i.publicKey.toString();e.has(t)||(e.add(t),n.push(i))}this.signatures=n.map(t=>({signature:null,publicKey:t.publicKey}));const r=this._compile();this._partialSign(r,...n)}partialSign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const t=i.publicKey.toString();e.has(t)||(e.add(t),n.push(i))}const r=this._compile();this._partialSign(r,...n)}_partialSign(t,...e){const n=t.serialize();e.forEach(t=>{const e=es(n,t.secretKey);this._addSignature(t.publicKey,rs(e))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){vs(64===e.length);const n=this.signatures.findIndex(e=>t.equals(e.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=q.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const n={};for(const{signature:r,publicKey:i}of this.signatures)null===r?e&&(n.missing||(n.missing=[])).push(i):ns(r,t,i.toBytes())||(n.invalid||(n.invalid=[])).push(i);return n.invalid||n.missing?n:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),r=this.serializeMessage();if(n){const t=this._getMessageSignednessErrors(r,e);if(t){let e="Signature verification failed.";throw t.invalid&&(e+=`\nInvalid signature for public key${1===t.invalid.length?"":"(s)"} [\`${t.invalid.map(t=>t.toBase58()).join("`, `")}\`].`),t.missing&&(e+=`\nMissing signature for public key${1===t.missing.length?"":"(s)"} [\`${t.missing.map(t=>t.toBase58()).join("`, `")}\`].`),new Error(e)}}return this._serialize(r)}_serialize(t){const{signatures:e}=this,n=[];bs(n,e.length);const r=n.length+64*e.length+t.length,i=q.Buffer.alloc(r);return vs(e.length<256),q.Buffer.from(n).copy(i,0),e.forEach(({signature:t},e)=>{null!==t&&(vs(64===t.length,"signature has invalid length"),q.Buffer.from(t).copy(i,n.length+64*e))}),t.copy(i,n.length+64*e.length),vs(i.length<=ls,`Transaction too large: ${i.length} > 1232`),i}get keys(){return vs(1===this.instructions.length),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return vs(1===this.instructions.length),this.instructions[0].programId}get data(){return vs(1===this.instructions.length),this.instructions[0].data}static from(t){let e=[...t];const n=ws(e);let r=[];for(let i=0;i<n;i++){const t=xs(e,0,64);r.push(Ln.encode(q.Buffer.from(t)))}return Ts.populate(_s.from(e),r)}static populate(t,e=[]){const n=new Ts;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach((e,r)=>{const i={signature:e==Ln.encode(Is)?null:Ln.decode(e),publicKey:t.accountKeys[r]};n.signatures.push(i)}),t.instructions.forEach(e=>{const r=e.accounts.map(e=>{const r=t.accountKeys[e];return{pubkey:r,isSigner:n.signatures.some(t=>t.publicKey.toString()===r.toString())||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}});n.instructions.push(new Cs({keys:r,programId:t.accountKeys[e.programIdIndex],data:Ln.decode(e.data)}))}),n._message=t,n._json=n.toJSON(),n}}class Rs{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,void 0!==e)vs(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const e=[];for(let n=0;n<t.header.numRequiredSignatures;n++)e.push(new Uint8Array(64));this.signatures=e}this.message=t}serialize(){const t=this.message.serialize(),e=Array();bs(e,this.signatures.length);const n=oi([ai(e.length,"encodedSignaturesLength"),si(ms(),this.signatures.length,"signatures"),ai(t.length,"serializedMessage")]),r=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},r);return r.slice(0,i)}static deserialize(t){let e=[...t];const n=[],r=ws(e);for(let o=0;o<r;o++)n.push(new Uint8Array(xs(e,0,64)));const i=ks.deserialize(new Uint8Array(e));return new Rs(i,n)}sign(t){const e=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const r of t){const t=n.findIndex(t=>t.equals(r.publicKey));vs(t>=0,`Cannot sign with non signer key ${r.publicKey.toBase58()}`),this.signatures[t]=es(e,r.secretKey)}}addSignature(t,e){vs(64===e.byteLength,"Signature must be 64 bytes long");const n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(e=>e.equals(t));vs(n>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[n]=e}}new us("SysvarC1ock11111111111111111111111111111111"),new us("SysvarEpochSchedu1e111111111111111111111111"),new us("Sysvar1nstructions1111111111111111111111111"),new us("SysvarRecentB1ockHashes11111111111111111111"),new us("SysvarRent111111111111111111111111111111111"),new us("SysvarRewards111111111111111111111111111111"),new us("SysvarS1otHashes111111111111111111111111111"),new us("SysvarS1otHistory11111111111111111111111111"),new us("SysvarStakeHistory1111111111111111111111111");class Ls extends Error{constructor({action:t,signature:e,transactionMessage:n,logs:r}){const i=r?`Logs: \n${JSON.stringify(r.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let s;switch(t){case"send":s=`Transaction ${e} resulted in an error. \n${n}. `+i+o;break;case"simulate":s=`Simulation failed. \nMessage: ${n}. \n`+i+o;break;default:s=`Unknown action '${(t=>t)(t)}'`}super(s),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=n,this.transactionLogs=r||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(null==t||"object"!=typeof t||!("then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,n)=>{t.getTransaction(this.signature).then(t=>{if(t&&t.meta&&t.meta.logMessages){const n=t.meta.logMessages;this.transactionLogs=n,e(n)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}class Os extends Error{constructor({code:t,message:e,data:n},r){super(null!=r?`${r}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}}function Us(t){return new Promise(e=>setTimeout(e,t))}const Ns=ri("lamportsPerSignature"),Ps=oi([ni("version"),ni("state"),gs("authorizedPubkey"),gs("nonce"),oi([Ns],"feeCalculator")]);Ps.span;class zs{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Ps.decode(rs(t),0);return new zs({authorizedPubkey:new us(e.authorizedPubkey),nonce:new us(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function js(t){const e=ai(8,t),n=e.decode.bind(e),r=e.encode.bind(e),i=e,o=mi();return i.decode=(t,e)=>{const r=n(t,e);return o.decode(r)},i.encode=(t,e,n)=>{const i=o.encode(t);return r(i,e,n)},i}function Ds(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fs,qs;function Ks(){if(qs)return Fs;qs=1;var t=Object.prototype.toString,e=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};function n(r,i){var o,s,a,c,u,l,h;if(!0===r)return"true";if(!1===r)return"false";switch(typeof r){case"object":if(null===r)return null;if(r.toJSON&&"function"==typeof r.toJSON)return n(r.toJSON(),i);if("[object Array]"===(h=t.call(r))){for(a="[",s=r.length-1,o=0;o<s;o++)a+=n(r[o],!0)+",";return s>-1&&(a+=n(r[o],!0)),a+"]"}if("[object Object]"===h){for(s=(c=e(r).sort()).length,a="",o=0;o<s;)void 0!==(l=n(r[u=c[o]],!1))&&(a&&(a+=","),a+=JSON.stringify(u)+":"+l),o++;return"{"+a+"}"}return JSON.stringify(r);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return Fs=function(t){var e=n(t,!1);if(void 0!==e)return""+e}}Object.freeze({Create:{index:0,layout:oi([ni("instruction"),ii("lamports"),ii("space"),gs("programId")])},Assign:{index:1,layout:oi([ni("instruction"),gs("programId")])},Transfer:{index:2,layout:oi([ni("instruction"),js("lamports")])},CreateWithSeed:{index:3,layout:oi([ni("instruction"),gs("base"),ys("seed"),ii("lamports"),ii("space"),gs("programId")])},AdvanceNonceAccount:{index:4,layout:oi([ni("instruction")])},WithdrawNonceAccount:{index:5,layout:oi([ni("instruction"),ii("lamports")])},InitializeNonceAccount:{index:6,layout:oi([ni("instruction"),gs("authorized")])},AuthorizeNonceAccount:{index:7,layout:oi([ni("instruction"),gs("authorized")])},Allocate:{index:8,layout:oi([ni("instruction"),ii("space")])},AllocateWithSeed:{index:9,layout:oi([ni("instruction"),gs("base"),ys("seed"),ii("space"),gs("programId")])},AssignWithSeed:{index:10,layout:oi([ni("instruction"),gs("base"),ys("seed"),gs("programId")])},TransferWithSeed:{index:11,layout:oi([ni("instruction"),js("lamports"),ys("seed"),gs("programId")])},UpgradeNonceAccount:{index:12,layout:oi([ni("instruction")])}}),new us("11111111111111111111111111111111"),new us("BPFLoader2111111111111111111111111111111111");var Ws=Ds(Ks());function Hs(t){let e=0;for(;t>1;)t/=2,e++;return e}class $s{constructor(t,e,n,r,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=n,this.firstNormalEpoch=r,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const n=Hs(0===(e=t+32+1)?1:(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,1+(e|=e>>32)))-Hs(32)-1;return[n,t-(this.getSlotsInEpoch(n)-32)]}{const e=t-this.firstNormalSlot,n=Math.floor(e/this.slotsPerEpoch);return[this.firstNormalEpoch+n,e%this.slotsPerEpoch]}var e}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?32*(Math.pow(2,t)-1):(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Hs(32)):this.slotsPerEpoch}}var Vs=globalThis.fetch;class Zs extends Mo{constructor(t,e,n){super(t=>{const n=function(t,e){return new Bo(t,e)}(t,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return this.underlyingSocket="socket"in n?n.socket:n,n},t,e,n),this.underlyingSocket=void 0}call(...t){const e=this.underlyingSocket?.readyState;return 1===e?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){const e=this.underlyingSocket?.readyState;return 1===e?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}class Gs{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=function(t,e){let n;try{n=t.layout.decode(e)}catch(r){throw new Error("invalid instruction; "+r)}if(n.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${t.index}`);return n}(Ys,t),n=t.length-56;vs(n>=0,"lookup table is invalid"),vs(n%32==0,"lookup table is invalid");const r=n/32,{addresses:i}=oi([si(gs(),r,"addresses")]).decode(t.slice(56));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:0!==e.authority.length?new us(e.authority[0]):void 0,addresses:i.map(t=>new us(t))}}}const Ys={index:1,layout:oi([ni("typeIndex"),js("deactivationSlot"),ri("lastExtendedSlot"),ti("lastExtendedStartIndex"),ti(),si(gs(),Qr(ti(),-1),"authority")])},Js=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;const Xs=qi(Ti(us),Pi(),t=>new us(t)),Qs=zi([Pi(),Ri("base64")]),ta=qi(Ti(q.Buffer),Qs,t=>q.Buffer.from(t[0],"base64"));function ea(t){let e,n;if("string"==typeof t)e=t;else if(t){const{commitment:r,...i}=t;e=r,n=i}return{commitment:e,config:n}}function na(t){return t.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function ra(t){return Di([ji({jsonrpc:Ri("2.0"),id:Pi(),result:t}),ji({jsonrpc:Ri("2.0"),id:Pi(),error:ji({code:Fi(),message:Pi(),data:Ui(Mi("any",()=>!0))})})])}const ia=ra(Fi());function oa(t){return qi(ra(t),ia,e=>"error"in e?e:{...e,result:_i(e.result,t)})}function sa(t){return oa(ji({context:ji({slot:Oi()}),value:t}))}function aa(t){return ji({context:ji({slot:Oi()}),value:t})}function ca(t,e){return 0===t?new Bs({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new us(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Ln.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new _s(e)}const ua=ji({foundation:Oi(),foundationTerm:Oi(),initial:Oi(),taper:Oi(),terminal:Oi()}),la=oa(Ii(Li(ji({epoch:Oi(),effectiveSlot:Oi(),amount:Oi(),postBalance:Oi(),commission:Ui(Li(Oi()))})))),ha=Ii(ji({slot:Oi(),prioritizationFee:Oi()})),fa=ji({total:Oi(),validator:Oi(),foundation:Oi(),epoch:Oi()}),da=ji({epoch:Oi(),slotIndex:Oi(),slotsInEpoch:Oi(),absoluteSlot:Oi(),blockHeight:Ui(Oi()),transactionCount:Ui(Oi())}),pa=ji({slotsPerEpoch:Oi(),leaderScheduleSlotOffset:Oi(),warmup:Ci(),firstNormalEpoch:Oi(),firstNormalSlot:Oi()}),ga=Ni(Pi(),Ii(Oi())),ma=Li(Di([ji({}),Pi()])),ya=ji({err:ma}),wa=Ri("receivedSignature"),ba=ji({"solana-core":Pi(),"feature-set":Ui(Oi())}),va=ji({program:Pi(),programId:Xs,parsed:Fi()}),Ea=ji({programId:Xs,accounts:Ii(Xs),data:Pi()}),Sa=sa(ji({err:Li(Di([ji({}),Pi()])),logs:Li(Ii(Pi())),accounts:Ui(Li(Ii(Li(ji({executable:Ci(),owner:Pi(),lamports:Oi(),data:Ii(Pi()),rentEpoch:Ui(Oi())}))))),unitsConsumed:Ui(Oi()),returnData:Ui(Li(ji({programId:Pi(),data:zi([Pi(),Ri("base64")])}))),innerInstructions:Ui(Li(Ii(ji({index:Oi(),instructions:Ii(Di([va,Ea]))}))))})),Aa=sa(ji({byIdentity:Ni(Pi(),Ii(Oi())),range:ji({firstSlot:Oi(),lastSlot:Oi()})}));const xa=oa(ua),_a=oa(fa),Ba=oa(ha),ka=oa(da),Ma=oa(pa),Ia=oa(ga),Ca=oa(Oi()),Ta=sa(ji({total:Oi(),circulating:Oi(),nonCirculating:Oi(),nonCirculatingAccounts:Ii(Xs)})),Ra=ji({amount:Pi(),uiAmount:Li(Oi()),decimals:Oi(),uiAmountString:Ui(Pi())}),La=sa(Ii(ji({address:Xs,amount:Pi(),uiAmount:Li(Oi()),decimals:Oi(),uiAmountString:Ui(Pi())}))),Oa=sa(Ii(ji({pubkey:Xs,account:ji({executable:Ci(),owner:Xs,lamports:Oi(),data:ta,rentEpoch:Oi()})}))),Ua=ji({program:Pi(),parsed:Fi(),space:Oi()}),Na=sa(Ii(ji({pubkey:Xs,account:ji({executable:Ci(),owner:Xs,lamports:Oi(),data:Ua,rentEpoch:Oi()})}))),Pa=sa(Ii(ji({lamports:Oi(),address:Xs}))),za=ji({executable:Ci(),owner:Xs,lamports:Oi(),data:ta,rentEpoch:Oi()}),ja=ji({pubkey:Xs,account:za}),Da=qi(Di([Ti(q.Buffer),Ua]),Di([Qs,Ua]),t=>Array.isArray(t)?_i(t,ta):t),Fa=ji({executable:Ci(),owner:Xs,lamports:Oi(),data:Da,rentEpoch:Oi()}),qa=ji({pubkey:Xs,account:Fa}),Ka=ji({state:Di([Ri("active"),Ri("inactive"),Ri("activating"),Ri("deactivating")]),active:Oi(),inactive:Oi()}),Wa=oa(Ii(ji({signature:Pi(),slot:Oi(),err:ma,memo:Li(Pi()),blockTime:Ui(Li(Oi()))}))),Ha=oa(Ii(ji({signature:Pi(),slot:Oi(),err:ma,memo:Li(Pi()),blockTime:Ui(Li(Oi()))}))),$a=ji({subscription:Oi(),result:aa(za)}),Va=ji({pubkey:Xs,account:za}),Za=ji({subscription:Oi(),result:aa(Va)}),Ga=ji({parent:Oi(),slot:Oi(),root:Oi()}),Ya=ji({subscription:Oi(),result:Ga}),Ja=Di([ji({type:Di([Ri("firstShredReceived"),Ri("completed"),Ri("optimisticConfirmation"),Ri("root")]),slot:Oi(),timestamp:Oi()}),ji({type:Ri("createdBank"),parent:Oi(),slot:Oi(),timestamp:Oi()}),ji({type:Ri("frozen"),slot:Oi(),timestamp:Oi(),stats:ji({numTransactionEntries:Oi(),numSuccessfulTransactions:Oi(),numFailedTransactions:Oi(),maxTransactionsPerEntry:Oi()})}),ji({type:Ri("dead"),slot:Oi(),timestamp:Oi(),err:Pi()})]),Xa=ji({subscription:Oi(),result:Ja}),Qa=ji({subscription:Oi(),result:aa(Di([ya,wa]))}),tc=ji({subscription:Oi(),result:Oi()}),ec=ji({pubkey:Pi(),gossip:Li(Pi()),tpu:Li(Pi()),rpc:Li(Pi()),version:Li(Pi())}),nc=ji({votePubkey:Pi(),nodePubkey:Pi(),activatedStake:Oi(),epochVoteAccount:Ci(),epochCredits:Ii(zi([Oi(),Oi(),Oi()])),commission:Oi(),lastVote:Oi(),rootSlot:Li(Oi())}),rc=oa(ji({current:Ii(nc),delinquent:Ii(nc)})),ic=Di([Ri("processed"),Ri("confirmed"),Ri("finalized")]),oc=ji({slot:Oi(),confirmations:Li(Oi()),err:ma,confirmationStatus:Ui(ic)}),sc=sa(Ii(Li(oc))),ac=oa(Oi()),cc=ji({accountKey:Xs,writableIndexes:Ii(Oi()),readonlyIndexes:Ii(Oi())}),uc=ji({signatures:Ii(Pi()),message:ji({accountKeys:Ii(Pi()),header:ji({numRequiredSignatures:Oi(),numReadonlySignedAccounts:Oi(),numReadonlyUnsignedAccounts:Oi()}),instructions:Ii(ji({accounts:Ii(Oi()),data:Pi(),programIdIndex:Oi()})),recentBlockhash:Pi(),addressTableLookups:Ui(Ii(cc))})}),lc=ji({pubkey:Xs,signer:Ci(),writable:Ci(),source:Ui(Di([Ri("transaction"),Ri("lookupTable")]))}),hc=ji({accountKeys:Ii(lc),signatures:Ii(Pi())}),fc=ji({parsed:Fi(),program:Pi(),programId:Xs}),dc=ji({accounts:Ii(Xs),data:Pi(),programId:Xs}),pc=qi(Di([dc,fc]),Di([ji({parsed:Fi(),program:Pi(),programId:Pi()}),ji({accounts:Ii(Pi()),data:Pi(),programId:Pi()})]),t=>_i(t,"accounts"in t?dc:fc)),gc=ji({signatures:Ii(Pi()),message:ji({accountKeys:Ii(lc),instructions:Ii(pc),recentBlockhash:Pi(),addressTableLookups:Ui(Li(Ii(cc)))})}),mc=ji({accountIndex:Oi(),mint:Pi(),owner:Ui(Pi()),programId:Ui(Pi()),uiTokenAmount:Ra}),yc=ji({writable:Ii(Xs),readonly:Ii(Xs)}),wc=ji({err:ma,fee:Oi(),innerInstructions:Ui(Li(Ii(ji({index:Oi(),instructions:Ii(ji({accounts:Ii(Oi()),data:Pi(),programIdIndex:Oi()}))})))),preBalances:Ii(Oi()),postBalances:Ii(Oi()),logMessages:Ui(Li(Ii(Pi()))),preTokenBalances:Ui(Li(Ii(mc))),postTokenBalances:Ui(Li(Ii(mc))),loadedAddresses:Ui(yc),computeUnitsConsumed:Ui(Oi()),costUnits:Ui(Oi())}),bc=ji({err:ma,fee:Oi(),innerInstructions:Ui(Li(Ii(ji({index:Oi(),instructions:Ii(pc)})))),preBalances:Ii(Oi()),postBalances:Ii(Oi()),logMessages:Ui(Li(Ii(Pi()))),preTokenBalances:Ui(Li(Ii(mc))),postTokenBalances:Ui(Li(Ii(mc))),loadedAddresses:Ui(yc),computeUnitsConsumed:Ui(Oi()),costUnits:Ui(Oi())}),vc=Di([Ri(0),Ri("legacy")]),Ec=ji({pubkey:Pi(),lamports:Oi(),postBalance:Li(Oi()),rewardType:Li(Pi()),commission:Ui(Li(Oi()))}),Sc=oa(Li(ji({blockhash:Pi(),previousBlockhash:Pi(),parentSlot:Oi(),transactions:Ii(ji({transaction:uc,meta:Li(wc),version:Ui(vc)})),rewards:Ui(Ii(Ec)),blockTime:Li(Oi()),blockHeight:Li(Oi())}))),Ac=oa(Li(ji({blockhash:Pi(),previousBlockhash:Pi(),parentSlot:Oi(),rewards:Ui(Ii(Ec)),blockTime:Li(Oi()),blockHeight:Li(Oi())}))),xc=oa(Li(ji({blockhash:Pi(),previousBlockhash:Pi(),parentSlot:Oi(),transactions:Ii(ji({transaction:hc,meta:Li(wc),version:Ui(vc)})),rewards:Ui(Ii(Ec)),blockTime:Li(Oi()),blockHeight:Li(Oi())}))),_c=oa(Li(ji({blockhash:Pi(),previousBlockhash:Pi(),parentSlot:Oi(),transactions:Ii(ji({transaction:gc,meta:Li(bc),version:Ui(vc)})),rewards:Ui(Ii(Ec)),blockTime:Li(Oi()),blockHeight:Li(Oi())}))),Bc=oa(Li(ji({blockhash:Pi(),previousBlockhash:Pi(),parentSlot:Oi(),transactions:Ii(ji({transaction:hc,meta:Li(bc),version:Ui(vc)})),rewards:Ui(Ii(Ec)),blockTime:Li(Oi()),blockHeight:Li(Oi())}))),kc=oa(Li(ji({blockhash:Pi(),previousBlockhash:Pi(),parentSlot:Oi(),rewards:Ui(Ii(Ec)),blockTime:Li(Oi()),blockHeight:Li(Oi())}))),Mc=oa(Li(ji({blockhash:Pi(),previousBlockhash:Pi(),parentSlot:Oi(),transactions:Ii(ji({transaction:uc,meta:Li(wc)})),rewards:Ui(Ii(Ec)),blockTime:Li(Oi())}))),Ic=oa(Li(ji({blockhash:Pi(),previousBlockhash:Pi(),parentSlot:Oi(),signatures:Ii(Pi()),blockTime:Li(Oi())}))),Cc=oa(Li(ji({slot:Oi(),meta:Li(wc),blockTime:Ui(Li(Oi())),transaction:uc,version:Ui(vc)}))),Tc=oa(Li(ji({slot:Oi(),transaction:gc,meta:Li(bc),blockTime:Ui(Li(Oi())),version:Ui(vc)}))),Rc=sa(ji({blockhash:Pi(),lastValidBlockHeight:Oi()})),Lc=sa(Ci()),Oc=oa(Ii(ji({slot:Oi(),numTransactions:Oi(),numSlots:Oi(),samplePeriodSecs:Oi()}))),Uc=sa(Li(ji({feeCalculator:ji({lamportsPerSignature:Oi()})}))),Nc=oa(Pi()),Pc=oa(Pi()),zc=ji({err:ma,logs:Ii(Pi()),signature:Pi()}),jc=ji({result:aa(zc),subscription:Oi()}),Dc={"solana-client":"js/1.0.0-maintenance"};class Fc{constructor(t,e){let n,r,i,o,s,a;var c;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const t={};return async e=>{const{commitment:n,config:r}=ea(e),i=this._buildArgs([],n,void 0,r),o=Ws(i);return t[o]=t[o]??(async()=>{try{const t=_i(await this._rpcRequest("getBlockHeight",i),oa(Oi()));if("error"in t)throw new Os(t.error,"failed to get block height information");return t.result}finally{delete t[o]}})(),await t[o]}})(),e&&"string"==typeof e?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,n=e.wsEndpoint,r=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,s=e.disableRetryOnRateLimit,a=e.httpAgent),this._rpcEndpoint=function(t){if(!1===/^https?:/.test(t))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}(t),this._rpcWsEndpoint=n||function(t){const e=t.match(Js);if(null==e)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[n,r,i,o]=e,s=t.startsWith("https:")?"wss:":"ws:",a=null==i?null:parseInt(i.slice(1),10);return`${s}//${r}${null==a?"":`:${a+1}`}${o}`}(t),this._rpcClient=function(t,e,n,r,i){const o=n||Vs;let s;return r&&(s=async(t,e)=>{const n=await new Promise((n,i)=>{try{r(t,e,(t,e)=>n([t,e]))}catch(o){i(o)}});return await o(...n)}),new Ao(async(n,r)=>{const a={method:"POST",body:n,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},e||{},Dc)};try{let e,n=5,c=500;for(;e=s?await s(t,a):await o(t,a),429===e.status&&!0!==i&&(n-=1,0!==n);)await Us(c),c*=2;const u=await e.text();e.ok?r(null,u):r(new Error(`${e.status} ${e.statusText}: ${u}`))}catch(c){c instanceof Error&&r(c)}},{})}(t,r,i,o,s),this._rpcRequest=(c=this._rpcClient,(t,e)=>new Promise((n,r)=>{c.request(t,e,(t,e)=>{t?r(t):n(e)})})),this._rpcBatchRequest=function(t){return e=>new Promise((n,r)=>{0===e.length&&n([]);const i=e.map(e=>t.request(e.methodName,e.args));t.request(i,(t,e)=>{t?r(t):n(e)})})}(this._rpcClient),this._rpcWebSocket=new Zs(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:n,config:r}=ea(e),i=this._buildArgs([t.toBase58()],n,void 0,r),o=_i(await this._rpcRequest("getBalance",i),sa(Oi()));if("error"in o)throw new Os(o.error,`failed to get balance for ${t.toBase58()}`);return o.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(t=>t.value).catch(e=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+e)})}async getBlockTime(t){const e=_i(await this._rpcRequest("getBlockTime",[t]),oa(Li(Oi())));if("error"in e)throw new Os(e.error,`failed to get block time for slot ${t}`);return e.result}async getMinimumLedgerSlot(){const t=_i(await this._rpcRequest("minimumLedgerSlot",[]),oa(Oi()));if("error"in t)throw new Os(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const t=_i(await this._rpcRequest("getFirstAvailableBlock",[]),Ca);if("error"in t)throw new Os(t.error,"failed to get first available block");return t.result}async getSupply(t){let e={};e="string"==typeof t?{commitment:t}:t?{...t,commitment:t&&t.commitment||this.commitment}:{commitment:this.commitment};const n=_i(await this._rpcRequest("getSupply",[e]),Ta);if("error"in n)throw new Os(n.error,"failed to get supply");return n.result}async getTokenSupply(t,e){const n=this._buildArgs([t.toBase58()],e),r=_i(await this._rpcRequest("getTokenSupply",n),sa(Ra));if("error"in r)throw new Os(r.error,"failed to get token supply");return r.result}async getTokenAccountBalance(t,e){const n=this._buildArgs([t.toBase58()],e),r=_i(await this._rpcRequest("getTokenAccountBalance",n),sa(Ra));if("error"in r)throw new Os(r.error,"failed to get token account balance");return r.result}async getTokenAccountsByOwner(t,e,n){const{commitment:r,config:i}=ea(n);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const s=this._buildArgs(o,r,"base64",i),a=_i(await this._rpcRequest("getTokenAccountsByOwner",s),Oa);if("error"in a)throw new Os(a.error,`failed to get token accounts owned by account ${t.toBase58()}`);return a.result}async getParsedTokenAccountsByOwner(t,e,n){let r=[t.toBase58()];"mint"in e?r.push({mint:e.mint.toBase58()}):r.push({programId:e.programId.toBase58()});const i=this._buildArgs(r,n,"jsonParsed"),o=_i(await this._rpcRequest("getTokenAccountsByOwner",i),Na);if("error"in o)throw new Os(o.error,`failed to get token accounts owned by account ${t.toBase58()}`);return o.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},n=e.filter||e.commitment?[e]:[],r=_i(await this._rpcRequest("getLargestAccounts",n),Pa);if("error"in r)throw new Os(r.error,"failed to get largest accounts");return r.result}async getTokenLargestAccounts(t,e){const n=this._buildArgs([t.toBase58()],e),r=_i(await this._rpcRequest("getTokenLargestAccounts",n),La);if("error"in r)throw new Os(r.error,"failed to get token largest accounts");return r.result}async getAccountInfoAndContext(t,e){const{commitment:n,config:r}=ea(e),i=this._buildArgs([t.toBase58()],n,"base64",r),o=_i(await this._rpcRequest("getAccountInfo",i),sa(Li(za)));if("error"in o)throw new Os(o.error,`failed to get info about account ${t.toBase58()}`);return o.result}async getParsedAccountInfo(t,e){const{commitment:n,config:r}=ea(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",r),o=_i(await this._rpcRequest("getAccountInfo",i),sa(Li(Fa)));if("error"in o)throw new Os(o.error,`failed to get info about account ${t.toBase58()}`);return o.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,e){const{commitment:n,config:r}=ea(e),i=t.map(t=>t.toBase58()),o=this._buildArgs([i],n,"jsonParsed",r),s=_i(await this._rpcRequest("getMultipleAccounts",o),sa(Ii(Li(Fa))));if("error"in s)throw new Os(s.error,`failed to get info for accounts ${i}`);return s.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:n,config:r}=ea(e),i=t.map(t=>t.toBase58()),o=this._buildArgs([i],n,"base64",r),s=_i(await this._rpcRequest("getMultipleAccounts",o),sa(Ii(Li(za))));if("error"in s)throw new Os(s.error,`failed to get info for accounts ${i}`);return s.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,n){const{commitment:r,config:i}=ea(e),o=this._buildArgs([t.toBase58()],r,void 0,{...i,epoch:null!=n?n:i?.epoch}),s=_i(await this._rpcRequest("getStakeActivation",o),oa(Ka));if("error"in s)throw new Os(s.error,`failed to get Stake Activation ${t.toBase58()}`);return s.result}async getProgramAccounts(t,e){const{commitment:n,config:r}=ea(e),{encoding:i,...o}=r||{},s=this._buildArgs([t.toBase58()],n,i||"base64",{...o,...o.filters?{filters:na(o.filters)}:null}),a=await this._rpcRequest("getProgramAccounts",s),c=Ii(ja),u=!0===o.withContext?_i(a,sa(c)):_i(a,oa(c));if("error"in u)throw new Os(u.error,`failed to get accounts owned by program ${t.toBase58()}`);return u.result}async getParsedProgramAccounts(t,e){const{commitment:n,config:r}=ea(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",r),o=_i(await this._rpcRequest("getProgramAccounts",i),oa(Ii(qa)));if("error"in o)throw new Os(o.error,`failed to get accounts owned by program ${t.toBase58()}`);return o.result}async confirmTransaction(t,e){let n,r;if("string"==typeof t)n=t;else{const e=t;if(e.abortSignal?.aborted)return Promise.reject(e.abortSignal.reason);n=e.signature}try{r=Ln.decode(n)}catch(i){throw new Error("signature must be base58 encoded: "+n)}return vs(64===r.length,"signature has invalid length"),"string"==typeof t?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,n)=>{null!=t&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let n,r,i=!1;return{abortConfirmation:()=>{r&&(r(),r=void 0),null!=n&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:new Promise((o,s)=>{try{n=this.onSignature(e,(t,e)=>{n=void 0;const r={context:e,value:t};o({__type:Ms.PROCESSED,response:r})},t);const a=new Promise(t=>{null==n?t():r=this._onSubscriptionStateChange(n,e=>{"subscribed"===e&&t()})});(async()=>{if(await a,i)return;const n=await this.getSignatureStatus(e);if(i)return;if(null==n)return;const{context:r,value:c}=n;if(null!=c)if(c?.err)s(c.err);else{switch(t){case"confirmed":case"single":case"singleGossip":if("processed"===c.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===c.confirmationStatus||"confirmed"===c.confirmationStatus)return}i=!0,o({__type:Ms.PROCESSED,response:{context:r,value:c}})}})()}catch(a){s(a)}})}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:n,signature:r}}){let i=!1;const o=new Promise(e=>{const r=async()=>{try{return await this.getBlockHeight(t)}catch(e){return-1}};(async()=>{let t=await r();if(!i){for(;t<=n;){if(await Us(1e3),i)return;if(t=await r(),i)return}e({__type:Ms.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:s,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:t,signature:r}),c=this.getCancellationPromise(e);let u;try{const t=await Promise.race([c,a,o]);if(t.__type!==Ms.PROCESSED)throw new hs(r);u=t.response}finally{i=!0,s()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:n,nonceAccountPubkey:r,nonceValue:i,signature:o}}){let s=!1;const a=new Promise(e=>{let o=i,a=null;const c=async()=>{try{const{context:e,value:i}=await this.getNonceAndContext(r,{commitment:t,minContextSlot:n});return a=e.slot,i?.nonce}catch(e){return o}};(async()=>{if(o=await c(),!s)for(;;){if(i!==o)return void e({__type:Ms.NONCE_INVALID,slotInWhichNonceDidAdvance:a});if(await Us(2e3),s)return;if(o=await c(),s)return}})()}),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),l=this.getCancellationPromise(e);let h;try{const e=await Promise.race([l,u,a]);if(e.__type===Ms.PROCESSED)h=e.response;else{let r;for(;;){const t=await this.getSignatureStatus(o);if(null==t)break;if(!(t.context.slot<(e.slotInWhichNonceDidAdvance??n))){r=t;break}await Us(400)}if(!r?.value)throw new ds(o);{const e=t||"finalized",{confirmationStatus:n}=r.value;switch(e){case"processed":case"recent":if("processed"!==n&&"confirmed"!==n&&"finalized"!==n)throw new ds(o);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==n&&"finalized"!==n)throw new ds(o);break;case"finalized":case"max":case"root":if("finalized"!==n)throw new ds(o)}h={context:r.context,value:{err:r.value.err}}}}}finally{s=!0,c()}return h}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let n;const r=new Promise(e=>{let r=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":r=this._confirmTransactionInitialTimeout||3e4}n=setTimeout(()=>e({__type:Ms.TIMED_OUT,timeoutMs:r}),r)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let s;try{const t=await Promise.race([o,r]);if(t.__type!==Ms.PROCESSED)throw new fs(e,t.timeoutMs/1e3);s=t.response}finally{clearTimeout(n),i()}return s}async getClusterNodes(){const t=_i(await this._rpcRequest("getClusterNodes",[]),oa(Ii(ec)));if("error"in t)throw new Os(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(t){const e=this._buildArgs([],t),n=_i(await this._rpcRequest("getVoteAccounts",e),rc);if("error"in n)throw new Os(n.error,"failed to get vote accounts");return n.result}async getSlot(t){const{commitment:e,config:n}=ea(t),r=this._buildArgs([],e,void 0,n),i=_i(await this._rpcRequest("getSlot",r),oa(Oi()));if("error"in i)throw new Os(i.error,"failed to get slot");return i.result}async getSlotLeader(t){const{commitment:e,config:n}=ea(t),r=this._buildArgs([],e,void 0,n),i=_i(await this._rpcRequest("getSlotLeader",r),oa(Pi()));if("error"in i)throw new Os(i.error,"failed to get slot leader");return i.result}async getSlotLeaders(t,e){const n=[t,e],r=_i(await this._rpcRequest("getSlotLeaders",n),oa(Ii(Xs)));if("error"in r)throw new Os(r.error,"failed to get slot leaders");return r.result}async getSignatureStatus(t,e){const{context:n,value:r}=await this.getSignatureStatuses([t],e);vs(1===r.length);return{context:n,value:r[0]}}async getSignatureStatuses(t,e){const n=[t];e&&n.push(e);const r=_i(await this._rpcRequest("getSignatureStatuses",n),sc);if("error"in r)throw new Os(r.error,"failed to get signature status");return r.result}async getTransactionCount(t){const{commitment:e,config:n}=ea(t),r=this._buildArgs([],e,void 0,n),i=_i(await this._rpcRequest("getTransactionCount",r),oa(Oi()));if("error"in i)throw new Os(i.error,"failed to get transaction count");return i.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),n=_i(await this._rpcRequest("getInflationGovernor",e),xa);if("error"in n)throw new Os(n.error,"failed to get inflation");return n.result}async getInflationReward(t,e,n){const{commitment:r,config:i}=ea(n),o=this._buildArgs([t.map(t=>t.toBase58())],r,void 0,{...i,epoch:null!=e?e:i?.epoch}),s=_i(await this._rpcRequest("getInflationReward",o),la);if("error"in s)throw new Os(s.error,"failed to get inflation reward");return s.result}async getInflationRate(){const t=_i(await this._rpcRequest("getInflationRate",[]),_a);if("error"in t)throw new Os(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(t){const{commitment:e,config:n}=ea(t),r=this._buildArgs([],e,void 0,n),i=_i(await this._rpcRequest("getEpochInfo",r),ka);if("error"in i)throw new Os(i.error,"failed to get epoch info");return i.result}async getEpochSchedule(){const t=_i(await this._rpcRequest("getEpochSchedule",[]),Ma);if("error"in t)throw new Os(t.error,"failed to get epoch schedule");const e=t.result;return new $s(e.slotsPerEpoch,e.leaderScheduleSlotOffset,e.warmup,e.firstNormalEpoch,e.firstNormalSlot)}async getLeaderSchedule(){const t=_i(await this._rpcRequest("getLeaderSchedule",[]),Ia);if("error"in t)throw new Os(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(t,e){const n=this._buildArgs([t],e),r=_i(await this._rpcRequest("getMinimumBalanceForRentExemption",n),ac);return"error"in r?0:r.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON:()=>({})}}}}async getRecentPerformanceSamples(t){const e=_i(await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),Oc);if("error"in e)throw new Os(e.error,"failed to get recent performance samples");return e.result}async getFeeCalculatorForBlockhash(t,e){const n=this._buildArgs([t],e),r=_i(await this._rpcRequest("getFeeCalculatorForBlockhash",n),Uc);if("error"in r)throw new Os(r.error,"failed to get fee calculator");const{context:i,value:o}=r.result;return{context:i,value:null!==o?o.feeCalculator:null}}async getFeeForMessage(t,e){const n=rs(t.serialize()).toString("base64"),r=this._buildArgs([n],e),i=_i(await this._rpcRequest("getFeeForMessage",r),sa(Li(Oi())));if("error"in i)throw new Os(i.error,"failed to get fee for message");if(null===i.result)throw new Error("invalid blockhash");return i.result}async getRecentPrioritizationFees(t){const e=t?.lockedWritableAccounts?.map(t=>t.toBase58()),n=e?.length?[e]:[],r=_i(await this._rpcRequest("getRecentPrioritizationFees",n),Ba);if("error"in r)throw new Os(r.error,"failed to get recent prioritization fees");return r.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:n}=ea(t),r=this._buildArgs([],e,void 0,n),i=_i(await this._rpcRequest("getLatestBlockhash",r),Rc);if("error"in i)throw new Os(i.error,"failed to get latest blockhash");return i.result}async isBlockhashValid(t,e){const{commitment:n,config:r}=ea(e),i=this._buildArgs([t],n,void 0,r),o=_i(await this._rpcRequest("isBlockhashValid",i),Lc);if("error"in o)throw new Os(o.error,"failed to determine if the blockhash `"+t+"`is valid");return o.result}async getVersion(){const t=_i(await this._rpcRequest("getVersion",[]),oa(ba));if("error"in t)throw new Os(t.error,"failed to get version");return t.result}async getGenesisHash(){const t=_i(await this._rpcRequest("getGenesisHash",[]),oa(Pi()));if("error"in t)throw new Os(t.error,"failed to get genesis hash");return t.result}async getBlock(t,e){const{commitment:n,config:r}=ea(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,r),o=await this._rpcRequest("getBlock",i);try{switch(r?.transactionDetails){case"accounts":{const t=_i(o,xc);if("error"in t)throw t.error;return t.result}case"none":{const t=_i(o,Ac);if("error"in t)throw t.error;return t.result}default:{const t=_i(o,Sc);if("error"in t)throw t.error;const{result:e}=t;return e?{...e,transactions:e.transactions.map(({transaction:t,meta:e,version:n})=>({meta:e,transaction:{...t,message:ca(n,t.message)},version:n}))}:null}}}catch(s){throw new Os(s,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:n,config:r}=ea(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",r),o=await this._rpcRequest("getBlock",i);try{switch(r?.transactionDetails){case"accounts":{const t=_i(o,Bc);if("error"in t)throw t.error;return t.result}case"none":{const t=_i(o,kc);if("error"in t)throw t.error;return t.result}default:{const t=_i(o,_c);if("error"in t)throw t.error;return t.result}}}catch(s){throw new Os(s,"failed to get block")}}async getBlockProduction(t){let e,n;if("string"==typeof t)n=t;else if(t){const{commitment:r,...i}=t;n=r,e=i}const r=this._buildArgs([],n,"base64",e),i=_i(await this._rpcRequest("getBlockProduction",r),Aa);if("error"in i)throw new Os(i.error,"failed to get block production information");return i.result}async getTransaction(t,e){const{commitment:n,config:r}=ea(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,r),o=_i(await this._rpcRequest("getTransaction",i),Cc);if("error"in o)throw new Os(o.error,"failed to get transaction");const s=o.result;return s?{...s,transaction:{...s.transaction,message:ca(s.version,s.transaction.message)}}:s}async getParsedTransaction(t,e){const{commitment:n,config:r}=ea(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",r),o=_i(await this._rpcRequest("getTransaction",i),Tc);if("error"in o)throw new Os(o.error,"failed to get transaction");return o.result}async getParsedTransactions(t,e){const{commitment:n,config:r}=ea(e),i=t.map(t=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",r)}));return(await this._rpcBatchRequest(i)).map(t=>{const e=_i(t,Tc);if("error"in e)throw new Os(e.error,"failed to get transactions");return e.result})}async getTransactions(t,e){const{commitment:n,config:r}=ea(e),i=t.map(t=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([t],n,void 0,r)}));return(await this._rpcBatchRequest(i)).map(t=>{const e=_i(t,Cc);if("error"in e)throw new Os(e.error,"failed to get transactions");const n=e.result;return n?{...n,transaction:{...n.transaction,message:ca(n.version,n.transaction.message)}}:n})}async getConfirmedBlock(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),r=_i(await this._rpcRequest("getBlock",n),Mc);if("error"in r)throw new Os(r.error,"failed to get confirmed block");const i=r.result;if(!i)throw new Error("Confirmed block "+t+" not found");const o={...i,transactions:i.transactions.map(({transaction:t,meta:e})=>{const n=new _s(t.message);return{meta:e,transaction:{...t,message:n}}})};return{...o,transactions:o.transactions.map(({transaction:t,meta:e})=>({meta:e,transaction:Ts.populate(t.message,t.signatures)}))}}async getBlocks(t,e,n){const r=this._buildArgsAtLeastConfirmed(void 0!==e?[t,e]:[t],n),i=_i(await this._rpcRequest("getBlocks",r),oa(Ii(Oi())));if("error"in i)throw new Os(i.error,"failed to get blocks");return i.result}async getBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),r=_i(await this._rpcRequest("getBlock",n),Ic);if("error"in r)throw new Os(r.error,"failed to get block");const i=r.result;if(!i)throw new Error("Block "+t+" not found");return i}async getConfirmedBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),r=_i(await this._rpcRequest("getBlock",n),Ic);if("error"in r)throw new Os(r.error,"failed to get confirmed block");const i=r.result;if(!i)throw new Error("Confirmed block "+t+" not found");return i}async getConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),r=_i(await this._rpcRequest("getTransaction",n),Cc);if("error"in r)throw new Os(r.error,"failed to get transaction");const i=r.result;if(!i)return i;const o=new _s(i.transaction.message),s=i.transaction.signatures;return{...i,transaction:Ts.populate(o,s)}}async getParsedConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),r=_i(await this._rpcRequest("getTransaction",n),Tc);if("error"in r)throw new Os(r.error,"failed to get confirmed transaction");return r.result}async getParsedConfirmedTransactions(t,e){const n=t.map(t=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([t],e,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(t=>{const e=_i(t,Tc);if("error"in e)throw new Os(e.error,"failed to get confirmed transactions");return e.result})}async getConfirmedSignaturesForAddress(t,e,n){let r={},i=await this.getFirstAvailableBlock();for(;!("until"in r)&&!(--e<=0||e<i);)try{const t=await this.getConfirmedBlockSignatures(e,"finalized");t.signatures.length>0&&(r.until=t.signatures[t.signatures.length-1].toString())}catch(s){if(s instanceof Error&&s.message.includes("skipped"))continue;throw s}let o=await this.getSlot("finalized");for(;!("before"in r||++n>o);)try{const t=await this.getConfirmedBlockSignatures(n);t.signatures.length>0&&(r.before=t.signatures[t.signatures.length-1].toString())}catch(s){if(s instanceof Error&&s.message.includes("skipped"))continue;throw s}return(await this.getConfirmedSignaturesForAddress2(t,r)).map(t=>t.signature)}async getConfirmedSignaturesForAddress2(t,e,n){const r=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=_i(await this._rpcRequest("getConfirmedSignaturesForAddress2",r),Wa);if("error"in i)throw new Os(i.error,"failed to get confirmed signatures for address");return i.result}async getSignaturesForAddress(t,e,n){const r=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=_i(await this._rpcRequest("getSignaturesForAddress",r),Ha);if("error"in i)throw new Os(i.error,"failed to get signatures for address");return i.result}async getAddressLookupTable(t,e){const{context:n,value:r}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==r&&(i=new Gs({key:t,state:Gs.deserialize(r.data)})),{context:n,value:i}}async getNonceAndContext(t,e){const{context:n,value:r}=await this.getAccountInfoAndContext(t,e);let i=null;return null!==r&&(i=zs.fromAccountData(r.data)),{context:n,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(t=>t.value).catch(e=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)})}async requestAirdrop(t,e){const n=_i(await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),Nc);if("error"in n)throw new Os(n.error,`airdrop to ${t.toBase58()} failed`);return n.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Us(100);const t=Date.now()-this._blockhashInfo.lastFetch>=3e4;if(null!==this._blockhashInfo.latestBlockhash&&!t)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,n=e?e.blockhash:null;for(let r=0;r<50;r++){const t=await this.getLatestBlockhash("finalized");if(n!==t.blockhash)return this._blockhashInfo={latestBlockhash:t,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},t;await Us(200)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:n}=ea(t),r=this._buildArgs([],e,"base64",n),i=_i(await this._rpcRequest("getStakeMinimumDelegation",r),sa(Oi()));if("error"in i)throw new Os(i.error,"failed to get stake minimum delegation");return i.result}async simulateTransaction(t,e,n){if("message"in t){const r=t.serialize(),i=q.Buffer.from(r).toString("base64");if(Array.isArray(e)||void 0!==n)throw new Error("Invalid arguments");const o=e||{};o.encoding="base64","commitment"in o||(o.commitment=this.commitment),e&&"object"==typeof e&&"innerInstructions"in e&&(o.innerInstructions=e.innerInstructions);const s=[i,o],a=_i(await this._rpcRequest("simulateTransaction",s),Sa);if("error"in a)throw new Error("failed to simulate transaction: "+a.error.message);return a.result}let r;if(t instanceof Ts){let e=t;r=new Ts,r.feePayer=e.feePayer,r.instructions=t.instructions,r.nonceInfo=e.nonceInfo,r.signatures=e.signatures}else r=Ts.populate(t),r._message=r._json=void 0;if(void 0!==e&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(r.nonceInfo&&i)r.sign(...i);else{let t=this._disableBlockhashCaching;for(;;){const e=await this._blockhashWithExpiryBlockHeight(t);if(r.lastValidBlockHeight=e.lastValidBlockHeight,r.recentBlockhash=e.blockhash,!i)break;if(r.sign(...i),!r.signature)throw new Error("!signature");const n=r.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(n)&&!this._blockhashInfo.transactionSignatures.includes(n)){this._blockhashInfo.simulatedSignatures.push(n);break}t=!0}}const o=r._compile(),s=o.serialize(),a=r._serialize(s).toString("base64"),c={encoding:"base64",commitment:this.commitment};if(n){const t=(Array.isArray(n)?n:o.nonProgramIds()).map(t=>t.toBase58());c.accounts={encoding:"base64",addresses:t}}i&&(c.sigVerify=!0),e&&"object"==typeof e&&"innerInstructions"in e&&(c.innerInstructions=e.innerInstructions);const u=[a,c],l=_i(await this._rpcRequest("simulateTransaction",u),Sa);if("error"in l){let t;if("data"in l.error&&(t=l.error.data.logs,t&&Array.isArray(t))){const e="\n    ";t.join(e)}throw new Ls({action:"simulate",signature:"",transactionMessage:l.error.message,logs:t})}return l.result}async sendTransaction(t,e,n){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const n=t.serialize();return await this.sendRawTransaction(n,e)}if(void 0===e||!Array.isArray(e))throw new Error("Invalid arguments");const r=e;if(t.nonceInfo)t.sign(...r);else{let e=this._disableBlockhashCaching;for(;;){const n=await this._blockhashWithExpiryBlockHeight(e);if(t.lastValidBlockHeight=n.lastValidBlockHeight,t.recentBlockhash=n.blockhash,t.sign(...r),!t.signature)throw new Error("!signature");const i=t.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.transactionSignatures.push(i);break}e=!0}}const i=t.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(t,e){const n=rs(t).toString("base64");return await this.sendEncodedTransaction(n,e)}async sendEncodedTransaction(t,e){const n={encoding:"base64"},r=e&&e.skipPreflight,i=!0===r?"processed":e&&e.preflightCommitment||this.commitment;e&&null!=e.maxRetries&&(n.maxRetries=e.maxRetries),e&&null!=e.minContextSlot&&(n.minContextSlot=e.minContextSlot),r&&(n.skipPreflight=r),i&&(n.preflightCommitment=i);const o=[t,n],s=_i(await this._rpcRequest("sendTransaction",o),Pc);if("error"in s){let t;throw"data"in s.error&&(t=s.error.data.logs),new Ls({action:r?"send":"simulate",signature:"",transactionMessage:s.error.message,logs:t})}return s.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1}_wsOnClose(t){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==t?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,e])=>{this._setSubscription(t,{...e,state:"pending"})})):this._updateSubscriptions()}_setSubscription(t,e){const n=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const n=this._subscriptionStateChangeCallbacksByHash[t];n&&n.forEach(t=>{try{t(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var n;const r=this._subscriptionHashByClientSubscriptionId[t];if(null==r)return()=>{};const i=(n=this._subscriptionStateChangeCallbacksByHash)[r]||(n[r]=new Set);return i.add(e),()=>{i.delete(e),0===i.size&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(t){Error}},500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async t=>{const n=this._subscriptionsByHash[t];if(void 0!==n)switch(n.state){case"pending":case"unsubscribed":if(0===n.callbacks.size)return delete this._subscriptionsByHash[t],"unsubscribed"===n.state&&delete this._subscriptionCallbacksByServerSubscriptionId[n.serverSubscriptionId],void(await this._updateSubscriptions());await(async()=>{const{args:r,method:i}=n;try{this._setSubscription(t,{...n,state:"subscribing"});const e=await this._rpcWebSocket.call(i,r);this._setSubscription(t,{...n,serverSubscriptionId:e,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[e]=n.callbacks,await this._updateSubscriptions()}catch(o){if(!e())return;this._setSubscription(t,{...n,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===n.callbacks.size&&await(async()=>{const{serverSubscriptionId:r,unsubscribeMethod:i}=n;if(this._subscriptionsAutoDisposedByRpc.has(r))this._subscriptionsAutoDisposedByRpc.delete(r);else{this._setSubscription(t,{...n,state:"unsubscribing"}),this._setSubscription(t,{...n,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[r])}catch(o){if(Error,!e())return;return this._setSubscription(t,{...n,state:"subscribed"}),void(await this._updateSubscriptions())}}this._setSubscription(t,{...n,state:"unsubscribed"}),await this._updateSubscriptions()})()}}))}_handleServerNotification(t,e){const n=this._subscriptionCallbacksByServerSubscriptionId[t];void 0!==n&&n.forEach(t=>{try{t(...e)}catch(n){}})}_wsOnAccountNotification(t){const{result:e,subscription:n}=_i(t,$a);this._handleServerNotification(n,[e.value,e.context])}_makeSubscription(t,e){const n=this._nextClientSubscriptionId++,r=Ws([t.method,e]),i=this._subscriptionsByHash[r];return void 0===i?this._subscriptionsByHash[r]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=r,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const e=this._subscriptionsByHash[r];vs(void 0!==e,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),e.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,e,n){const{commitment:r,config:i}=ea(n),o=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:n}=_i(t,Za);this._handleServerNotification(n,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,n,r){const{commitment:i,config:o}=ea(n),s=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",o||(r?{filters:na(r)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},s)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,n){const r=this._buildArgs(["object"==typeof t?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},r)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:n}=_i(t,jc);this._handleServerNotification(n,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:n}=_i(t,Ya);this._handleServerNotification(n,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:n}=_i(t,Xa);this._handleServerNotification(n,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n&&await n()}_buildArgs(t,e,n,r){const i=e||this._commitment;if(i||n||r){let e={};n&&(e.encoding=n),i&&(e.commitment=i),r&&(e=Object.assign(e,r)),t.push(e)}return t}_buildArgsAtLeastConfirmed(t,e,n,r){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,n,r)}_wsOnSignatureNotification(t){const{result:e,subscription:n}=_i(t,Qa);"receivedSignature"!==e.value&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,"receivedSignature"===e.value?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,n){const r=this._buildArgs([t],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(t,n)=>{if("status"===t.type){e(t.result,n);try{this.removeSignatureListener(i)}catch(r){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},r);return i}onSignatureWithOptions(t,e,n){const{commitment:r,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([t],r,void 0,i),s=this._makeSubscription({callback:(t,n)=>{e(t,n);try{this.removeSignatureListener(s)}catch(r){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return s}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:n}=_i(t,tc);this._handleServerNotification(n,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}var qc;Object.freeze({CreateLookupTable:{index:0,layout:oi([ni("instruction"),js("recentSlot"),ti("bumpSeed")])},FreezeLookupTable:{index:1,layout:oi([ni("instruction")])},ExtendLookupTable:{index:2,layout:oi([ni("instruction"),js(),si(gs(),Qr(ni(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:oi([ni("instruction")])},CloseLookupTable:{index:4,layout:oi([ni("instruction")])}}),new us("AddressLookupTab1e1111111111111111111111111"),Object.freeze({RequestUnits:{index:0,layout:oi([ti("instruction"),ni("units"),ni("additionalFee")])},RequestHeapFrame:{index:1,layout:oi([ti("instruction"),ni("bytes")])},SetComputeUnitLimit:{index:2,layout:oi([ti("instruction"),ni("units")])},SetComputeUnitPrice:{index:3,layout:oi([ti("instruction"),js("microLamports")])}}),new us("ComputeBudget111111111111111111111111111111"),oi([ti("numSignatures"),ti("padding"),ei("signatureOffset"),ei("signatureInstructionIndex"),ei("publicKeyOffset"),ei("publicKeyInstructionIndex"),ei("messageDataOffset"),ei("messageDataSize"),ei("messageInstructionIndex")]),new us("Ed25519SigVerify111111111111111111111111111"),Qo.utils.isValidPrivateKey,oi([ti("numSignatures"),ei("signatureOffset"),ti("signatureInstructionIndex"),ei("ethAddressOffset"),ti("ethAddressInstructionIndex"),ei("messageDataOffset"),ei("messageDataSize"),ti("messageInstructionIndex"),ai(20,"ethAddress"),ai(64,"signature"),ti("recoveryId")]),new us("KeccakSecp256k11111111111111111111111111111"),new us("StakeConfig11111111111111111111111111111111");class Kc{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}}qc=Kc,Kc.default=new qc(0,0,us.default),Object.freeze({Initialize:{index:0,layout:oi([ni("instruction"),((t="authorized")=>oi([gs("staker"),gs("withdrawer")],t))(),((t="lockup")=>oi([ii("unixTimestamp"),ii("epoch"),gs("custodian")],t))()])},Authorize:{index:1,layout:oi([ni("instruction"),gs("newAuthorized"),ni("stakeAuthorizationType")])},Delegate:{index:2,layout:oi([ni("instruction")])},Split:{index:3,layout:oi([ni("instruction"),ii("lamports")])},Withdraw:{index:4,layout:oi([ni("instruction"),ii("lamports")])},Deactivate:{index:5,layout:oi([ni("instruction")])},Merge:{index:7,layout:oi([ni("instruction")])},AuthorizeWithSeed:{index:8,layout:oi([ni("instruction"),gs("newAuthorized"),ni("stakeAuthorizationType"),ys("authoritySeed"),gs("authorityOwner")])}}),new us("Stake11111111111111111111111111111111111111"),Object.freeze({InitializeAccount:{index:0,layout:oi([ni("instruction"),((t="voteInit")=>oi([gs("nodePubkey"),gs("authorizedVoter"),gs("authorizedWithdrawer"),ti("commission")],t))()])},Authorize:{index:1,layout:oi([ni("instruction"),gs("newAuthorized"),ni("voteAuthorizationType")])},Withdraw:{index:3,layout:oi([ni("instruction"),ii("lamports")])},UpdateValidatorIdentity:{index:4,layout:oi([ni("instruction")])},AuthorizeWithSeed:{index:10,layout:oi([ni("instruction"),((t="voteAuthorizeWithSeedArgs")=>oi([ni("voteAuthorizationType"),gs("currentAuthorityDerivedKeyOwnerPubkey"),ys("currentAuthorityDerivedKeySeed"),gs("newAuthorized")],t))()])}}),new us("Vote111111111111111111111111111111111111111"),new us("Va1idator1nfo111111111111111111111111111111"),ji({name:Pi(),website:Ui(Pi()),details:Ui(Pi()),iconUrl:Ui(Pi()),keybaseUsername:Ui(Pi())}),new us("Vote111111111111111111111111111111111111111"),oi([gs("nodePubkey"),gs("authorizedWithdrawer"),ti("commission"),ri(),si(oi([ri("slot"),ni("confirmationCount")]),Qr(ni(),-8),"votes"),ti("rootSlotValid"),ri("rootSlot"),ri(),si(oi([ri("epoch"),gs("authorizedVoter")]),Qr(ni(),-8),"authorizedVoters"),oi([si(oi([gs("authorizedPubkey"),ri("epochOfLastAuthorizedSwitch"),ri("targetEpoch")]),32,"buf"),ri("idx"),ti("isEmpty")],"priorVoters"),ri(),si(oi([ri("epoch"),ri("credits"),ri("prevCredits")]),Qr(ni(),-8),"epochCredits"),oi([ri("slot"),ri("timestamp")],"lastTimestamp")]);const Wc={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Hc(t,e){const n="https";if(!t)return Wc[n].devnet;const r=Wc[n][t];if(!r)throw new Error(`Unknown ${n} cluster: ${t}`);return r}const $c=o.createContext({});const Vc=({children:t,endpoint:e,config:n={commitment:"confirmed"}})=>{const r=o.useMemo(()=>new Fc(e,n),[e,n]);return s.createElement($c.Provider,{value:{connection:r}},t)};class Zc extends l{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const Gc=[],Yc={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){Jc("call","select")},connect:()=>Promise.reject(Jc("call","connect")),disconnect:()=>Promise.reject(Jc("call","disconnect")),sendTransaction:()=>Promise.reject(Jc("call","sendTransaction")),signTransaction:()=>Promise.reject(Jc("call","signTransaction")),signAllTransactions:()=>Promise.reject(Jc("call","signAllTransactions")),signMessage:()=>Promise.reject(Jc("call","signMessage")),signIn:()=>Promise.reject(Jc("call","signIn"))};function Jc(t,e){return new Error(`You have tried to ${t} "${e}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`)}Object.defineProperty(Yc,"wallets",{get:()=>(Jc("read","wallets"),Gc)}),Object.defineProperty(Yc,"wallet",{get:()=>(Jc("read","wallet"),null)}),Object.defineProperty(Yc,"publicKey",{get:()=>(Jc("read","publicKey"),null)});const Xc=o.createContext(Yc);var Qc={},tu={};let eu;const nu=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];tu.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return 4*t+17},tu.getSymbolTotalCodewords=function(t){return nu[t]},tu.getBCHDigit=function(t){let e=0;for(;0!==t;)e++,t>>>=1;return e},tu.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');eu=t},tu.isKanjiModeEnabled=function(){return void 0!==eu},tu.toSJIS=function(t){return eu(t)};var ru,iu={};function ou(){this.buffer=[],this.length=0}(ru=iu).L={bit:1},ru.M={bit:0},ru.Q={bit:3},ru.H={bit:2},ru.isValid=function(t){return t&&void 0!==t.bit&&t.bit>=0&&t.bit<4},ru.from=function(t,e){if(ru.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return ru.L;case"m":case"medium":return ru.M;case"q":case"quartile":return ru.Q;case"h":case"high":return ru.H;default:throw new Error("Unknown EC Level: "+t)}}(t)}catch(n){return e}},ou.prototype={get:function(t){const e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(let n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var su=ou;function au(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}au.prototype.set=function(t,e,n,r){const i=t*this.size+e;this.data[i]=n,r&&(this.reservedBit[i]=!0)},au.prototype.get=function(t,e){return this.data[t*this.size+e]},au.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n},au.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var cu=au,uu={};!function(t){const e=tu.getSymbolSize;t.getRowColCoords=function(t){if(1===t)return[];const n=Math.floor(t/7)+2,r=e(t),i=145===r?26:2*Math.ceil((r-13)/(2*n-2)),o=[r-7];for(let e=1;e<n-1;e++)o[e]=o[e-1]-i;return o.push(6),o.reverse()},t.getPositions=function(e){const n=[],r=t.getRowColCoords(e),i=r.length;for(let t=0;t<i;t++)for(let e=0;e<i;e++)0===t&&0===e||0===t&&e===i-1||t===i-1&&0===e||n.push([r[t],r[e]]);return n}}(uu);var lu={};const hu=tu.getSymbolSize;lu.getPositions=function(t){const e=hu(t);return[[0,0],[e-7,0],[0,e-7]]};var fu={};!function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e=3,n=3,r=40,i=10;function o(e,n,r){switch(e){case t.Patterns.PATTERN000:return(n+r)%2==0;case t.Patterns.PATTERN001:return n%2==0;case t.Patterns.PATTERN010:return r%3==0;case t.Patterns.PATTERN011:return(n+r)%3==0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2==0;case t.Patterns.PATTERN101:return n*r%2+n*r%3==0;case t.Patterns.PATTERN110:return(n*r%2+n*r%3)%2==0;case t.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(t){const n=t.size;let r=0,i=0,o=0,s=null,a=null;for(let c=0;c<n;c++){i=o=0,s=a=null;for(let u=0;u<n;u++){let n=t.get(c,u);n===s?i++:(i>=5&&(r+=e+(i-5)),s=n,i=1),n=t.get(u,c),n===a?o++:(o>=5&&(r+=e+(o-5)),a=n,o=1)}i>=5&&(r+=e+(i-5)),o>=5&&(r+=e+(o-5))}return r},t.getPenaltyN2=function(t){const e=t.size;let r=0;for(let n=0;n<e-1;n++)for(let i=0;i<e-1;i++){const e=t.get(n,i)+t.get(n,i+1)+t.get(n+1,i)+t.get(n+1,i+1);4!==e&&0!==e||r++}return r*n},t.getPenaltyN3=function(t){const e=t.size;let n=0,i=0,o=0;for(let r=0;r<e;r++){i=o=0;for(let s=0;s<e;s++)i=i<<1&2047|t.get(r,s),s>=10&&(1488===i||93===i)&&n++,o=o<<1&2047|t.get(s,r),s>=10&&(1488===o||93===o)&&n++}return n*r},t.getPenaltyN4=function(t){let e=0;const n=t.data.length;for(let r=0;r<n;r++)e+=t.data[r];return Math.abs(Math.ceil(100*e/n/5)-10)*i},t.applyMask=function(t,e){const n=e.size;for(let r=0;r<n;r++)for(let i=0;i<n;i++)e.isReserved(i,r)||e.xor(i,r,o(t,i,r))},t.getBestMask=function(e,n){const r=Object.keys(t.Patterns).length;let i=0,o=1/0;for(let s=0;s<r;s++){n(s),t.applyMask(s,e);const r=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(s,e),r<o&&(o=r,i=s)}return i}}(fu);var du={};const pu=iu,gu=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],mu=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];du.getBlocksCount=function(t,e){switch(e){case pu.L:return gu[4*(t-1)+0];case pu.M:return gu[4*(t-1)+1];case pu.Q:return gu[4*(t-1)+2];case pu.H:return gu[4*(t-1)+3];default:return}},du.getTotalCodewordsCount=function(t,e){switch(e){case pu.L:return mu[4*(t-1)+0];case pu.M:return mu[4*(t-1)+1];case pu.Q:return mu[4*(t-1)+2];case pu.H:return mu[4*(t-1)+3];default:return}};var yu={},wu={};const bu=new Uint8Array(512),vu=new Uint8Array(256);!function(){let t=1;for(let e=0;e<255;e++)bu[e]=t,vu[t]=e,t<<=1,256&t&&(t^=285);for(let e=255;e<512;e++)bu[e]=bu[e-255]}(),wu.log=function(t){if(t<1)throw new Error("log("+t+")");return vu[t]},wu.exp=function(t){return bu[t]},wu.mul=function(t,e){return 0===t||0===e?0:bu[vu[t]+vu[e]]},function(t){const e=wu;t.mul=function(t,n){const r=new Uint8Array(t.length+n.length-1);for(let i=0;i<t.length;i++)for(let o=0;o<n.length;o++)r[i+o]^=e.mul(t[i],n[o]);return r},t.mod=function(t,n){let r=new Uint8Array(t);for(;r.length-n.length>=0;){const t=r[0];for(let o=0;o<n.length;o++)r[o]^=e.mul(n[o],t);let i=0;for(;i<r.length&&0===r[i];)i++;r=r.slice(i)}return r},t.generateECPolynomial=function(n){let r=new Uint8Array([1]);for(let i=0;i<n;i++)r=t.mul(r,new Uint8Array([1,e.exp(i)]));return r}}(yu);const Eu=yu;function Su(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}Su.prototype.initialize=function(t){this.degree=t,this.genPoly=Eu.generateECPolynomial(this.degree)},Su.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);const n=Eu.mod(e,this.genPoly),r=this.degree-n.length;if(r>0){const t=new Uint8Array(this.degree);return t.set(n,r),t}return n};var Au=Su,xu={},_u={},Bu={isValid:function(t){return!isNaN(t)&&t>=1&&t<=40}},ku={};const Mu="[0-9]+";let Iu="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Iu=Iu.replace(/u/g,"\\u");const Cu="(?:(?![A-Z0-9 $%*+\\-./:]|"+Iu+")(?:.|[\r\n]))+";ku.KANJI=new RegExp(Iu,"g"),ku.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),ku.BYTE=new RegExp(Cu,"g"),ku.NUMERIC=new RegExp(Mu,"g"),ku.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const Tu=new RegExp("^"+Iu+"$"),Ru=new RegExp("^"+Mu+"$"),Lu=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");ku.testKanji=function(t){return Tu.test(t)},ku.testNumeric=function(t){return Ru.test(t)},ku.testAlphanumeric=function(t){return Lu.test(t)},function(t){const e=Bu,n=ku;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(t,n){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!e.isValid(n))throw new Error("Invalid version: "+n);return n>=1&&n<10?t.ccBits[0]:n<27?t.ccBits[1]:t.ccBits[2]},t.getBestModeForData=function(e){return n.testNumeric(e)?t.NUMERIC:n.testAlphanumeric(e)?t.ALPHANUMERIC:n.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},t.isValid=function(t){return t&&t.bit&&t.ccBits},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(r){return n}}}(_u),function(t){const e=tu,n=du,r=iu,i=_u,o=Bu,s=e.getBCHDigit(7973);function a(t,e){return i.getCharCountIndicator(t,e)+4}function c(t,e){let n=0;return t.forEach(function(t){const r=a(t.mode,e);n+=r+t.getBitsLength()}),n}t.from=function(t,e){return o.isValid(t)?parseInt(t,10):e},t.getCapacity=function(t,r,s){if(!o.isValid(t))throw new Error("Invalid QR Code version");void 0===s&&(s=i.BYTE);const c=8*(e.getSymbolTotalCodewords(t)-n.getTotalCodewordsCount(t,r));if(s===i.MIXED)return c;const u=c-a(s,t);switch(s){case i.NUMERIC:return Math.floor(u/10*3);case i.ALPHANUMERIC:return Math.floor(u/11*2);case i.KANJI:return Math.floor(u/13);case i.BYTE:default:return Math.floor(u/8)}},t.getBestVersionForData=function(e,n){let o;const s=r.from(n,r.M);if(Array.isArray(e)){if(e.length>1)return function(e,n){for(let r=1;r<=40;r++)if(c(e,r)<=t.getCapacity(r,n,i.MIXED))return r}(e,s);if(0===e.length)return 1;o=e[0]}else o=e;return function(e,n,r){for(let i=1;i<=40;i++)if(n<=t.getCapacity(i,r,e))return i}(o.mode,o.getLength(),s)},t.getEncodedBits=function(t){if(!o.isValid(t)||t<7)throw new Error("Invalid QR Code version");let n=t<<12;for(;e.getBCHDigit(n)-s>=0;)n^=7973<<e.getBCHDigit(n)-s;return t<<12|n}}(xu);var Ou={};const Uu=tu,Nu=Uu.getBCHDigit(1335);Ou.getEncodedBits=function(t,e){const n=t.bit<<3|e;let r=n<<10;for(;Uu.getBCHDigit(r)-Nu>=0;)r^=1335<<Uu.getBCHDigit(r)-Nu;return 21522^(n<<10|r)};var Pu={};const zu=_u;function ju(t){this.mode=zu.NUMERIC,this.data=t.toString()}ju.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},ju.prototype.getLength=function(){return this.data.length},ju.prototype.getBitsLength=function(){return ju.getBitsLength(this.data.length)},ju.prototype.write=function(t){let e,n,r;for(e=0;e+3<=this.data.length;e+=3)n=this.data.substr(e,3),r=parseInt(n,10),t.put(r,10);const i=this.data.length-e;i>0&&(n=this.data.substr(e),r=parseInt(n,10),t.put(r,3*i+1))};var Du=ju;const Fu=_u,qu=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Ku(t){this.mode=Fu.ALPHANUMERIC,this.data=t}Ku.getBitsLength=function(t){return 11*Math.floor(t/2)+t%2*6},Ku.prototype.getLength=function(){return this.data.length},Ku.prototype.getBitsLength=function(){return Ku.getBitsLength(this.data.length)},Ku.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let n=45*qu.indexOf(this.data[e]);n+=qu.indexOf(this.data[e+1]),t.put(n,11)}this.data.length%2&&t.put(qu.indexOf(this.data[e]),6)};var Wu=Ku;const Hu=_u;function $u(t){this.mode=Hu.BYTE,this.data="string"==typeof t?(new TextEncoder).encode(t):new Uint8Array(t)}$u.getBitsLength=function(t){return 8*t},$u.prototype.getLength=function(){return this.data.length},$u.prototype.getBitsLength=function(){return $u.getBitsLength(this.data.length)},$u.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var Vu=$u;const Zu=_u,Gu=tu;function Yu(t){this.mode=Zu.KANJI,this.data=t}Yu.getBitsLength=function(t){return 13*t},Yu.prototype.getLength=function(){return this.data.length},Yu.prototype.getBitsLength=function(){return Yu.getBitsLength(this.data.length)},Yu.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=Gu.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[e]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),t.put(n,13)}};var Ju,Xu=Yu,Qu={exports:{}},tl=Qu.exports=Ju={single_source_shortest_paths:function(t,e,n){var r={},i={};i[e]=0;var o,s,a,c,u,l,h,f=Ju.PriorityQueue.make();for(f.push(e,0);!f.empty();)for(a in s=(o=f.pop()).value,c=o.cost,u=t[s]||{})u.hasOwnProperty(a)&&(l=c+u[a],h=i[a],(void 0===i[a]||h>l)&&(i[a]=l,f.push(a,l),r[a]=s));if(void 0!==n&&void 0===i[n]){var d=["Could not find a path from ",e," to ",n,"."].join("");throw new Error(d)}return r},extract_shortest_path_from_predecessor_list:function(t,e){for(var n=[],r=e;r;)n.push(r),t[r],r=t[r];return n.reverse(),n},find_path:function(t,e,n){var r=Ju.single_source_shortest_paths(t,e,n);return Ju.extract_shortest_path_from_predecessor_list(r,n)},PriorityQueue:{make:function(t){var e,n=Ju.PriorityQueue,r={};for(e in t=t||{},n)n.hasOwnProperty(e)&&(r[e]=n[e]);return r.queue=[],r.sorter=t.sorter||n.default_sorter,r},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var n={value:t,cost:e};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};!function(t){const e=_u,n=Du,r=Wu,i=Vu,o=Xu,s=ku,a=tu,c=tl;function u(t){return unescape(encodeURIComponent(t)).length}function l(t,e,n){const r=[];let i;for(;null!==(i=t.exec(n));)r.push({data:i[0],index:i.index,mode:e,length:i[0].length});return r}function h(t){const n=l(s.NUMERIC,e.NUMERIC,t),r=l(s.ALPHANUMERIC,e.ALPHANUMERIC,t);let i,o;a.isKanjiModeEnabled()?(i=l(s.BYTE,e.BYTE,t),o=l(s.KANJI,e.KANJI,t)):(i=l(s.BYTE_KANJI,e.BYTE,t),o=[]);return n.concat(r,i,o).sort(function(t,e){return t.index-e.index}).map(function(t){return{data:t.data,mode:t.mode,length:t.length}})}function f(t,s){switch(s){case e.NUMERIC:return n.getBitsLength(t);case e.ALPHANUMERIC:return r.getBitsLength(t);case e.KANJI:return o.getBitsLength(t);case e.BYTE:return i.getBitsLength(t)}}function d(t,s){let c;const u=e.getBestModeForData(t);if(c=e.from(s,u),c!==e.BYTE&&c.bit<u.bit)throw new Error('"'+t+'" cannot be encoded with mode '+e.toString(c)+".\n Suggested mode is: "+e.toString(u));switch(c!==e.KANJI||a.isKanjiModeEnabled()||(c=e.BYTE),c){case e.NUMERIC:return new n(t);case e.ALPHANUMERIC:return new r(t);case e.KANJI:return new o(t);case e.BYTE:return new i(t)}}t.fromArray=function(t){return t.reduce(function(t,e){return"string"==typeof e?t.push(d(e,null)):e.data&&t.push(d(e.data,e.mode)),t},[])},t.fromString=function(n,r){const i=function(t){const n=[];for(let r=0;r<t.length;r++){const i=t[r];switch(i.mode){case e.NUMERIC:n.push([i,{data:i.data,mode:e.ALPHANUMERIC,length:i.length},{data:i.data,mode:e.BYTE,length:i.length}]);break;case e.ALPHANUMERIC:n.push([i,{data:i.data,mode:e.BYTE,length:i.length}]);break;case e.KANJI:n.push([i,{data:i.data,mode:e.BYTE,length:u(i.data)}]);break;case e.BYTE:n.push([{data:i.data,mode:e.BYTE,length:u(i.data)}])}}return n}(h(n,a.isKanjiModeEnabled())),o=function(t,n){const r={},i={start:{}};let o=["start"];for(let s=0;s<t.length;s++){const a=t[s],c=[];for(let t=0;t<a.length;t++){const u=a[t],l=""+s+t;c.push(l),r[l]={node:u,lastCount:0},i[l]={};for(let t=0;t<o.length;t++){const s=o[t];r[s]&&r[s].node.mode===u.mode?(i[s][l]=f(r[s].lastCount+u.length,u.mode)-f(r[s].lastCount,u.mode),r[s].lastCount+=u.length):(r[s]&&(r[s].lastCount=u.length),i[s][l]=f(u.length,u.mode)+4+e.getCharCountIndicator(u.mode,n))}}o=c}for(let e=0;e<o.length;e++)i[o[e]].end=0;return{map:i,table:r}}(i,r),s=c.find_path(o.map,"start","end"),l=[];for(let t=1;t<s.length-1;t++)l.push(o.table[s[t]].node);return t.fromArray(function(t){return t.reduce(function(t,e){const n=t.length-1>=0?t[t.length-1]:null;return n&&n.mode===e.mode?(t[t.length-1].data+=e.data,t):(t.push(e),t)},[])}(l))},t.rawSplit=function(e){return t.fromArray(h(e,a.isKanjiModeEnabled()))}}(Pu);const el=tu,nl=iu,rl=su,il=cu,ol=uu,sl=lu,al=fu,cl=du,ul=Au,ll=xu,hl=Ou,fl=_u,dl=Pu;function pl(t,e,n){const r=t.size,i=hl.getEncodedBits(e,n);let o,s;for(o=0;o<15;o++)s=1==(i>>o&1),o<6?t.set(o,8,s,!0):o<8?t.set(o+1,8,s,!0):t.set(r-15+o,8,s,!0),o<8?t.set(8,r-o-1,s,!0):o<9?t.set(8,15-o-1+1,s,!0):t.set(8,15-o-1,s,!0);t.set(r-8,8,1,!0)}function gl(t,e,n){const r=new rl;n.forEach(function(e){r.put(e.mode.bit,4),r.put(e.getLength(),fl.getCharCountIndicator(e.mode,t)),e.write(r)});const i=8*(el.getSymbolTotalCodewords(t)-cl.getTotalCodewordsCount(t,e));for(r.getLengthInBits()+4<=i&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(0);const o=(i-r.getLengthInBits())/8;for(let s=0;s<o;s++)r.put(s%2?17:236,8);return function(t,e,n){const r=el.getSymbolTotalCodewords(e),i=cl.getTotalCodewordsCount(e,n),o=r-i,s=cl.getBlocksCount(e,n),a=r%s,c=s-a,u=Math.floor(r/s),l=Math.floor(o/s),h=l+1,f=u-l,d=new ul(f);let p=0;const g=new Array(s),m=new Array(s);let y=0;const w=new Uint8Array(t.buffer);for(let A=0;A<s;A++){const t=A<c?l:h;g[A]=w.slice(p,p+t),m[A]=d.encode(g[A]),p+=t,y=Math.max(y,t)}const b=new Uint8Array(r);let v,E,S=0;for(v=0;v<y;v++)for(E=0;E<s;E++)v<g[E].length&&(b[S++]=g[E][v]);for(v=0;v<f;v++)for(E=0;E<s;E++)b[S++]=m[E][v];return b}(r,t,e)}function ml(t,e,n,r){let i;if(Array.isArray(t))i=dl.fromArray(t);else{if("string"!=typeof t)throw new Error("Invalid data");{let r=e;if(!r){const e=dl.rawSplit(t);r=ll.getBestVersionForData(e,n)}i=dl.fromString(t,r||40)}}const o=ll.getBestVersionForData(i,n);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(e){if(e<o)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+o+".\n")}else e=o;const s=gl(e,n,i),a=el.getSymbolSize(e),c=new il(a);return function(t,e){const n=t.size,r=sl.getPositions(e);for(let i=0;i<r.length;i++){const e=r[i][0],o=r[i][1];for(let r=-1;r<=7;r++)if(!(e+r<=-1||n<=e+r))for(let i=-1;i<=7;i++)o+i<=-1||n<=o+i||(r>=0&&r<=6&&(0===i||6===i)||i>=0&&i<=6&&(0===r||6===r)||r>=2&&r<=4&&i>=2&&i<=4?t.set(e+r,o+i,!0,!0):t.set(e+r,o+i,!1,!0))}}(c,e),function(t){const e=t.size;for(let n=8;n<e-8;n++){const e=n%2==0;t.set(n,6,e,!0),t.set(6,n,e,!0)}}(c),function(t,e){const n=ol.getPositions(e);for(let r=0;r<n.length;r++){const e=n[r][0],i=n[r][1];for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)-2===n||2===n||-2===r||2===r||0===n&&0===r?t.set(e+n,i+r,!0,!0):t.set(e+n,i+r,!1,!0)}}(c,e),pl(c,n,0),e>=7&&function(t,e){const n=t.size,r=ll.getEncodedBits(e);let i,o,s;for(let a=0;a<18;a++)i=Math.floor(a/3),o=a%3+n-8-3,s=1==(r>>a&1),t.set(i,o,s,!0),t.set(o,i,s,!0)}(c,e),function(t,e){const n=t.size;let r=-1,i=n-1,o=7,s=0;for(let a=n-1;a>0;a-=2)for(6===a&&a--;;){for(let n=0;n<2;n++)if(!t.isReserved(i,a-n)){let r=!1;s<e.length&&(r=1==(e[s]>>>o&1)),t.set(i,a-n,r),o--,-1===o&&(s++,o=7)}if(i+=r,i<0||n<=i){i-=r,r=-r;break}}}(c,s),isNaN(r)&&(r=al.getBestMask(c,pl.bind(null,c,n))),al.applyMask(r,c),pl(c,n,r),{modules:c,version:e,errorCorrectionLevel:n,maskPattern:r,segments:i}}Qc.create=function(t,e){if(void 0===t||""===t)throw new Error("No input text");let n,r,i=nl.M;return void 0!==e&&(i=nl.from(e.errorCorrectionLevel,nl.M),n=ll.from(e.version),r=al.from(e.maskPattern),e.toSJISFunc&&el.setToSJISFunction(e.toSJISFunc)),ml(t,n,i,r)};var yl={},wl={};!function(t){function e(t){if("number"==typeof t&&(t=t.toString()),"string"!=typeof t)throw new Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||5===e.length||e.length>8)throw new Error("Invalid hex color: "+t);3!==e.length&&4!==e.length||(e=Array.prototype.concat.apply([],e.map(function(t){return[t,t]}))),6===e.length&&e.push("F","F");const n=parseInt(e.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+e.slice(0,6).join("")}}t.getOptions=function(t){t||(t={}),t.color||(t.color={});const n=void 0===t.margin||null===t.margin||t.margin<0?4:t.margin,r=t.width&&t.width>=21?t.width:void 0,i=t.scale||4;return{width:r,scale:r?4:i,margin:n,color:{dark:e(t.color.dark||"#000000ff"),light:e(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},t.getScale=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},t.getImageWidth=function(e,n){const r=t.getScale(e,n);return Math.floor((e+2*n.margin)*r)},t.qrToImageData=function(e,n,r){const i=n.modules.size,o=n.modules.data,s=t.getScale(i,r),a=Math.floor((i+2*r.margin)*s),c=r.margin*s,u=[r.color.light,r.color.dark];for(let t=0;t<a;t++)for(let n=0;n<a;n++){let l=4*(t*a+n),h=r.color.light;if(t>=c&&n>=c&&t<a-c&&n<a-c){h=u[o[Math.floor((t-c)/s)*i+Math.floor((n-c)/s)]?1:0]}e[l++]=h.r,e[l++]=h.g,e[l++]=h.b,e[l]=h.a}}}(wl),function(t){const e=wl;t.render=function(t,n,r){let i=r,o=n;void 0!==i||n&&n.getContext||(i=n,n=void 0),n||(o=function(){try{return document.createElement("canvas")}catch(t){throw new Error("You need to specify a canvas element")}}()),i=e.getOptions(i);const s=e.getImageWidth(t.modules.size,i),a=o.getContext("2d"),c=a.createImageData(s,s);return e.qrToImageData(c.data,t,i),function(t,e,n){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=n,e.width=n,e.style.height=n+"px",e.style.width=n+"px"}(a,o,s),a.putImageData(c,0,0),o},t.renderToDataURL=function(e,n,r){let i=r;void 0!==i||n&&n.getContext||(i=n,n=void 0),i||(i={});const o=t.render(e,n,i),s=i.type||"image/png",a=i.rendererOpts||{};return o.toDataURL(s,a.quality)}}(yl);var bl={};const vl=wl;function El(t,e){const n=t.a/255,r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function Sl(t,e,n){let r=t+e;return void 0!==n&&(r+=" "+n),r}bl.render=function(t,e,n){const r=vl.getOptions(e),i=t.modules.size,o=t.modules.data,s=i+2*r.margin,a=r.color.light.a?"<path "+El(r.color.light,"fill")+' d="M0 0h'+s+"v"+s+'H0z"/>':"",c="<path "+El(r.color.dark,"stroke")+' d="'+function(t,e,n){let r="",i=0,o=!1,s=0;for(let a=0;a<t.length;a++){const c=Math.floor(a%e),u=Math.floor(a/e);c||o||(o=!0),t[a]?(s++,a>0&&c>0&&t[a-1]||(r+=o?Sl("M",c+n,.5+u+n):Sl("m",i,0),i=0,o=!1),c+1<e&&t[a+1]||(r+=Sl("h",s),s=0)):i++}return r}(o,i,r.margin)+'"/>',u='viewBox="0 0 '+s+" "+s+'"',l='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+u+' shape-rendering="crispEdges">'+a+c+"</svg>\n";return"function"==typeof n&&n(null,l),l};const Al=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then},xl=Qc,_l=yl,Bl=bl;function kl(t,e,n,r,i){const o=[].slice.call(arguments,1),s=o.length,a="function"==typeof o[s-1];if(!a&&!Al())throw new Error("Callback required as last argument");if(!a){if(s<1)throw new Error("Too few arguments provided");return 1===s?(n=e,e=r=void 0):2!==s||e.getContext||(r=n,n=e,e=void 0),new Promise(function(i,o){try{const o=xl.create(n,r);i(t(o,e,r))}catch(s){o(s)}})}if(s<2)throw new Error("Too few arguments provided");2===s?(i=n,n=e,e=r=void 0):3===s&&(e.getContext&&void 0===i?(i=r,r=void 0):(i=r,r=n,n=e,e=void 0));try{const o=xl.create(n,r);i(null,t(o,e,r))}catch(c){i(c)}}function Ml(t){switch(t){case"processed":case"confirmed":case"finalized":case void 0:return t;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}xl.create,kl.bind(null,_l.render),kl.bind(null,_l.renderToDataURL),kl.bind(null,function(t,e,n){return Bl.render(t,n)});const Il="solana:mainnet",Cl="solana:devnet",Tl="solana:testnet";var Rl=t=>{return e={read(e,n){const r=0===n?e:e.slice(n);if(0===r.length)return["",0];let i=r.findIndex(t=>0!==t);i=-1===i?r.length:i;const o=t[0].repeat(i);if(i===r.length)return[o,e.length];const s=function(t,e){const n=BigInt(e.length),r=[];for(;t>0n;)r.unshift(e[Number(t%n)]),t/=n;return r.join("")}(r.slice(i).reduce((t,e)=>256n*t+BigInt(e),0n),t);return[o+s,e.length]}},Object.freeze({...e,decode:(t,n=0)=>e.read(t,n)[0]});var e};const Ll="ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",Ol="ERROR_FORBIDDEN_WALLET_BASE_URL",Ul="ERROR_SECURE_CONTEXT_REQUIRED",Nl="ERROR_SESSION_CLOSED",Pl="ERROR_SESSION_TIMEOUT",zl="ERROR_WALLET_NOT_FOUND",jl="ERROR_INVALID_PROTOCOL_VERSION";class Dl extends Error{constructor(...t){const[e,n,r]=t;super(n),this.code=e,this.data=r,this.name="SolanaMobileWalletAdapterError"}}class Fl extends Error{constructor(...t){const[e,n,r,i]=t;super(r),this.code=n,this.data=i,this.jsonRpcMessageId=e,this.name="SolanaMobileWalletAdapterProtocolError"}}function ql(t,e,n,r){return new(n||(n=Promise))(function(e,i){function o(t){try{a(r.next(t))}catch(e){i(e)}}function s(t){try{a(r.throw(t))}catch(e){i(e)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(t){t(r)})).then(o,s)}a((r=r.apply(t,[])).next())})}function Kl(t,e){return window.btoa(String.fromCharCode.call(null,...t))}function Wl(t){return new Uint8Array(window.atob(t).split("").map(t=>t.charCodeAt(0)))}function Hl(t,e){return ql(this,0,void 0,function*(){const n=yield crypto.subtle.exportKey("raw",t),r=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,n),i=new Uint8Array(n.byteLength+r.byteLength);return i.set(new Uint8Array(n),0),i.set(new Uint8Array(r),n.byteLength),i})}function $l(t){return(e=function(t){return function(t){let e=`${t.domain} wants you to sign in with your Solana account:\n`;e+=`${t.address}`,t.statement&&(e+=`\n\n${t.statement}`);const n=[];if(t.uri&&n.push(`URI: ${t.uri}`),t.version&&n.push(`Version: ${t.version}`),t.chainId&&n.push(`Chain ID: ${t.chainId}`),t.nonce&&n.push(`Nonce: ${t.nonce}`),t.issuedAt&&n.push(`Issued At: ${t.issuedAt}`),t.expirationTime&&n.push(`Expiration Time: ${t.expirationTime}`),t.notBefore&&n.push(`Not Before: ${t.notBefore}`),t.requestId&&n.push(`Request ID: ${t.requestId}`),t.resources){n.push("Resources:");for(const e of t.resources)n.push(`- ${e}`)}return n.length&&(e+=`\n\n${n.join("\n")}`),e}(t)}(t),window.btoa(e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"");var e}const Vl="solana:signTransactions",Zl="solana:cloneAuthorization";function Gl(t){return Rl("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz").decode(t)}function Yl(t){return Gl(Wl(t))}function Jl(t,e){return new Proxy({},{get:(n,r)=>"then"===r?null:(null==n[r]&&(n[r]=function(n){return ql(this,0,void 0,function*(){const{method:i,params:o}=function(t,e,n){let r=e,i=t.toString().replace(/[A-Z]/g,t=>`_${t.toLowerCase()}`).toLowerCase();switch(t){case"authorize":{let{chain:t}=r;if("legacy"===n){switch(t){case"solana:testnet":t="testnet";break;case"solana:devnet":t="devnet";break;case"solana:mainnet":t="mainnet-beta";break;default:t=r.cluster}r.cluster=t}else{switch(t){case"testnet":case"devnet":t=`solana:${t}`;break;case"mainnet-beta":t="solana:mainnet"}r.chain=t}}case"reauthorize":{const{auth_token:t,identity:e}=r;if(t)if("legacy"===n)i="reauthorize",r={auth_token:t,identity:e};else i="authorize";break}}return{method:i,params:r}}(r,n,t),s=yield e(i,o);return"authorize"===i&&o.sign_in_payload&&!s.sign_in_result&&(s.sign_in_result=yield function(t,e,n){var r;return ql(this,0,void 0,function*(){const i=null!==(r=t.domain)&&void 0!==r?r:window.location.host,o=e.accounts[0].address,s=$l(Object.assign(Object.assign({},t),{domain:i,address:Yl(o)})),a=Wl((yield n("sign_messages",{addresses:[o],payloads:[s]})).signed_payloads[0]),c=Kl(a.slice(0,a.length-64)),u=Kl(a.slice(a.length-64));return{address:o,signed_message:0==c.length?s:c,signature:u}})}(o.sign_in_payload,s,e)),function(t,e,n){if("getCapabilities"===t){const t=e;switch(n){case"legacy":{const e=[Vl];return!0===t.supports_clone_authorization&&e.push(Zl),Object.assign(Object.assign({},t),{features:e})}case"v1":return Object.assign(Object.assign({},t),{supports_sign_and_send_transactions:!0,supports_clone_authorization:t.features.includes(Zl)})}}return e}(r,s,t)})}),n[r]),defineProperty:()=>!1,deleteProperty:()=>!1})}function Xl(t,e,n){return ql(this,0,void 0,function*(){const r=function(t){if(t>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const e=new ArrayBuffer(4);return new DataView(e).setUint32(0,t,!1),new Uint8Array(e)}(e),i=new Uint8Array(12);crypto.getRandomValues(i);const o=yield crypto.subtle.encrypt(th(r,i),n,(new TextEncoder).encode(t)),s=new Uint8Array(r.byteLength+i.byteLength+o.byteLength);return s.set(new Uint8Array(r),0),s.set(new Uint8Array(i),r.byteLength),s.set(new Uint8Array(o),r.byteLength+i.byteLength),s})}function Ql(t,e){return ql(this,0,void 0,function*(){const n=t.slice(0,4),r=t.slice(4,16),i=t.slice(16),o=yield crypto.subtle.decrypt(th(n,r),e,i);return function(){void 0===eh&&(eh=new TextDecoder("utf-8"));return eh}().decode(o)})}function th(t,e){return{additionalData:t,iv:e,name:"AES-GCM",tagLength:128}}let eh;function nh(){return ql(this,0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function rh(t){if(t<49152||t>65535)throw new Dl(Ll,`Association port number must be between 49152 and 65535. ${t} given.`,{port:t});return t}function ih(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function oh(t,e,n,r=["v1"]){return ql(this,0,void 0,function*(){const i=rh(e),o=function(t){let e="";const n=new Uint8Array(t),r=n.byteLength;for(let i=0;i<r;i++)e+=String.fromCharCode(n[i]);return window.btoa(e)}(yield crypto.subtle.exportKey("raw",t)),s=function(t,e){let n=null;if(e){try{n=new URL(e)}catch(i){}if("https:"!==(null==n?void 0:n.protocol))throw new Dl(Ol,"Base URLs supplied by wallets must be valid `https` URLs")}n||(n=new URL("solana-wallet:/"));const r=t.startsWith("/")?t:[...ih(n.pathname),...ih(t)].join("/");return new URL(r,n)}("v1/associate/local",n);return s.searchParams.set("association",o.replace(/[/+=]/g,t=>({"/":"_","+":"-","=":"."}[t]))),s.searchParams.set("port",`${i}`),r.forEach(t=>{s.searchParams.set("v",t)}),s})}const sh=0,ah=1;let ch=null;function uh(t){return ql(this,0,void 0,function*(){if("https:"===t.protocol)window.location.assign(t);else try{const n=-1!==navigator.userAgent.indexOf("Firefox/")?sh:ah;switch(n){case sh:e=t,null==ch&&(ch=document.createElement("iframe"),ch.style.display="none",document.body.appendChild(ch)),ch.contentWindow.location.href=e.toString();break;case ah:{const e=new Promise((t,e)=>{function n(){clearTimeout(i),window.removeEventListener("blur",r)}function r(){n(),t()}window.addEventListener("blur",r);const i=setTimeout(()=>{n(),e()},3e3)});window.location.assign(t),yield e;break}}}catch(n){throw new Dl(zl,"Found no installed wallet that supports the mobile wallet protocol.")}var e})}function lh(t,e){return ql(this,0,void 0,function*(){const n=rh(49152+Math.floor(16384*Math.random())),r=yield oh(t,n,e);return yield uh(r),n})}const hh={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4};function fh(t){return new DataView(t).getUint32(0,!1)}function dh(t,e){return ql(this,0,void 0,function*(){!function(){if("undefined"==typeof window||!0!==window.isSecureContext)throw new Dl(Ul,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}();const n=yield function(){return ql(this,0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}(),r=`ws://localhost:${yield lh(n.publicKey,null==e?void 0:e.baseUri)}/solana-wallet`;let i;const o=(()=>{const t=[...hh.retryDelayScheduleMs];return()=>t.length>1?t.shift():t[0]})();let s=1,a=0,c={__type:"disconnected"};return new Promise((e,u)=>{let l;const h={},f=()=>ql(this,0,void 0,function*(){if("connecting"!==c.__type)return;l.removeEventListener("open",f);const{associationKeypair:t}=c,e=yield nh();l.send(yield Hl(e.publicKey,t.privateKey)),c={__type:"hello_req_sent",associationPublicKey:t.publicKey,ecdhPrivateKey:e.privateKey}}),d=t=>{t.wasClean?c={__type:"disconnected"}:u(new Dl(Nl,`The wallet session dropped unexpectedly (${t.code}: ${t.reason}).`,{closeEvent:t})),m()},p=t=>ql(this,0,void 0,function*(){m(),Date.now()-i>=hh.timeoutMs?u(new Dl(Pl,`Failed to connect to the wallet websocket at ${r}.`)):(yield new Promise(t=>{const e=o();y=window.setTimeout(t,e)}),w())}),g=r=>ql(this,0,void 0,function*(){const i=yield r.data.arrayBuffer();switch(c.__type){case"connecting":if(0!==i.byteLength)throw new Error("Encountered unexpected message while connecting");const r=yield nh();l.send(yield Hl(r.publicKey,n.privateKey)),c={__type:"hello_req_sent",associationPublicKey:n.publicKey,ecdhPrivateKey:r.privateKey};break;case"connected":try{const t=fh(i.slice(0,4));if(t!==a+1)throw new Error("Encrypted message has invalid sequence number");a=t;const e=yield function(t,e){return ql(this,0,void 0,function*(){const n=yield Ql(t,e),r=JSON.parse(n);if(Object.hasOwnProperty.call(r,"error"))throw new Fl(r.id,r.error.code,r.error.message);return r})}(i,c.sharedSecret),n=h[e.id];delete h[e.id],n.resolve(e.result)}catch(o){if(!(o instanceof Fl))throw o;{const t=h[o.jsonRpcMessageId];delete h[o.jsonRpcMessageId],t.reject(o)}}break;case"hello_req_sent":{if(0===i.byteLength){const t=yield nh();l.send(yield Hl(t.publicKey,n.privateKey)),c={__type:"hello_req_sent",associationPublicKey:n.publicKey,ecdhPrivateKey:t.privateKey};break}const r=yield function(t,e,n){return ql(this,0,void 0,function*(){const[r,i]=yield Promise.all([crypto.subtle.exportKey("raw",e),crypto.subtle.importKey("raw",t.slice(0,65),{name:"ECDH",namedCurve:"P-256"},!1,[])]),o=yield crypto.subtle.deriveBits({name:"ECDH",public:i},n,256),s=yield crypto.subtle.importKey("raw",o,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(r),info:new Uint8Array},s,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}(i,c.associationPublicKey,c.ecdhPrivateKey),f=i.slice(65),d=0!==f.byteLength?yield(()=>ql(this,0,void 0,function*(){const t=fh(f.slice(0,4));if(t!==a+1)throw new Error("Encrypted message has invalid sequence number");return a=t,function(t,e){return ql(this,0,void 0,function*(){const n=yield Ql(t,e),r=JSON.parse(n);let i="legacy";if(Object.hasOwnProperty.call(r,"v"))switch(r.v){case 1:case"1":case"v1":i="v1";break;case"legacy":i="legacy";break;default:throw new Dl(jl,`Unknown/unsupported protocol version: ${r.v}`)}return{protocol_version:i}})}(f,r)}))():{protocol_version:"legacy"};c={__type:"connected",sharedSecret:r,sessionProperties:d};const p=Jl(d.protocol_version,(t,e)=>ql(this,0,void 0,function*(){const n=s++;return l.send(yield function(t,e){return ql(this,0,void 0,function*(){return Xl(JSON.stringify(t),t.id,e)})}({id:n,jsonrpc:"2.0",method:t,params:null!=e?e:{}},r)),new Promise((e,r)=>{h[n]={resolve(n){switch(t){case"authorize":case"reauthorize":{const{wallet_uri_base:t}=n;if(null!=t)try{!function(t){let e;try{e=new URL(t)}catch(n){throw new Dl(Ol,"Invalid base URL supplied by wallet")}if("https:"!==e.protocol)throw new Dl(Ol,"Base URLs supplied by wallets must be valid `https` URLs")}(t)}catch(o){return void r(o)}break}}e(n)},reject:r}})}));try{e(yield t(p))}catch(o){u(o)}finally{m(),l.close()}break}}});let m,y;const w=()=>{m&&m(),c={__type:"connecting",associationKeypair:n},void 0===i&&(i=Date.now()),l=new WebSocket(r,["com.solana.mobilewalletadapter.v1"]),l.addEventListener("open",f),l.addEventListener("close",d),l.addEventListener("error",p),l.addEventListener("message",g),m=()=>{window.clearTimeout(y),l.removeEventListener("open",f),l.removeEventListener("close",d),l.removeEventListener("error",p),l.removeEventListener("message",g)}};w()})})}var ph=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var r=0;r<t.length;r++){var i=t.charAt(r),o=i.charCodeAt(0);if(255!==e[o])throw new TypeError(i+" is ambiguous");e[o]=r}var s=t.length,a=t.charAt(0),c=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function l(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;for(var n=0,r=0,i=0;t[n]===a;)r++,n++;for(var o=(t.length-n)*c+1>>>0,u=new Uint8Array(o);t[n];){var l=t.charCodeAt(n);if(l>255)return;var h=e[l];if(255===h)return;for(var f=0,d=o-1;(0!==h||f<i)&&-1!==d;d--,f++)h+=s*u[d]>>>0,u[d]=h%256>>>0,h=h/256>>>0;if(0!==h)throw new Error("Non-zero carry");i=f,n++}for(var p=o-i;p!==o&&0===u[p];)p++;for(var g=new Uint8Array(r+(o-p)),m=r;p!==o;)g[m++]=u[p++];return g}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";for(var n=0,r=0,i=0,o=e.length;i!==o&&0===e[i];)i++,n++;for(var c=(o-i)*u+1>>>0,l=new Uint8Array(c);i!==o;){for(var h=e[i],f=0,d=c-1;(0!==h||f<r)&&-1!==d;d--,f++)h+=256*l[d]>>>0,l[d]=h%s>>>0,h=h/s>>>0;if(0!==h)throw new Error("Non-zero carry");r=f,i++}for(var p=c-r;p!==c&&0===l[p];)p++;for(var g=a.repeat(n);p<c;++p)g+=t.charAt(l[p]);return g},decodeUnsafe:l,decode:function(t){var e=l(t);if(e)return e;throw new Error("Non-base"+s+" character")}}};const gh=n(ph("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"));function mh(t,e,n,r){return new(n||(n=Promise))(function(e,i){function o(t){try{a(r.next(t))}catch(e){i(e)}}function s(t){try{a(r.throw(t))}catch(e){i(e)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(t){t(r)})).then(o,s)}a((r=r.apply(t,[])).next())})}function yh(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function wh(t,e,n,r,i){if("function"==typeof e||!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var bh,vh,Eh,Sh,Ah,xh,_h,Bh;class kh{constructor(){bh.add(this),vh.set(this,null),Eh.set(this,{}),Sh.set(this,!1),this.dom=null,this.open=()=>{yh(this,bh,"m",xh).call(this),yh(this,vh,"f")&&(yh(this,vh,"f").style.display="flex")},this.close=(t=void 0)=>{var e;yh(this,bh,"m",_h).call(this),yh(this,vh,"f")&&(yh(this,vh,"f").style.display="none"),null===(e=yh(this,Eh,"f").close)||void 0===e||e.forEach(e=>e(t))},Bh.set(this,t=>{"Escape"===t.key&&this.close(t)}),this.init=this.init.bind(this),wh(this,vh,document.getElementById("mobile-wallet-adapter-embedded-root-ui"))}init(){return mh(this,0,void 0,function*(){yh(this,bh,"m",Ah).call(this)})}addEventListener(t,e){var n;return(null===(n=yh(this,Eh,"f")[t])||void 0===n?void 0:n.push(e))||(yh(this,Eh,"f")[t]=[e]),()=>this.removeEventListener(t,e)}removeEventListener(t,e){var n;yh(this,Eh,"f")[t]=null===(n=yh(this,Eh,"f")[t])||void 0===n?void 0:n.filter(t=>e!==t)}}vh=new WeakMap,Eh=new WeakMap,Sh=new WeakMap,Bh=new WeakMap,bh=new WeakSet,Ah=function(){if(document.getElementById("mobile-wallet-adapter-embedded-root-ui"))return void(yh(this,vh,"f")||wh(this,vh,document.getElementById("mobile-wallet-adapter-embedded-root-ui")));wh(this,vh,document.createElement("div")),yh(this,vh,"f").id="mobile-wallet-adapter-embedded-root-ui",yh(this,vh,"f").innerHTML='\n<div class="mobile-wallet-adapter-embedded-modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">\n    <div data-modal-close style="position: absolute; width: 100%; height: 100%;"></div>\n\t<div class="mobile-wallet-adapter-embedded-modal-card">\n\t\t<div>\n\t\t\t<button data-modal-close class="mobile-wallet-adapter-embedded-modal-close">\n\t\t\t\t<svg width="14" height="14">\n\t\t\t\t\t<path d="M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z" />\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="mobile-wallet-adapter-embedded-modal-content"></div>\n\t</div>\n</div>\n',yh(this,vh,"f").style.display="none";const t=yh(this,vh,"f").querySelector(".mobile-wallet-adapter-embedded-modal-content");t&&(t.innerHTML=this.contentHtml);const e=document.createElement("style");e.id="mobile-wallet-adapter-embedded-modal-styles",e.textContent='\n.mobile-wallet-adapter-embedded-modal-container {\n    display: flex; /* Use flexbox to center content */\n    justify-content: center; /* Center horizontally */\n    align-items: center; /* Center vertically */\n    position: fixed; /* Stay in place */\n    z-index: 1; /* Sit on top */\n    left: 0;\n    top: 0;\n    width: 100%; /* Full width */\n    height: 100%; /* Full height */\n    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */\n    overflow-y: auto; /* enable scrolling */\n}\n\n.mobile-wallet-adapter-embedded-modal-card {\n    display: flex;\n    flex-direction: column;\n    margin: auto 20px;\n    max-width: 780px;\n    padding: 20px;\n    border-radius: 24px;\n    background: #ffffff;\n    font-family: "Inter Tight", "PT Sans", Calibri, sans-serif;\n    transform: translateY(-200%);\n    animation: slide-in 0.5s forwards;\n}\n\n@keyframes slide-in {\n    100% { transform: translateY(0%); }\n}\n\n.mobile-wallet-adapter-embedded-modal-close {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 32px;\n    height: 32px;\n    cursor: pointer;\n    background: #e4e9e9;\n    border: none;\n    border-radius: 50%;\n}\n\n.mobile-wallet-adapter-embedded-modal-close:focus-visible {\n    outline-color: red;\n}\n\n.mobile-wallet-adapter-embedded-modal-close svg {\n    fill: #546266;\n    transition: fill 200ms ease 0s;\n}\n\n.mobile-wallet-adapter-embedded-modal-close:hover svg {\n    fill: #fff;\n}\n'+this.contentStyles;const n=document.createElement("div");n.innerHTML='\n<link rel="preconnect" href="https://fonts.googleapis.com">\n<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>\n<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">\n',this.dom=n.attachShadow({mode:"closed"}),this.dom.appendChild(e),this.dom.appendChild(yh(this,vh,"f")),document.body.appendChild(n)},xh=function(){if(!yh(this,vh,"f")||yh(this,Sh,"f"))return;[...yh(this,vh,"f").querySelectorAll("[data-modal-close]")].forEach(t=>null==t?void 0:t.addEventListener("click",this.close)),window.addEventListener("load",this.close),document.addEventListener("keydown",yh(this,Bh,"f")),wh(this,Sh,!0)},_h=function(){if(!yh(this,Sh,"f"))return;if(window.removeEventListener("load",this.close),document.removeEventListener("keydown",yh(this,Bh,"f")),!yh(this,vh,"f"))return;[...yh(this,vh,"f").querySelectorAll("[data-modal-close]")].forEach(t=>null==t?void 0:t.removeEventListener("click",this.close)),wh(this,Sh,!1)};function Mh(t){return window.btoa(String.fromCharCode.call(null,...t))}function Ih(t){return new Uint8Array(window.atob(t).split("").map(t=>t.charCodeAt(0)))}var Ch,Th,Rh,Lh,Oh,Uh,Nh,Ph,zh,jh,Dh,Fh,qh,Kh,Wh,Hh,$h,Vh,Zh,Gh,Yh,Jh,Xh,Qh,tf,ef,nf,rf,of,sf,af,cf,uf,lf;const hf="Mobile Wallet Adapter",ff=[L,N,U,O];class df{constructor(t){Ch.add(this),Th.set(this,{}),Rh.set(this,"1.0.0"),Lh.set(this,hf),Oh.set(this,"https://solanamobile.com/wallets"),Uh.set(this,"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo="),Nh.set(this,void 0),Ph.set(this,void 0),zh.set(this,void 0),jh.set(this,!1),Dh.set(this,0),Fh.set(this,[]),qh.set(this,void 0),Kh.set(this,void 0),Wh.set(this,void 0),Hh.set(this,(t,e)=>{var n;return(null===(n=yh(this,Th,"f")[t])||void 0===n?void 0:n.push(e))||(yh(this,Th,"f")[t]=[e]),()=>yh(this,Ch,"m",Vh).call(this,t,e)}),Zh.set(this,({silent:t}={})=>mh(this,0,void 0,function*(){if(yh(this,jh,"f")||this.connected)return{accounts:this.accounts};wh(this,jh,!0);try{if(t){const t=yield yh(this,zh,"f").get();if(!t)return{accounts:this.accounts};yield yh(this,Jh,"f").call(this,t.capabilities),yield yh(this,Yh,"f").call(this,t)}else yield yh(this,Gh,"f").call(this)}catch(e){throw new Error(e instanceof Error&&e.message||"Unknown error")}finally{wh(this,jh,!1)}return{accounts:this.accounts}})),Gh.set(this,t=>mh(this,0,void 0,function*(){try{const e=yield yh(this,zh,"f").get();if(e)return yh(this,Yh,"f").call(this,e),e;const n=yield yh(this,qh,"f").select(yh(this,Fh,"f"));return yield yh(this,tf,"f").call(this,e=>mh(this,0,void 0,function*(){const[r,i]=yield Promise.all([e.getCapabilities(),e.authorize({chain:n,identity:yh(this,Nh,"f"),sign_in_payload:t})]),o=yh(this,nf,"f").call(this,i.accounts),s=Object.assign(Object.assign({},i),{accounts:o,chain:n,capabilities:r});return Promise.all([yh(this,Jh,"f").call(this,r),yh(this,zh,"f").set(s),yh(this,Yh,"f").call(this,s)]),s}))}catch(e){throw new Error(e instanceof Error&&e.message||"Unknown error")}})),Yh.set(this,t=>mh(this,0,void 0,function*(){var e;const n=null==yh(this,Ph,"f")||(null===(e=yh(this,Ph,"f"))||void 0===e?void 0:e.accounts.length)!==t.accounts.length||yh(this,Ph,"f").accounts.some((e,n)=>e.address!==t.accounts[n].address);wh(this,Ph,t),n&&yh(this,Ch,"m",$h).call(this,"change",{accounts:this.accounts})})),Jh.set(this,t=>mh(this,0,void 0,function*(){const e=t.features.includes("solana:signTransactions"),n=t.supports_sign_and_send_transactions,r=L in this.features!==n||N in this.features!==e;wh(this,Kh,Object.assign(Object.assign({},(n||!n&&!e)&&{[L]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:yh(this,sf,"f")}}),e&&{[N]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:yh(this,af,"f")}})),r&&yh(this,Ch,"m",$h).call(this,"change",{features:this.features})})),Xh.set(this,(t,e,n)=>mh(this,0,void 0,function*(){var r,i;try{const[o,s]=yield Promise.all([null!==(i=null===(r=yh(this,Ph,"f"))||void 0===r?void 0:r.capabilities)&&void 0!==i?i:yield t.getCapabilities(),t.authorize({auth_token:e,identity:yh(this,Nh,"f"),chain:n})]),a=yh(this,nf,"f").call(this,s.accounts),c=Object.assign(Object.assign({},s),{accounts:a,chain:n,capabilities:o});Promise.all([yh(this,zh,"f").set(c),yh(this,Yh,"f").call(this,c)])}catch(o){throw yh(this,Qh,"f").call(this),new Error(o instanceof Error&&o.message||"Unknown error")}})),Qh.set(this,()=>mh(this,0,void 0,function*(){var t;yh(this,zh,"f").clear(),wh(this,jh,!1),wh(this,Dh,(t=yh(this,Dh,"f"),++t)),wh(this,Ph,void 0),yh(this,Ch,"m",$h).call(this,"change",{accounts:this.accounts})})),tf.set(this,t=>mh(this,0,void 0,function*(){var e;const n=null===(e=yh(this,Ph,"f"))||void 0===e?void 0:e.wallet_uri_base,r=n?{baseUri:n}:void 0,i=yh(this,Dh,"f");try{return yield dh(t,r)}catch(o){throw yh(this,Dh,"f")!==i&&(yield new Promise(()=>{})),o instanceof Error&&"SolanaMobileWalletAdapterError"===o.name&&"ERROR_WALLET_NOT_FOUND"===o.code&&(yield yh(this,Wh,"f").call(this,this)),o}})),ef.set(this,()=>{if(!yh(this,Ph,"f"))throw new Error("Wallet not connected");return{authToken:yh(this,Ph,"f").auth_token,chain:yh(this,Ph,"f").chain}}),nf.set(this,t=>t.map(t=>{var e,n;const r=Ih(t.address);return{address:gh.encode(r),publicKey:r,label:t.label,icon:t.icon,chains:null!==(e=t.chains)&&void 0!==e?e:yh(this,Fh,"f"),features:null!==(n=t.features)&&void 0!==n?n:ff}})),rf.set(this,t=>mh(this,0,void 0,function*(){const{authToken:e,chain:n}=yh(this,ef,"f").call(this);try{const r=t.map(t=>Mh(t));return yield yh(this,tf,"f").call(this,t=>mh(this,0,void 0,function*(){yield yh(this,Xh,"f").call(this,t,e,n);return(yield t.signTransactions({payloads:r})).signed_payloads.map(Ih)}))}catch(r){throw new Error(r instanceof Error&&r.message||"Unknown error")}})),of.set(this,(t,e)=>mh(this,0,void 0,function*(){const{authToken:n,chain:r}=yh(this,ef,"f").call(this);try{return yield yh(this,tf,"f").call(this,i=>mh(this,0,void 0,function*(){const[o,s]=yield Promise.all([i.getCapabilities(),yh(this,Xh,"f").call(this,i,n,r)]);if(o.supports_sign_and_send_transactions){const n=Mh(t);return(yield i.signAndSendTransactions(Object.assign(Object.assign({},e),{payloads:[n]}))).signatures.map(Ih)[0]}throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}})),sf.set(this,(...t)=>mh(this,0,void 0,function*(){const e=[];for(const n of t){const t=yield yh(this,of,"f").call(this,n.transaction,n.options);e.push({signature:t})}return e})),af.set(this,(...t)=>mh(this,0,void 0,function*(){return(yield yh(this,rf,"f").call(this,t.map(({transaction:t})=>t))).map(t=>({signedTransaction:t}))})),cf.set(this,(...t)=>mh(this,0,void 0,function*(){const{authToken:e,chain:n}=yh(this,ef,"f").call(this),r=t.map(({account:t})=>Mh(t.publicKey)),i=t.map(({message:t})=>Mh(t));try{return yield yh(this,tf,"f").call(this,t=>mh(this,0,void 0,function*(){yield yh(this,Xh,"f").call(this,t,e,n);return(yield t.signMessages({addresses:r,payloads:i})).signed_payloads.map(Ih).map(t=>({signedMessage:t,signature:t.slice(-64)}))}))}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}})),uf.set(this,(...t)=>mh(this,0,void 0,function*(){const e=[];if(!(t.length>1))return[yield yh(this,lf,"f").call(this,t[0])];for(const n of t)e.push(yield yh(this,lf,"f").call(this,n));return e})),lf.set(this,t=>mh(this,0,void 0,function*(){var e,n,r;wh(this,jh,!0);try{const i=yield yh(this,Gh,"f").call(this,Object.assign(Object.assign({},t),{domain:null!==(e=null==t?void 0:t.domain)&&void 0!==e?e:window.location.host}));if(!i.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const o=i.sign_in_result.address,s=i.accounts.find(t=>t.address==o);return{account:Object.assign(Object.assign({},null!=s?s:{address:gh.encode(Ih(o))}),{publicKey:Ih(o),chains:null!==(n=null==s?void 0:s.chains)&&void 0!==n?n:yh(this,Fh,"f"),features:null!==(r=null==s?void 0:s.features)&&void 0!==r?r:i.capabilities.features}),signedMessage:Ih(i.sign_in_result.signed_message),signature:Ih(i.sign_in_result.signature)}}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}finally{wh(this,jh,!1)}})),wh(this,zh,t.authorizationCache),wh(this,Nh,t.appIdentity),wh(this,Fh,t.chains),wh(this,qh,t.chainSelector),wh(this,Wh,t.onWalletNotFound),wh(this,Kh,{[L]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:yh(this,sf,"f")},[N]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:yh(this,af,"f")}})}get version(){return yh(this,Rh,"f")}get name(){return yh(this,Lh,"f")}get url(){return yh(this,Oh,"f")}get icon(){return yh(this,Uh,"f")}get chains(){return yh(this,Fh,"f")}get features(){return Object.assign({[P]:{version:"1.0.0",connect:yh(this,Zh,"f")},[z]:{version:"1.0.0",disconnect:yh(this,Qh,"f")},[j]:{version:"1.0.0",on:yh(this,Hh,"f")},[U]:{version:"1.0.0",signMessage:yh(this,cf,"f")},[O]:{version:"1.0.0",signIn:yh(this,uf,"f")}},yh(this,Kh,"f"))}get accounts(){var t,e;return null!==(e=null===(t=yh(this,Ph,"f"))||void 0===t?void 0:t.accounts)&&void 0!==e?e:[]}get connected(){return!!yh(this,Ph,"f")}get isAuthorized(){return!!yh(this,Ph,"f")}get currentAuthorization(){return yh(this,Ph,"f")}get cachedAuthorizationResult(){return yh(this,zh,"f").get()}}Th=new WeakMap,Rh=new WeakMap,Lh=new WeakMap,Oh=new WeakMap,Uh=new WeakMap,Nh=new WeakMap,Ph=new WeakMap,zh=new WeakMap,jh=new WeakMap,Dh=new WeakMap,Fh=new WeakMap,qh=new WeakMap,Kh=new WeakMap,Wh=new WeakMap,Hh=new WeakMap,Zh=new WeakMap,Gh=new WeakMap,Yh=new WeakMap,Jh=new WeakMap,Xh=new WeakMap,Qh=new WeakMap,tf=new WeakMap,ef=new WeakMap,nf=new WeakMap,rf=new WeakMap,of=new WeakMap,sf=new WeakMap,af=new WeakMap,cf=new WeakMap,uf=new WeakMap,lf=new WeakMap,Ch=new WeakSet,$h=function(t,...e){var n;null===(n=yh(this,Th,"f")[t])||void 0===n||n.forEach(t=>t.apply(null,e))},Vh=function(t,e){var n;yh(this,Th,"f")[t]=null===(n=yh(this,Th,"f")[t])||void 0===n?void 0:n.filter(t=>e!==t)};class pf extends kh{constructor(){super(...arguments),this.contentStyles=mf,this.contentHtml=gf}initWithError(t){super.init(),this.populateError(t)}populateError(t){var e,n;const r=null===(e=this.dom)||void 0===e?void 0:e.getElementById("mobile-wallet-adapter-error-message"),i=null===(n=this.dom)||void 0===n?void 0:n.getElementById("mobile-wallet-adapter-error-action");if(r){if("SolanaMobileWalletAdapterError"===t.name)switch(t.code){case"ERROR_WALLET_NOT_FOUND":return r.innerHTML="To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.",void(i&&i.addEventListener("click",()=>{window.location.href="https://solanamobile.com/wallets"}));case"ERROR_BROWSER_NOT_SUPPORTED":return r.innerHTML="This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.",void(i&&(i.style.display="none"))}r.innerHTML=`An unexpected error occurred: ${t.message}`}}}const gf='\n<svg class="mobile-wallet-adapter-embedded-modal-error-icon" xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z"/></svg>\n<div class="mobile-wallet-adapter-embedded-modal-title">We can\'t find a wallet.</div>\n<div id="mobile-wallet-adapter-error-message" class="mobile-wallet-adapter-embedded-modal-subtitle"></div>\n<div>\n    <button data-error-action id="mobile-wallet-adapter-error-action" class="mobile-wallet-adapter-embedded-modal-error-action">\n        Find a wallet\n    </button>\n</div>\n',mf="\n.mobile-wallet-adapter-embedded-modal-content {\n    text-align: center;\n}\n\n.mobile-wallet-adapter-embedded-modal-error-icon {\n    margin-top: 24px;\n}\n\n.mobile-wallet-adapter-embedded-modal-title {\n    margin: 18px 100px auto 100px;\n    color: #000000;\n    font-size: 2.75em;\n    font-weight: 600;\n}\n\n.mobile-wallet-adapter-embedded-modal-subtitle {\n    margin: 30px 60px 40px 60px;\n    color: #000000;\n    font-size: 1.25em;\n    font-weight: 400;\n}\n\n.mobile-wallet-adapter-embedded-modal-error-action {\n    display: block;\n    width: 100%;\n    height: 56px;\n    /*margin-top: 40px;*/\n    font-size: 1.25em;\n    /*line-height: 24px;*/\n    /*letter-spacing: -1%;*/\n    background: #000000;\n    color: #FFFFFF;\n    border-radius: 18px;\n}\n\n/* Smaller screens */\n@media all and (max-width: 600px) {\n    .mobile-wallet-adapter-embedded-modal-title {\n        font-size: 1.5em;\n        margin-right: 12px;\n        margin-left: 12px;\n    }\n    .mobile-wallet-adapter-embedded-modal-subtitle {\n        margin-right: 12px;\n        margin-left: 12px;\n    }\n}\n";const yf="SolanaMobileWalletAdapterDefaultAuthorizationCache";function wf(t,e,n,r){return new(n||(n=Promise))(function(e,i){function o(t){try{a(r.next(t))}catch(e){i(e)}}function s(t){try{a(r.throw(t))}catch(e){i(e)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(t){t(r)})).then(o,s)}a((r=r.apply(t,[])).next())})}function bf(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function vf(t,e,n,r,i){if("function"==typeof e||!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}const Ef="standard:connect";function Sf(t){return window.btoa(String.fromCharCode.call(null,...t))}var Af,xf,_f,Bf,kf,Mf,If,Cf,Tf,Rf,Lf,Of,Uf;const Nf=hf;function Pf(t){switch(t){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return t}}class zf extends R{constructor(t,e){super(),Af.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),xf.set(this,void 0),_f.set(this,!1),Bf.set(this,"undefined"!=typeof window&&window.isSecureContext&&"undefined"!=typeof document&&/android/i.test(navigator.userAgent)?x.Loadable:x.Unsupported),kf.set(this,void 0),Mf.set(this,void 0),If.set(this,void 0),Cf.set(this,t=>wf(this,0,void 0,function*(){if(t.accounts&&t.accounts.length>0){bf(this,Af,"m",Rf).call(this);const e=yield bf(this,kf,"f").call(this,t.accounts);e!==bf(this,Mf,"f")&&(vf(this,Mf,e),vf(this,If,void 0),this.emit("connect",this.publicKey))}})),vf(this,kf,t=>wf(this,0,void 0,function*(){var n;const r=yield e.addressSelector.select(t.map(({publicKey:t})=>Sf(t)));return null!==(n=t.find(({publicKey:t})=>Sf(t)===r))&&void 0!==n?n:t[0]})),vf(this,xf,t),bf(this,xf,"f").features["standard:events"].on("change",bf(this,Cf,"f")),this.name=bf(this,xf,"f").name,this.icon=bf(this,xf,"f").icon,this.url=bf(this,xf,"f").url}get publicKey(){var t;if(!bf(this,If,"f")&&bf(this,Mf,"f"))try{vf(this,If,new us(bf(this,Mf,"f").publicKey))}catch(e){throw new w(e instanceof Error&&(null==e?void 0:e.message)||"Unknown error",e)}return null!==(t=bf(this,If,"f"))&&void 0!==t?t:null}get connected(){return bf(this,xf,"f").connected}get connecting(){return bf(this,_f,"f")}get readyState(){return bf(this,Bf,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return wf(this,0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return wf(this,0,void 0,function*(){bf(this,Af,"m",Tf).call(this,!0)})}connect(){return wf(this,0,void 0,function*(){bf(this,Af,"m",Tf).call(this)})}performAuthorization(t){return wf(this,0,void 0,function*(){try{const e=yield bf(this,xf,"f").cachedAuthorizationResult;if(e)return yield bf(this,xf,"f").features[Ef].connect({silent:!0}),e;t?yield bf(this,xf,"f").features[O].signIn(t):yield bf(this,xf,"f").features[Ef].connect();return yield yield bf(this,xf,"f").cachedAuthorizationResult}catch(e){throw new p(e instanceof Error&&e.message||"Unknown error",e)}})}disconnect(){return wf(this,0,void 0,function*(){return yield bf(this,Af,"m",Uf).call(this,()=>wf(this,0,void 0,function*(){vf(this,_f,!1),vf(this,If,void 0),vf(this,Mf,void 0),yield bf(this,xf,"f").features["standard:disconnect"].disconnect(),this.emit("disconnect")}))})}signIn(t){return wf(this,0,void 0,function*(){return bf(this,Af,"m",Uf).call(this,()=>wf(this,0,void 0,function*(){var e;if(bf(this,Bf,"f")!==x.Installed&&bf(this,Bf,"f")!==x.Loadable)throw new h;vf(this,_f,!0);try{const n=yield bf(this,xf,"f").features[O].signIn(Object.assign(Object.assign({},t),{domain:null!==(e=null==t?void 0:t.domain)&&void 0!==e?e:window.location.host}));if(n.length>0)return n[0];throw new Error("Sign in failed, no sign in result returned by wallet")}catch(n){throw new p(n instanceof Error&&n.message||"Unknown error",n)}finally{vf(this,_f,!1)}}))})}signMessage(t){return wf(this,0,void 0,function*(){return yield bf(this,Af,"m",Uf).call(this,()=>wf(this,0,void 0,function*(){const e=bf(this,Af,"m",Lf).call(this);try{return(yield bf(this,xf,"f").features[U].signMessage({account:e,message:t}))[0].signature}catch(n){throw new S(null==n?void 0:n.message,n)}}))})}sendTransaction(t,e,n){return wf(this,0,void 0,function*(){return yield bf(this,Af,"m",Uf).call(this,()=>wf(this,0,void 0,function*(){const r=bf(this,Af,"m",Lf).call(this);try{let i=function(){let t,r;switch(e.commitment){case"confirmed":case"finalized":case"processed":t=e.commitment;break;default:t="finalized"}switch(null==n?void 0:n.preflightCommitment){case"confirmed":case"finalized":case"processed":r=n.preflightCommitment;break;case void 0:r=t;break;default:r="finalized"}return("finalized"===r?2:"confirmed"===r?1:0)<("finalized"===t?2:"confirmed"===t?1:0)?r:t};if(L in bf(this,xf,"f").features){const e=Pf(bf(this,xf,"f").currentAuthorization.chain),[i]=(yield bf(this,xf,"f").features[L].signAndSendTransaction({account:r,transaction:t.serialize(),chain:e,options:n?{skipPreflight:n.skipPreflight,maxRetries:n.maxRetries}:void 0})).map(t=>Sf(t.signature));return i}{const[r]=yield bf(this,Af,"m",Of).call(this,[t]);if(function(t){return"version"in t}(r))return yield e.sendTransaction(r);{const t=r.serialize();return yield e.sendRawTransaction(t,Object.assign(Object.assign({},n),{preflightCommitment:i()}))}}}catch(i){throw new v(null==i?void 0:i.message,i)}}))})}signTransaction(t){return wf(this,0,void 0,function*(){return yield bf(this,Af,"m",Uf).call(this,()=>wf(this,0,void 0,function*(){const[e]=yield bf(this,Af,"m",Of).call(this,[t]);return e}))})}signAllTransactions(t){return wf(this,0,void 0,function*(){return yield bf(this,Af,"m",Uf).call(this,()=>wf(this,0,void 0,function*(){return yield bf(this,Af,"m",Of).call(this,t)}))})}}xf=new WeakMap,_f=new WeakMap,Bf=new WeakMap,kf=new WeakMap,Mf=new WeakMap,If=new WeakMap,Cf=new WeakMap,Af=new WeakSet,Tf=function(t=!1){return wf(this,0,void 0,function*(){if(!this.connecting&&!this.connected)return yield bf(this,Af,"m",Uf).call(this,()=>wf(this,0,void 0,function*(){if(bf(this,Bf,"f")!==x.Installed&&bf(this,Bf,"f")!==x.Loadable)throw new h;vf(this,_f,!0);try{yield bf(this,xf,"f").features[Ef].connect({silent:t})}catch(e){throw new p(e instanceof Error&&e.message||"Unknown error",e)}finally{vf(this,_f,!1)}}))})},Rf=function(){bf(this,Bf,"f")!==x.Installed&&this.emit("readyStateChange",vf(this,Bf,x.Installed))},Lf=function(){if(!bf(this,xf,"f").isAuthorized||!bf(this,Mf,"f"))throw new b;return bf(this,Mf,"f")},Of=function(t){return wf(this,0,void 0,function*(){const e=bf(this,Af,"m",Lf).call(this);try{if(N in bf(this,xf,"f").features)return bf(this,xf,"f").features[N].signTransaction(...t.map(t=>({account:e,transaction:t.serialize()}))).then(t=>t.map(t=>{const e=t.signedTransaction,n=64*e[0]+1;return"legacy"===ks.deserializeMessageVersion(e.slice(n,e.length))?Ts.from(e):Rs.deserialize(e)}));throw new Error("Connected wallet does not support signing transactions")}catch(n){throw new E(null==n?void 0:n.message,n)}})},Uf=function(t){return wf(this,0,void 0,function*(){try{return yield t()}catch(e){throw this.emit("error",e),e}})};class jf extends zf{constructor(t){var e;const n=Pf(null!==(e=t.chain)&&void 0!==e?e:t.cluster);super(new df({appIdentity:t.appIdentity,authorizationCache:{set:t.authorizationResultCache.set,get:()=>wf(this,0,void 0,function*(){return yield t.authorizationResultCache.get()}),clear:t.authorizationResultCache.clear},chains:[n],chainSelector:{select(t){return mh(this,0,void 0,function*(){return 1===t.length?t[0]:t.includes(Il)?Il:t[0]})}},onWalletNotFound:()=>wf(this,0,void 0,function*(){t.onWalletNotFound(this)})}),{addressSelector:t.addressSelector,chain:n})}}class Df extends jf{}function Ff(){return function(){let t;try{t=window.localStorage}catch(e){}return{clear(){return mh(this,0,void 0,function*(){if(t)try{t.removeItem(yf)}catch(e){}})},get(){return mh(this,0,void 0,function*(){if(t)try{const e=JSON.parse(t.getItem(yf));if(e&&e.accounts){const t=e.accounts.map(t=>Object.assign(Object.assign({},t),{publicKey:"publicKey"in t?new Uint8Array(Object.values(t.publicKey)):gh.decode(t.address)}));return Object.assign(Object.assign({},e),{accounts:t})}return e||void 0}catch(e){}})},set(n){return mh(this,0,void 0,function*(){if(t)try{t.setItem(yf,JSON.stringify(n))}catch(e){}})}}}()}function qf(t){return wf(this,0,void 0,function*(){return function(){return mh(this,0,void 0,function*(){if("undefined"!=typeof window){const t=window.navigator.userAgent.toLowerCase(),e=new pf;t.includes("wv")?e.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_BROWSER_NOT_SUPPORTED",message:""}):e.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_WALLET_NOT_FOUND",message:""}),e.open()}})}()})}var Kf;function Wf(t){const e=({register:e})=>e(t);try{window.dispatchEvent(new Hf(e))}catch(n){}try{window.addEventListener("wallet-standard:app-ready",({detail:t})=>e(t))}catch(n){}}class Hf extends Event{get detail(){return function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}(this,Kf,"f")}get type(){return"wallet-standard:register-wallet"}constructor(t){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),Kf.set(this,void 0),function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===r?i.call(t,n):i?i.value=n:e.set(t,n)}(this,Kf,t,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}Kf=new WeakMap;const $f=function(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let a=0;a<e.length;a++)e[a]=255;for(let a=0;a<t.length;a++){const n=t.charAt(a),r=n.charCodeAt(0);if(255!==e[r])throw new TypeError(n+" is ambiguous");e[r]=a}const n=t.length,r=t.charAt(0),i=Math.log(n)/Math.log(256),o=Math.log(256)/Math.log(n);function s(t){if("string"!=typeof t)throw new TypeError("Expected String");if(0===t.length)return new Uint8Array;let o=0,s=0,a=0;for(;t[o]===r;)s++,o++;const c=(t.length-o)*i+1>>>0,u=new Uint8Array(c);for(;o<t.length;){const r=t.charCodeAt(o);if(r>255)return;let i=e[r];if(255===i)return;let s=0;for(let t=c-1;(0!==i||s<a)&&-1!==t;t--,s++)i+=n*u[t]>>>0,u[t]=i%256>>>0,i=i/256>>>0;if(0!==i)throw new Error("Non-zero carry");a=s,o++}let l=c-a;for(;l!==c&&0===u[l];)l++;const h=new Uint8Array(s+(c-l));let f=s;for(;l!==c;)h[f++]=u[l++];return h}return{encode:function(e){if(e instanceof Uint8Array||(ArrayBuffer.isView(e)?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Array.isArray(e)&&(e=Uint8Array.from(e))),!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===e.length)return"";let i=0,s=0,a=0;const c=e.length;for(;a!==c&&0===e[a];)a++,i++;const u=(c-a)*o+1>>>0,l=new Uint8Array(u);for(;a!==c;){let t=e[a],r=0;for(let e=u-1;(0!==t||r<s)&&-1!==e;e--,r++)t+=256*l[e]>>>0,l[e]=t%n>>>0,t=t/n>>>0;if(0!==t)throw new Error("Non-zero carry");s=r,a++}let h=u-s;for(;h!==u&&0===l[h];)h++;let f=r.repeat(i);for(;h<u;++h)f+=t.charAt(l[h]);return f},decodeUnsafe:s,decode:function(t){const e=s(t);if(e)return e;throw new Error("Non-base"+n+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var Vf,Zf,Gf,Yf,Jf,Xf,Qf,td,ed,nd,rd,id,od,sd,ad,cd,ud,ld,hd=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)},fd=function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n};class dd extends B{get name(){return hd(this,td,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return hd(this,td,"f").icon}get readyState(){return hd(this,ed,"f")}get publicKey(){return hd(this,Gf,"f")}get connecting(){return hd(this,Yf,"f")}get supportedTransactionVersions(){return hd(this,Qf,"f")}get wallet(){return hd(this,td,"f")}get standard(){return!0}constructor({wallet:t}){super(),Vf.add(this),Zf.set(this,void 0),Gf.set(this,void 0),Yf.set(this,void 0),Jf.set(this,void 0),Xf.set(this,void 0),Qf.set(this,void 0),td.set(this,void 0),ed.set(this,"undefined"==typeof window||"undefined"==typeof document?x.Unsupported:x.Installed),sd.set(this,t=>{if("accounts"in t){const t=hd(this,td,"f").accounts[0];hd(this,Zf,"f")&&!hd(this,Jf,"f")&&t!==hd(this,Zf,"f")&&(t?hd(this,Vf,"m",rd).call(this,t):(this.emit("error",new g),hd(this,Vf,"m",id).call(this)))}"features"in t&&hd(this,Vf,"m",od).call(this)}),fd(this,td,t,"f"),fd(this,Zf,null,"f"),fd(this,Gf,null,"f"),fd(this,Yf,!1,"f"),fd(this,Jf,!1,"f"),fd(this,Xf,hd(this,td,"f").features[j].on("change",hd(this,sd,"f")),"f"),hd(this,Vf,"m",od).call(this)}destroy(){fd(this,Zf,null,"f"),fd(this,Gf,null,"f"),fd(this,Yf,!1,"f"),fd(this,Jf,!1,"f");const t=hd(this,Xf,"f");t&&(fd(this,Xf,null,"f"),t())}async autoConnect(){return hd(this,Vf,"m",nd).call(this,{silent:!0})}async connect(){return hd(this,Vf,"m",nd).call(this)}async disconnect(){if(z in hd(this,td,"f").features)try{fd(this,Jf,!0,"f"),await hd(this,td,"f").features[z].disconnect()}catch(t){this.emit("error",new m(t?.message,t))}finally{fd(this,Jf,!1,"f")}hd(this,Vf,"m",id).call(this)}async sendTransaction(t,e,n={}){try{const o=hd(this,Zf,"f");if(!o)throw new b;let s;if(L in hd(this,td,"f").features)if(o.features.includes(L))s=L;else{if(!(N in hd(this,td,"f").features)||!o.features.includes(N))throw new y;s=N}else{if(!(N in hd(this,td,"f").features))throw new d;if(!o.features.includes(N))throw new y;s=N}const a=(r=e.rpcEndpoint).includes("https://api.mainnet-beta.solana.com")?Il:/\bdevnet\b/i.test(r)?Cl:/\btestnet\b/i.test(r)?Tl:/\blocalhost\b/i.test(r)||/\b127\.0\.0\.1\b/.test(r)?"solana:localnet":Il;if(!o.chains.includes(a))throw new v;try{const{signers:r,...i}=n;let c;if(I(t)?(r?.length&&t.sign(r),c=t.serialize()):(t=await this.prepareTransaction(t,e,i),r?.length&&t.partialSign(...r),c=new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}))),s===L){const[t]=await hd(this,td,"f").features[L].signAndSendTransaction({account:o,chain:a,transaction:c,options:{preflightCommitment:Ml(i.preflightCommitment||e.commitment),skipPreflight:i.skipPreflight,maxRetries:i.maxRetries,minContextSlot:i.minContextSlot}});return $f.encode(t.signature)}{const[t]=await hd(this,td,"f").features[N].signTransaction({account:o,chain:a,transaction:c,options:{preflightCommitment:Ml(i.preflightCommitment||e.commitment),minContextSlot:i.minContextSlot}});return await e.sendRawTransaction(t.signedTransaction,{...i,preflightCommitment:Ml(i.preflightCommitment||e.commitment)})}}catch(i){if(i instanceof l)throw i;throw new v(i?.message,i)}}catch(i){throw this.emit("error",i),i}var r}}Zf=new WeakMap,Gf=new WeakMap,Yf=new WeakMap,Jf=new WeakMap,Xf=new WeakMap,Qf=new WeakMap,td=new WeakMap,ed=new WeakMap,sd=new WeakMap,Vf=new WeakSet,nd=async function(t){try{if(this.connected||this.connecting)return;if(hd(this,ed,"f")!==x.Installed)throw new h;if(fd(this,Yf,!0,"f"),!hd(this,td,"f").accounts.length)try{await hd(this,td,"f").features[P].connect(t)}catch(e){throw new p(e?.message,e)}const n=hd(this,td,"f").accounts[0];if(!n)throw new y;hd(this,Vf,"m",rd).call(this,n)}catch(e){throw this.emit("error",e),e}finally{fd(this,Yf,!1,"f")}},rd=function(t){let e;try{e=new us(t.address)}catch(n){throw new w(n?.message,n)}fd(this,Zf,t,"f"),fd(this,Gf,e,"f"),hd(this,Vf,"m",od).call(this),this.emit("connect",e)},id=function(){fd(this,Zf,null,"f"),fd(this,Gf,null,"f"),hd(this,Vf,"m",od).call(this),this.emit("disconnect")},od=function(){const t=L in hd(this,td,"f").features?hd(this,td,"f").features[L].supportedTransactionVersions:hd(this,td,"f").features[N].supportedTransactionVersions;fd(this,Qf,function(t,e){if(t===e)return!0;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}(t,["legacy"])?null:new Set(t),"f"),N in hd(this,td,"f").features&&hd(this,Zf,"f")?.features.includes(N)?(this.signTransaction=hd(this,Vf,"m",ad),this.signAllTransactions=hd(this,Vf,"m",cd)):(delete this.signTransaction,delete this.signAllTransactions),U in hd(this,td,"f").features&&hd(this,Zf,"f")?.features.includes(U)?this.signMessage=hd(this,Vf,"m",ud):delete this.signMessage,O in hd(this,td,"f").features?this.signIn=hd(this,Vf,"m",ld):delete this.signIn},ad=async function(t){try{const n=hd(this,Zf,"f");if(!n)throw new b;if(!(N in hd(this,td,"f").features))throw new d;if(!n.features.includes(N))throw new y;try{const e=(await hd(this,td,"f").features[N].signTransaction({account:n,transaction:I(t)?t.serialize():new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return I(t)?Rs.deserialize(e):Ts.from(e)}catch(e){if(e instanceof l)throw e;throw new E(e?.message,e)}}catch(e){throw this.emit("error",e),e}},cd=async function(t){try{const n=hd(this,Zf,"f");if(!n)throw new b;if(!(N in hd(this,td,"f").features))throw new d;if(!n.features.includes(N))throw new y;try{const e=await hd(this,td,"f").features[N].signTransaction(...t.map(t=>({account:n,transaction:I(t)?t.serialize():new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return t.map((t,n)=>{const r=e[n].signedTransaction;return I(t)?Rs.deserialize(r):Ts.from(r)})}catch(e){throw new E(e?.message,e)}}catch(e){throw this.emit("error",e),e}},ud=async function(t){try{const n=hd(this,Zf,"f");if(!n)throw new b;if(!(U in hd(this,td,"f").features))throw new d;if(!n.features.includes(U))throw new y;try{return(await hd(this,td,"f").features[U].signMessage({account:n,message:t}))[0].signature}catch(e){throw new S(e?.message,e)}}catch(e){throw this.emit("error",e),e}},ld=async function(t={}){try{if(!(O in hd(this,td,"f").features))throw new d;let n;try{[n]=await hd(this,td,"f").features[O].signIn(t)}catch(e){throw new A(e?.message,e)}if(!n)throw new A;return hd(this,Vf,"m",rd).call(this,n.account),n}catch(e){throw this.emit("error",e),e}};const pd=function(t){return P in t.features&&j in t.features&&(L in t.features||N in t.features)};var gd;let md;const yd=new Set;const wd={};function bd(...t){return(t=t.filter(t=>!yd.has(t))).length?(t.forEach(t=>function(t){vd=void 0,yd.add(t)}(t)),wd.register?.forEach(e=>Ad(()=>e(...t))),function(){t.forEach(t=>function(t){vd=void 0,yd.delete(t)}(t)),wd.unregister?.forEach(e=>Ad(()=>e(...t)))}):()=>{}}let vd;function Ed(){return vd||(vd=[...yd]),vd}function Sd(t,e){return wd[t]?.push(e)||(wd[t]=[e]),function(){wd[t]=wd[t]?.filter(t=>e!==t)}}function Ad(t){try{t()}catch(e){}}class xd extends Event{get detail(){return function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}(this,gd,"f")}get type(){return"wallet-standard:app-ready"}constructor(t){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),gd.set(this,void 0),function(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===r?i.call(t,n):i?i.value=n:e.set(t,n)}(this,gd,t,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}function _d(){if(md)return md;if(md=function(){if(md)return md;if(md=Object.freeze({register:bd,get:Ed,on:Sd}),"undefined"==typeof window)return md;const t=Object.freeze({register:bd});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){}try{window.dispatchEvent(new xd(t))}catch(e){}return md}(),"undefined"==typeof window)return md;const t=window.navigator.wallets||[];if(!Array.isArray(t))return md;const{register:e}=md,n=(...t)=>t.forEach(t=>Ad(()=>t({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:n})})}catch(r){return md}return n(...t),md}function Bd(t){const e=kd(()=>new Set),{get:n,on:r}=kd(()=>_d()),[i,s]=o.useState(()=>Md(n()));o.useEffect(()=>{const t=[r("register",(...t)=>s(e=>[...e,...Md(t)])),r("unregister",(...t)=>s(e=>e.filter(e=>t.some(t=>t===e.wallet))))];return()=>t.forEach(t=>t())},[r]);const a=function(t){const e=o.useRef(void 0);return o.useEffect(()=>{e.current=t}),e.current}(i);return o.useEffect(()=>{if(!a)return;const t=new Set(i);new Set(a.filter(e=>!t.has(e))).forEach(t=>t.destroy())},[a,i]),o.useEffect(()=>()=>i.forEach(t=>t.destroy()),[]),o.useMemo(()=>[...i,...t.filter(({name:t})=>!i.some(e=>e.name===t)||(e.has(t)||e.add(t),!1))],[i,t,e])}function kd(t){const e=o.useRef(void 0);return void 0===e.current&&(e.current={value:t()}),e.current.value}function Md(t){return t.filter(pd).map(t=>new dd({wallet:t}))}var Id,Cd;function Td({children:t,wallets:e,adapter:n,isUnloadingRef:r,onAutoConnectRequest:i,onConnectError:a,onError:c,onSelectWallet:u}){const l=o.useRef(!1),[f,d]=o.useState(!1),p=o.useRef(!1),[g,m]=o.useState(!1),[y,w]=o.useState(()=>n?.publicKey??null),[v,E]=o.useState(()=>n?.connected??!1),S=o.useRef(c);o.useEffect(()=>(S.current=c,()=>{S.current=void 0}),[c]);const A=o.useRef((t,e)=>(r.current||(S.current?S.current(t,e):t instanceof h&&"undefined"!=typeof window&&e&&window.open(e.url,"_blank")),t)),[_,B]=o.useState(()=>e.map(t=>({adapter:t,readyState:t.readyState})).filter(({readyState:t})=>t!==x.Unsupported));o.useEffect(()=>{function t(t){B(e=>{const n=e.findIndex(({adapter:t})=>t===this);if(-1===n)return e;const{adapter:r}=e[n];return[...e.slice(0,n),{adapter:r,readyState:t},...e.slice(n+1)].filter(({readyState:t})=>t!==x.Unsupported)})}return B(t=>e.map((e,n)=>{const r=t[n];return r&&r.adapter===e&&r.readyState===e.readyState?r:{adapter:e,readyState:e.readyState}}).filter(({readyState:t})=>t!==x.Unsupported)),e.forEach(e=>e.on("readyStateChange",t,e)),()=>{e.forEach(e=>e.off("readyStateChange",t,e))}},[n,e]);const k=o.useMemo(()=>_.find(t=>t.adapter===n)??null,[n,_]);o.useEffect(()=>{if(!n)return;const t=t=>{w(t),l.current=!1,d(!1),E(!0),p.current=!1,m(!1)},e=()=>{r.current||(w(null),l.current=!1,d(!1),E(!1),p.current=!1,m(!1))},i=t=>{A.current(t,n)};return n.on("connect",t),n.on("disconnect",e),n.on("error",i),()=>{n.off("connect",t),n.off("disconnect",e),n.off("error",i),e()}},[n,r]);const M=o.useRef(!1);o.useEffect(()=>()=>{M.current=!1},[n]),o.useEffect(()=>{M.current||l.current||v||!i||k?.readyState!==x.Installed&&k?.readyState!==x.Loadable||(l.current=!0,d(!0),M.current=!0,async function(){try{await i()}catch{a()}finally{d(!1),l.current=!1}}())},[v,i,a,k]);const I=o.useCallback(async(t,e,r)=>{if(!n)throw A.current(new Zc);if(!v)throw A.current(new b,n);return await n.sendTransaction(t,e,r)},[n,v]),C=o.useMemo(()=>n&&"signTransaction"in n?async t=>{if(!v)throw A.current(new b,n);return await n.signTransaction(t)}:void 0,[n,v]),T=o.useMemo(()=>n&&"signAllTransactions"in n?async t=>{if(!v)throw A.current(new b,n);return await n.signAllTransactions(t)}:void 0,[n,v]),R=o.useMemo(()=>n&&"signMessage"in n?async t=>{if(!v)throw A.current(new b,n);return await n.signMessage(t)}:void 0,[n,v]),L=o.useMemo(()=>n&&"signIn"in n?async t=>await n.signIn(t):void 0,[n]),O=o.useCallback(async()=>{if(l.current||p.current||k?.adapter.connected)return;if(!k)throw A.current(new Zc);const{adapter:t,readyState:e}=k;if(e!==x.Installed&&e!==x.Loadable)throw A.current(new h,t);l.current=!0,d(!0);try{await t.connect()}catch(n){throw a(),n}finally{d(!1),l.current=!1}},[a,k]),U=o.useCallback(async()=>{if(!p.current&&n){p.current=!0,m(!0);try{await n.disconnect()}finally{m(!1),p.current=!1}}},[n]);return s.createElement(Xc.Provider,{value:{autoConnect:!!i,wallets:_,wallet:k,publicKey:y,connected:v,connecting:f,disconnecting:g,select:u,connect:O,disconnect:U,sendTransaction:I,signTransaction:C,signAllTransactions:T,signMessage:R,signIn:L}},t)}let Rd;function Ld(t){return function({adapters:t,userAgentString:e}){return t.some(t=>t.name!==Nf&&t.readyState===x.Installed)?Id.DESKTOP_WEB:e&&/android/i.test(e)&&!function(t){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(t)}(e)?Id.MOBILE_WEB:Id.DESKTOP_WEB}({adapters:t,userAgentString:(void 0===Rd&&(Rd=globalThis.navigator?.userAgent??null),Rd)})===Id.MOBILE_WEB}function Od(){const t=globalThis.location;if(t)return`${t.protocol}//${t.host}`}function Ud({children:t,wallets:e,autoConnect:n,localStorageKey:r="walletName",onError:i}){const{connection:a}=o.useContext($c),c=Bd(e),u=o.useMemo(()=>{if(!Ld(c))return null;const t=c.find(t=>t.name===Nf);return t||new Df({addressSelector:{select(t){return wf(this,0,void 0,function*(){return t[0]})}},appIdentity:{uri:Od()},authorizationResultCache:Ff(),cluster:(e=a?.rpcEndpoint,e?/devnet/i.test(e)?"devnet":/testnet/i.test(e)?"testnet":"mainnet-beta":"mainnet-beta"),onWalletNotFound:qf});var e},[c,a?.rpcEndpoint]),l=o.useMemo(()=>null==u||-1!==c.indexOf(u)?c:[u,...c],[c,u]),[h,f]=function(t,e){const n=o.useState(()=>{try{const e=localStorage.getItem(t);if(e)return JSON.parse(e)}catch(n){}return e}),r=n[0],i=o.useRef(!0);return o.useEffect(()=>{if(i.current)i.current=!1;else try{null===r?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(r))}catch(e){}},[r,t]),n}(r,null),d=o.useMemo(()=>l.find(t=>t.name===h)??null,[l,h]),p=o.useCallback(t=>{h!==t&&(d&&d.name!==Nf&&d.disconnect(),f(t))},[d,f,h]);o.useEffect(()=>{if(d)return d.on("disconnect",t),()=>{d.off("disconnect",t)};function t(){y.current||f(null)}},[d,c,f,h]);const g=o.useRef(!1),m=o.useMemo(()=>{if(n&&d)return async()=>{(!0===n||await n(d))&&(g.current?await d.connect():await d.autoConnect())}},[n,d]),y=o.useRef(!1);o.useEffect(()=>{if(h!==Nf||!Ld(c))return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)};function t(){y.current=!0}y.current=!1},[c,h]);const w=o.useCallback(()=>{d&&p(null)},[d,p]),b=o.useCallback(t=>{g.current=!0,p(t)},[p]);return s.createElement(Td,{wallets:l,adapter:d,isUnloadingRef:y,onAutoConnectRequest:m,onConnectError:w,onError:i,onSelectWallet:b},t)}gd=new WeakMap,(Cd=Id||(Id={}))[Cd.DESKTOP_WEB=0]="DESKTOP_WEB",Cd[Cd.MOBILE_WEB=1]="MOBILE_WEB";const Nd={setVisible(t){},visible:!1};Object.defineProperty(Nd,"visible",{get:()=>!1});const Pd=o.createContext(Nd);const zd=t=>s.createElement("button",{className:`wallet-adapter-button ${t.className||""}`,disabled:t.disabled,style:t.style,onClick:t.onClick,tabIndex:t.tabIndex||0,type:"button"},t.startIcon&&s.createElement("i",{className:"wallet-adapter-button-start-icon"},t.startIcon),t.children,t.endIcon&&s.createElement("i",{className:"wallet-adapter-button-end-icon"},t.endIcon)),jd=({wallet:t,...e})=>t&&s.createElement("img",{src:t.adapter.icon,alt:`${t.adapter.name} icon`,...e}),Dd=({id:t,children:e,expanded:n=!1})=>{const r=o.useRef(null),i=o.useRef(!0);return o.useLayoutEffect(()=>{n?(()=>{const t=r.current;t&&requestAnimationFrame(()=>{t.style.height=t.scrollHeight+"px"})})():(()=>{const t=r.current;t&&requestAnimationFrame(()=>{t.style.height=t.offsetHeight+"px",t.style.overflow="hidden",requestAnimationFrame(()=>{t.style.height="0"})})})()},[n]),o.useLayoutEffect(()=>{const t=r.current;if(t)return i.current&&(e(),i.current=!1),t.addEventListener("transitionend",o),()=>t.removeEventListener("transitionend",o);function e(){t&&(t.style.overflow=n?"initial":"hidden",n&&(t.style.height="auto"))}function o(n){t&&n.target===t&&"height"===n.propertyName&&e()}},[n]),s.createElement("div",{className:"wallet-adapter-collapse",id:t,ref:r,role:"region",style:{height:0,transition:i.current?void 0:"height 250ms ease-out"}},e)},Fd=({handleClick:t,tabIndex:e,wallet:n})=>s.createElement("li",null,s.createElement(zd,{onClick:t,startIcon:s.createElement(jd,{wallet:n}),tabIndex:e},n.adapter.name,n.readyState===x.Installed&&s.createElement("span",null,"Detected"))),qd=()=>s.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),s.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),s.createElement("g",{clipPath:"url(#clip0_880_5115)"},s.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),s.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),s.createElement("defs",null,s.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},s.createElement("stop",{stopColor:"#9945FF"}),s.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),s.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),s.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),s.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),s.createElement("stop",{offset:"1",stopColor:"#00D18C"})),s.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},s.createElement("stop",{stopColor:"#9945FF"}),s.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),s.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),s.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),s.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),s.createElement("stop",{offset:"1",stopColor:"#00D18C"})),s.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},s.createElement("stop",{stopColor:"#9945FF"}),s.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),s.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),s.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),s.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),s.createElement("stop",{offset:"1",stopColor:"#00D18C"})),s.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},s.createElement("stop",{stopColor:"#9945FF"}),s.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),s.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),s.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),s.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),s.createElement("stop",{offset:"1",stopColor:"#00D18C"})),s.createElement("clipPath",{id:"clip0_880_5115"},s.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),Kd=({className:t="",container:e="body"})=>{const n=o.useRef(null),{wallets:r,select:i}=o.useContext(Xc),{setVisible:c}=o.useContext(Pd),[u,l]=o.useState(!1),[h,f]=o.useState(!1),[d,p]=o.useState(null),[g,m]=o.useMemo(()=>{const t=[],e=[];for(const n of r)n.readyState===x.Installed?t.push(n):e.push(n);return t.length?[t,e]:[e,[]]},[r]),y=o.useCallback(()=>{f(!1),setTimeout(()=>c(!1),150)},[c]),w=o.useCallback(t=>{t.preventDefault(),y()},[y]),b=o.useCallback((t,e)=>{i(e),w(t)},[i,w]),v=o.useCallback(()=>l(!u),[u]),E=o.useCallback(t=>{const e=n.current;if(!e)return;const r=e.querySelectorAll("button"),i=r[0],o=r[r.length-1];t.shiftKey?document.activeElement===i&&(o.focus(),t.preventDefault()):document.activeElement===o&&(i.focus(),t.preventDefault())},[n]);return o.useLayoutEffect(()=>{const t=t=>{"Escape"===t.key?y():"Tab"===t.key&&E(t)},{overflow:e}=window.getComputedStyle(document.body);return setTimeout(()=>f(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",t,!1),()=>{document.body.style.overflow=e,window.removeEventListener("keydown",t,!1)}},[y,E]),o.useLayoutEffect(()=>p(document.querySelector(e)),[e]),d&&a.createPortal(s.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${h&&"wallet-adapter-modal-fade-in"} ${t}`,ref:n,role:"dialog"},s.createElement("div",{className:"wallet-adapter-modal-container"},s.createElement("div",{className:"wallet-adapter-modal-wrapper"},s.createElement("button",{onClick:w,className:"wallet-adapter-modal-button-close"},s.createElement("svg",{width:"14",height:"14"},s.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),g.length?s.createElement(s.Fragment,null,s.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),s.createElement("ul",{className:"wallet-adapter-modal-list"},g.map(t=>s.createElement(Fd,{key:t.adapter.name,handleClick:e=>b(e,t.adapter.name),wallet:t})),m.length?s.createElement(Dd,{expanded:u,id:"wallet-adapter-modal-collapse"},m.map(t=>s.createElement(Fd,{key:t.adapter.name,handleClick:e=>b(e,t.adapter.name),tabIndex:u?0:-1,wallet:t}))):null),m.length?s.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:v,tabIndex:0},s.createElement("span",null,u?"Less ":"More ","options"),s.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:""+(u?"wallet-adapter-modal-list-more-icon-rotate":"")},s.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):s.createElement(s.Fragment,null,s.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),s.createElement("div",{className:"wallet-adapter-modal-middle"},s.createElement(qd,null)),m.length?s.createElement(s.Fragment,null,s.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:v,tabIndex:0},s.createElement("span",null,u?"Hide ":"Already have a wallet? View ","options"),s.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:""+(u?"wallet-adapter-modal-list-more-icon-rotate":"")},s.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),s.createElement(Dd,{expanded:u,id:"wallet-adapter-modal-collapse"},s.createElement("ul",{className:"wallet-adapter-modal-list"},m.map(t=>s.createElement(Fd,{key:t.adapter.name,handleClick:e=>b(e,t.adapter.name),tabIndex:u?0:-1,wallet:t}))))):null))),s.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:w})),d)},Wd=({children:t,...e})=>{const[n,r]=o.useState(!1);return s.createElement(Pd.Provider,{value:{visible:n,setVisible:r}},t,n&&s.createElement(Kd,{...e}))};export{Hc as A,T as B,Vc as C,Ud as D,Wd as E,us as P,Il as S,Ts as T,Rs as V,x as W,g as a,w as b,h as c,p as d,y as e,m as f,b as g,I as h,M as i,l as j,v as k,E as l,S as m,Cl as n,Tl as o,U as p,N as q,L as r,k as s,j as t,z as u,P as v,Wf as w,f as x,d as y,D as z};
